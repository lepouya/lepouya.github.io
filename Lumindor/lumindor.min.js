(()=>{"use strict";var __webpack_modules__={782:(e,t,n)=>{var a=n(893),s=n(745),i=n(294);function o(){const e=window.localStorage,t="__storage_test__";if(!e)return!1;try{return e.setItem(t,t),e.removeItem(t),!0}catch(t){return t instanceof DOMException&&0!==e.length&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)}}function l(...e){return Object.assign({},e)}l.assign=function(e,t,n){const a=e||{};return null!=t&&a[t]&&null!=n&&"object"==typeof n?a[t]=Object.assign(Object.assign({},a[t]),n):null!=t&&null!=n&&(a[t]=n),a},l.copy=function(e,t){e||(e={}),t||(t={});for(let n in e)l.assign(t,n,e[n]);return t},l.map=function(e,t,n){const a={};for(const s in e){const i=n?n(s):s,o=e[s],l=t?t(o,s):o;a[i]=l}return a},l.filter=function(e,t,n){const a={};for(const s in e){const i=!n||n(s),o=!t||t(e[s],s);i&&o&&(a[s]=e[s])}return a};var r=n(243);function c(e=0,t=0,n=1){return isNaN(e)||e<t?t:e>n?n:e}function u(...e){return[...e]}u.dedupe=function(e){return e.filter(((e,t,n)=>n.indexOf(e)===t))},u.shuffle=function(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e},u.className=function(e,...t){return[...Array.isArray(e)?e:[e],...t].map((e=>e?String(e):void 0)).filter((e=>!!e)).join(" ")||void 0},u.pickWeightedSamples=function(e,t=1,n=0,a,s){const i=[];if(t=Math.floor(c(t,0,e.length)),n=c(n,0,1),0===t)return i;let o=[...e];a&&o.sort(!0===a?void 0:a),s&&(o=o.filter(s));for(let e=0;e<t&&0!==o.length;e++){let e=0;const t=n,a=Math.random();e=.5===t?a:(Math.sqrt(t*t+a-2*t*a)-t)/(1-2*t),e=Math.floor(e*o.length),o.splice(e,1).forEach((e=>i.push(e)))}return i};let d=!1;function m(e){if(d)return e;const t=e.startsWith(".."),n=(t?e:Math.random().toString(36)).substring(2,10);return(t?"":".."+n)+(t?e.slice(10):e).split("").map((e=>e.charCodeAt(0))).map(((e,t)=>String.fromCharCode(e^n.charCodeAt(t%8)))).join("")}function f(e){const t=[],n=e._save_properties;return null!=n&&"object"==typeof n&&Array.isArray(n)&&t.push(...n),t}function h(e){if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map((e=>h(e)));if(e instanceof r.Z)return e.toJSON();if(0===Object.keys(e).length)return null;const t={},n=f(e);let a;for(a in e)if(!a.startsWith("_")&&null!=e[a]&&(0===n.length||n.includes(a))){const n=e[a];if("object"==typeof n){const e=h(n);null!=e&&(t[a.toString()]=e)}else"function"!=typeof n&&(t[a.toString()]=n)}return t}function p(e,t){if(null!=e){const n=f(e);n.push(...t),Object.assign(e,{_save_properties:u.dedupe(n)})}return e}function g(e,t,...n){const a=Object.assign({},t);if(e){let t;for(t in e){let s=e[t];l.assign(a,t,"function"==typeof s?s(a,...n):s)}}return a}function v({kind:e="",tickSource:t="",minValue:n=0,maxValue:a=1/0,direction:s=1,streakKind:i="current",maxStreakKind:o="max",minStreakKind:l="min",resetStreakSource:u=""}={}){return function(d,m){var f,h;if(t&&m!==t)u&&m!==u||i&&this.extra&&(this.extra[i]=s>0?n:s<0?a:0);else{let t=null!==(h=e&&this.extra?this.extra[e]:null===(f=this.count)||void 0===f?void 0:f.toNumber())&&void 0!==h?h:0;(t>n||s>0)&&(t<a||s<0)&&(t=c(t+s*d,n,a),e&&this.extra?this.extra[e]=t:this.count=r.Z.fromNumber(t),i&&this.extra&&null!=this.extra[i]&&(this.extra[i]=c(this.extra[i]+s*d,n,a),o&&null!=this.extra[o]&&this.extra[o]<this.extra[i]&&(this.extra[o]=this.extra[i]),l&&null!=this.extra[l]&&this.extra[l]>this.extra[i]&&(this.extra[l]=this.extra[i])))}return null}}const b=[{name:"totalTime",icon:"ti:clock",display:"time",tick:v()},{name:"activeTime",icon:"ti:alarm",display:"time",extra:{current:0,max:0},tick:v({tickSource:"tick"})},{name:"offlineTime",icon:"ti:user-off",display:"time",extra:{current:0,max:0},tick:v({tickSource:"load"})}];function j(e,t){var n,a;return null!==(a=e.resources["string"==typeof t?t:null!==(n=t.name)&&void 0!==n?n:""])&&void 0!==a?a:y(e,t)}function x(e,t){return t.map((({resource:t,count:n})=>({resource:j(e,t),count:n}))).filter((({resource:e,count:t})=>e&&r.Z.neq(t,0)))}function y(e,t){var n,a;const s="string"==typeof t?t:null!==(n=t.name)&&void 0!==n?n:"",i=null!==(a=e.resources[s])&&void 0!==a?a:function(e,t){const n={manager:e,name:t,priority:1/0,count:r.Z.dZero,extra:{},value(){var e,t;return n.count.clamp(null!==(e=n.minCount)&&void 0!==e?e:0,null!==(t=n.maxCount)&&void 0!==t?t:1/0)},cost:()=>[],buy:(e=1,t="partial",a=1,s=1,i)=>O(n,e,t,a,s,i),sell:(e=1,t="full",a=1,s=1,i)=>n.buy("object"!=typeof e||e instanceof r.Z?r.Z.neg(e):l.map(e,(e=>-(null!=e?e:0))),t,a,s,i),add:(e,t)=>n.buy(e,"free",t),canBuy:(e,t,a)=>n.buy(e,"dry-partial",1,t,a),execution:{},rate:{count:r.Z.dZero,ticks:0,pastCounts:[],pastTicks:[]}};return p(n,["name","unlocked","disabled","count","extra"])}(e,s);if("string"!=typeof t){let e;for(e in t)"extra"===e?l.assign(i,e,t[e]):"count"===e||"maxCount"===e||"minCount"===e?null!=t[e]&&(i[e]=r.Z.fromValue(t[e])):"manager"!==e&&"name"!==e&&null!=t[e]&&(i[e]=t[e])}return i.name&&(e.resources[i.name]=i),i}function N(e,t=!0){return k(e).every((({resource:e,count:n})=>{var a,s;return(null===(a=e.unlocked)||void 0===a||a)&&e.count.minus(n).gte(t&&null!==(s=e.minCount)&&void 0!==s?s:0)}))}function O(e,t,n,a,s,i){var o,l,u,d;if("object"!=typeof t||t instanceof r.Z)return _(e.manager,[{resource:e,count:t}],n,a,s,i);const m=w(e,i).toNumber();if(!isFinite(m)||Math.abs(t.minAmount)>Math.abs(t.maxAmount)||Math.abs(t.maxAmount)>1e3||0===t.increments)return{count:0,style:n,gain:[],cost:[]};const f=null!==(l=null===(o=e.minCount)||void 0===o?void 0:o.toNumber())&&void 0!==l?l:0,h=null!==(d=null===(u=e.maxCount)||void 0===u?void 0:u.toNumber())&&void 0!==d?d:1/0,p=t.increments;function g(e){return c(Math.floor((m+e)/p)*p,f,h)-m}let v=_(e.manager,[{resource:e,count:g(t.maxAmount)}],"dry-partial",a,s,i),b=v.count.toNumber();if(b%p!=0&&(v=_(e.manager,[{resource:e,count:g(b)}],"dry-partial",a,s,i),b=v.count.toNumber()),0===b||t.minAmount>=0&&b<t.minAmount||t.minAmount<0&&b>t.minAmount){if(!n.includes("dry"))return{count:0,style:n,gain:[],cost:[]};const o=g(c(p,Math.min(t.minAmount,t.maxAmount),Math.max(t.minAmount,t.maxAmount)));v=_(e.manager,[{resource:e,count:0===o?Math.sign(p):o}],"dry-full",a,s,i),b=v.count.toNumber()}return n.includes("dry")?v:_(e.manager,[{resource:e,count:b}],n,a,s,i)}function _(e,t,n,a,s,i){a=e.gainFactor?e.gainFactor(a):a,s=e.costFactor?e.costFactor(s):s;const o=x(e,t).map((({resource:t,count:o})=>{var l;const c=function(e,t,n,a,s,i,o){var l,c,u,d;if(!t||r.Z.eq(n,0))return{count:0,style:a,gain:[],cost:[]};let m=w(t,o),f=m.plus(n).clamp(null!==(l=t.minCount)&&void 0!==l?l:0,null!==(c=t.maxCount)&&void 0!==c?c:1/0);if("free"===a){const e=f.minus(m);return{count:e,style:a,gain:[{resource:t,count:e.mul(s)}],cost:[]}}m.gt(f)&&([m,f]=[f,m],[s,i]=[r.Z.neg(s),r.Z.neg(i).mul(null!==(u=e.settings.sellRatio)&&void 0!==u?u:1)]);let h=[];null!==(d=t.unlocked)&&void 0!==d&&!d&&t.unlockCost&&(h=x(e,t.unlockCost()));const p=m.floor().toNumber(),g=f.floor().toNumber();if(!isFinite(p)||!isFinite(g)||Math.abs(g-p)>1e3)return{count:0,style:a,gain:[],cost:[]};let v=0;for(let n=p;n<g;n++){const s=x(e,t.cost(n+1));s.forEach((e=>e.count=r.Z.mul(e.count,i)));const o=k([...h,...s]);if(a.includes("partial")&&!N(o))break;v++,h=o}return!a.includes("dry")&&!N(h)||"full"===a&&v!==g-p?{count:0,style:a,gain:[],cost:[]}:{count:v*r.Z.sign(s),style:a,gain:[{resource:t,count:r.Z.mul(s,v)}],cost:h}}(e,t,o,n,t.gainFactor?t.gainFactor(a):a,t.costFactor?t.costFactor(s):s,i);if(n.includes("dry")||r.Z.eq(c.count,0))return c;{if(null!==(l=t.unlocked)&&void 0!==l&&!l){if(!t.unlockCost)return{count:0,style:n,gain:[],cost:[]};t.unlocked=!0}const e=S(t,c.gain),a=c.cost.map((({resource:e,count:t})=>S(e,[{resource:e,count:r.Z.neg(t)}]))).flat(),s=Object.assign(Object.assign({},c),{gain:e,cost:a});return t.onPurchase&&t.onPurchase(s),s}}));return{count:o.reduce(((e,t)=>e.plus(t.count)),r.Z.dZero),style:n,gain:k(o.map((e=>e.gain)).flat()),cost:k(o.map((e=>e.cost)).flat())}}function w(e,t){return null!=t?null!=e&&"string"==typeof t&&null!=e.extra[t]?r.Z.fromValue_noAlloc(e.extra[t]):r.Z.fromValue_noAlloc(t):null!=e?e.count:r.Z.dNaN}function k(e){const t={};return e.forEach((({resource:e,count:n})=>{var a,s;null!==(a=t[s=e.name])&&void 0!==a||(t[s]={resource:e,count:0}),t[e.name].count=r.Z.add(t[e.name].count,n)})),Object.values(t).filter((({count:e})=>r.Z.neq(e,0)))}function S(e,t){return k(t.filter((({resource:t})=>e.name===t.name)).map((({count:t})=>{var n,a;const s=e.count;return e.count=e.count.plus(t).clamp(null!==(n=e.minCount)&&void 0!==n?n:0,null!==(a=e.maxCount)&&void 0!==a?a:1/0),[{resource:e,count:e.count.minus(s)}]})).flat())}const C={ticksPerSecond:50,framesPerSecond:10,saveFrequencySecs:60,lastReset:Date.now(),lastUpdate:Date.now(),lastSaved:0,lastLoaded:Date.now(),rateUpdateSecs:.1,rateHistoryWindow:10,minResourceUpdateSecs:.001,maxResourceUpdateSecs:86400,maxResourceTickSecs:1,offlineSummaryMinSecs:60,offlineSummaryMaxUpdates:12,sellRatio:.8,timeDilation:1,buyAmount:"+1",numberFormat:"Standard",theme:"light"},A=[];const F=globalThis.gamePackage.name;function M(e,t){const n=Object.assign({},e),a=!!t&&function(e,t){let n=null;if(!n)try{n=JSON.parse(m(window.atob(t)))}catch(e){n=null}if(!n)try{n=JSON.parse(window.atob(t))}catch(e){n=null}if(!n)try{n=JSON.parse(t)}catch(e){n=null}return!!n&&function(e,t){if(null==e||null==t||"object"!=typeof t||"object"!=typeof e)return!1;let n;for(n in e)typeof t[n]==typeof e[n]&&(e[n]=t[n]);return!0}(e,n)}(n,t);return e.init(),A.forEach((t=>t(e))),a&&(l.copy(n.settings,e.settings),Object.values(n.resourceManager.resources||{}).forEach((t=>e.resourceManager.upsert(t)))),e.settings.lastLoaded=Date.now(),e.resourceManager.update(void 0,"load"),a}function P(e,t){return e.settings.lastSaved=Date.now(),function(e,t=!1){return t?JSON.stringify(h(e),null,2):window.btoa(m(JSON.stringify(h(e))))}(e,t)}const T=function e(t){var n,a;const s=t||{};return null!==(n=s.init)&&void 0!==n||(s.init=()=>{}),s.load=()=>{return M(s,(e=F,o()?window.localStorage.getItem(e):null));var e},s.loadAs=e=>M(s,e),s.save=e=>{return t=F,n=P(s,e),void(o()&&n&&window.localStorage.setItem(t,n));var t,n},s.saveAs=e=>P(s,e),s.reset=()=>function(t){var n;n=F,o()&&window.localStorage.removeItem(n),e(t)}(s),s.settings=Object.assign(Object.assign({},C),{lastReset:Date.now(),lastUpdate:Date.now(),lastLoaded:Date.now()}),s.resourceManager=function(e,t){const n={context:e,settings:t,resources:{},upsert:e=>y(n,e),get:e=>j(n,e),canAfford:e=>N(x(n,e)),purchase:(e,t="partial",a=1,s=1,i)=>_(n,e,t,a,s,i),purchaseAll:(e={},t=1,a,s=1,i=1,o)=>function(e,t,n,a,s,i,o){let l=Object.values(e.resources).filter((e=>{var t;return(null===(t=e.unlocked)||void 0===t||t)&&!e.disabled}));const c=Object.keys(t);c.length>0&&(l=l.filter((e=>c.includes(e.name))));const u=l.map((e=>{var l;return O(e,n,a,s,i,null!==(l=t[e.name])&&void 0!==l?l:o)}));return{count:u.reduce(((e,t)=>e.plus(t.count)),r.Z.dZero),style:a,gain:k(u.map((e=>e.gain)).flat()),cost:k(u.map((e=>e.cost)).flat())}}(n,e,t,null!=a?a:"partial",s,i,o),update:(e,t)=>function(e,t,n){var a;const{rateUpdateSecs:s=.1,rateHistoryWindow:i=10,minResourceUpdateSecs:o=.001,maxResourceUpdateSecs:l=86400,maxResourceTickSecs:r=1,timeDilation:d=1}=e.settings;let m=c((t-(null!==(a=e.settings.lastUpdate)&&void 0!==a?a:t))/1e3,0,l);if(m<o&&null!=e.settings.lastUpdate)return[];e.settings.lastUpdate=t;const f=t-1e3*m,h={};Object.values(e.resources).forEach((t=>{var n,a;!t.autoUnlock||t.disabled||null===(n=t.unlocked)||void 0===n||n||N(x(e,(null!==(a=t.unlockCost)&&void 0!==a?a:t.cost)(1)),!1)&&(t.unlocked=!0)}));const p=Object.values(e.resources).filter((e=>{var t;return(null===(t=e.unlocked)||void 0===t||t)&&!e.disabled})).sort(((e,t)=>e.priority-t.priority));p.forEach((e=>{var n,a,s,i,o;h[e.name]=e.count,null!==(n=(i=e.rate).lastCountUpdate)&&void 0!==n||(i.lastCountUpdate=f),null!==(a=(o=e.rate).lastCount)&&void 0!==a||(o.lastCount=e.count),e.execution.lastTick=c(null!==(s=e.execution.lastTick)&&void 0!==s?s:f,t-1e3*l,t),e.execution.lastAttempt=t}));const g={},v=p.filter((e=>e.tick)),b=.001/d;for(;m>0;){m-=c(m,o,r);const e=t-1e3*m;v.forEach((t=>{var a,s,i;const o=(e-t.execution.lastTick)*b;o>0&&(!t.shouldTick||t.shouldTick(o,n))&&(t.execution.lastResult=t.tick(o,n),t.execution.lastTick=e,t.rate.deltaTicks=(null!==(a=t.rate.deltaTicks)&&void 0!==a?a:0)+1,null!==(s=(i=t.rate).lastTickUpdate)&&void 0!==s||(i.lastTickUpdate=e),t.execution.lastResult&&(g[t.name]||(g[t.name]=[]),g[t.name].includes(t.execution.lastResult)||g[t.name].push(t.execution.lastResult)))}))}if(p.forEach((t=>{var n;if(t.autoAward&&!t.disabled&&t.count.lt(null!==(n=t.maxCount)&&void 0!==n?n:0)){const n=t.cost(t.count.add(1));N(x(e,n),!1)&&(t.count=t.count.add(1),t.onPurchase&&t.onPurchase({count:1,style:"free",gain:[{resource:t,count:1}],cost:[]}))}})),p.forEach((e=>{var n,a,o,l;const r=(t-(null!==(n=e.rate.lastCountUpdate)&&void 0!==n?n:0))/1e3;(null==e.rate.lastCountUpdate||null==e.rate.lastCount||r>=s)&&(e.rate.count=e.count.minus(null!==(a=e.rate.lastCount)&&void 0!==a?a:0).div(r),e.rate.lastCount=e.count,e.rate.lastCountUpdate=t,e.rate.pastCounts.unshift(e.rate.count),e.rate.pastCounts.splice(i));const c=(t-(null!==(o=e.rate.lastTickUpdate)&&void 0!==o?o:0))/1e3;(null==e.rate.lastTickUpdate||null==e.rate.deltaTicks||c>=s)&&(e.rate.ticks=(null!==(l=e.rate.deltaTicks)&&void 0!==l?l:0)/c,e.rate.deltaTicks=0,e.rate.lastTickUpdate=t,e.rate.pastTicks.unshift(e.rate.ticks),e.rate.pastTicks.splice(i))})),p.forEach((e=>{var t;if(h[e.name]=e.count.minus(null!==(t=h[e.name])&&void 0!==t?t:0),h[e.name].eq(0)&&delete h[e.name],e.onChange&&h[e.name]){const t=e.onChange(e.count,n);t&&!g[e.name].includes(t)&&g[e.name].push(t)}})),e.execution[n]={lastTick:t,lastDelta:(t-f)/1e3,lastResult:u.dedupe(Object.values(g).flat()),lastChanges:h},e.onUpdateComplete){const a=e.onUpdateComplete(h,(t-f)/1e3,n);a&&(g.__ResourceManager_onUpdateComplete=[a])}return e.execution[n].lastResult}(n,null!=e?e:Date.now(),null!=t?t:"unknown"),execution:{}};return b.forEach((e=>y(n,e))),p(n,["resources"])}(s,s.settings),null!==(a=s.popupManager)&&void 0!==a||(s.popupManager=function(e,t){const n=t.get("popup:states"),a={context:e,currentStates:n,popups:{},register(...e){e.forEach((e=>{var t,n,s,i;a.popups[null!==(t=e.name)&&void 0!==t?t:""]||(a.popups[null!==(n=e.name)&&void 0!==n?n:""]={}),l.assign(a.popups[null!==(s=e.name)&&void 0!==s?s:""],null!==(i=e.step)&&void 0!==i?i:0,e)}))},resolve(e="",t=0){var n;const s=(null!==(n=a.popups[e])&&void 0!==n?n:{})[t];if(!s)return;const i=Object.keys(a.popups[e]).map((e=>parseInt(e))).sort(((e,t)=>e-t)),o=i.indexOf(t),l=i[o-1],r=i[o+1],c=100*(1+Math.floor(t/100));return g(s,{name:e,step:t,enabled:!0,title:`${e} #${t}`,body:"...",prev:{name:e,step:null!=l?l:t,title:"< back"},next:{name:e,step:null!=r?r:c,title:r?"next >":"done"},skip:{name:e,step:c,title:"skip >>>"},highlightSelector:"",greyOut:!1,bounds:{left:"50% - 14rem",top:"6rem",width:"28rem",height:"28rem"}},a)},getPopupState(e){var t;const a="string"==typeof e?e:null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"",s=n.extra[a];return Object.assign({name:a,step:"object"==typeof e&&(null==e?void 0:e.step)||0,priority:1/0},s)},setPopupState(e,t){const s=a.getPopupState(e);n.extra[s.name]=Object.assign(Object.assign({},s),t)},delPopupState(e){const t=a.getPopupState(e).name;delete n.extra[t]},getCurrentPopup:()=>Object.keys(a.currentStates.extra).map(a.getPopupState).sort(((e,t)=>e.priority-t.priority)).reduce((function(e,t){if(e)return e;const n=a.resolve(t.name,t.step);return n&&n.enabled?n:void 0}),void 0)};return a}(s,s.resourceManager)),s.init(),A.forEach((e=>e(s))),p(s,["settings","resourceManager"])}(),$=(0,i.createContext)(T);function B(e){return(0,a.jsx)($.Provider,Object.assign({value:T},{children:e.children}))}function Z(){return function(e){return Object.assign(Object.assign(Object.assign({},e.resourceManager),e),{context:e})}((0,i.useContext)($))}var E=n(655),U=n(250);function q(e){var t,n;const a="string"==typeof e?{id:e}:e;let s,i=document.getElementById(null!==(t=a.id)&&void 0!==t?t:"");for(s in i||(i=document.createElement(null!==(n=a.tagName)&&void 0!==n?n:"div"),document.body.appendChild(i)),a)l.assign(i,s,a[s]);return i}function R(e){e?document.documentElement.setAttribute("theme",e):document.documentElement.removeAttribute("theme")}function L(e){if(e.icon.includes(";")){const[t,...n]=e.icon.split(";");e=Object.assign(Object.assign({},e),{icon:t,children:(0,a.jsxs)(a.Fragment,{children:[n.map(((e,t)=>(0,a.jsx)(D,{icon:e},`badge-${t}`))),e.children]})})}return(0,a.jsxs)("div",Object.assign({className:"icon-wrapper"},{children:[I(e),e.children]}))}function D(e){return I(e,"icon-badge")}function I({icon:e,pack:t,color:n,size:s,position:i,className:o,style:l},r=""){const c=e.split(/\s+/).filter((e=>e.trim().length>0)).filter((n=>!n.includes(":")||!([t,e]=n.split(":",2)))).filter((e=>!/^#[0-9a-f]+$/i.test(e)||!(n=e))).filter((e=>!/^[-.0-9]+(%|px|em|vh|vw)$/i.test(e)||!(s=e))).filter((e=>"top-left"!==e&&"top-right"!==e&&"bottom-left"!==e&&"bottom-right"!==e||!(i=e)));return e=c.pop()||e,n=c.pop()||n,s=c.pop()||s,o=["icon",t&&`icon-${t}`,e&&`icon-${e}`,(i=i||(r?"top-right":void 0))&&`icon-${i}`,n&&!n.startsWith("#")&&n,o,r].filter(Boolean).join(" "),(0,a.jsx)("svg",Object.assign({className:o,width:s,height:s,color:(null==n?void 0:n.startsWith("#"))?n:void 0,style:l},{children:(0,a.jsx)("use",{href:`${t?`sprites/${t}.svg`:""}#${e}`})}))}const W={light:"Light Mode",dark:"Dark Mode","jumbo-light":"Jumbo Light","jumbo-dark":"Jumbo Dark"};function G(e,t,n=0,a=n,s=0){var i;const o=r.Z.fromValue_noAlloc(e);return t=null!==(i="string"==typeof t?H[t]:t)&&void 0!==i?i:V,o.isFinite()?o.exponent<-300?o.sign<0?t.negativeVerySmall(o.abs(),s):t.verySmall(o,s):o.exponent<3?o.sign<0?t.negativeSmall(o.abs().toNumber(),s):t.small(o.toNumber(),s):o.sign<0?t.negativeDecimal(o.abs(),n,a):t.decimal(o,n,a):o.sign<0?t.negativeInfinite():t.infinite()}const H={},z={prec:3,commas:{show:!0,min:1e6,max:1e9}};G.all=H,G.exponentSettings=z,G.register=e=>{var t;return H[null!==(t=e.name)&&void 0!==t?t:""]=Object.assign(Object.assign({},V),e)};const V={name:"System",infinite:()=>(1/0).toString(),negativeInfinite(){return`-${this.infinite()}`},decimal(e,t,n){var a;return e.toStringWithDecimalPlaces(null!==(a=null!=t?t:n)&&void 0!==a?a:0)},negativeDecimal(e,t,n){return`-${this.decimal(e,t,n)}`},verySmall(e,t){return this.small(e.toNumber(),t)},negativeVerySmall(e,t){return`-${this.verySmall(e,t)}`},small:(e,t)=>e.toFixed(t),negativeSmall(e,t){return`-${this.small(e,t)}`}};G.register(V);const Q=G.register({name:"Standard",decimal(e,t,n){var a;return null!==(a=this.exponent)&&void 0!==a||(this.exponent=ee(Y,1,1e3)),this.exponent(e,t,n)}}),J=(e,t=Q)=>G.register({name:`Mixed ${e.name}`,decimal:(n,a,s)=>(n.exponent<33?t:e).decimal(n,a,s)});J(G.register({name:"Scientific",decimal(e,t,n){var a;return null!==(a=this.exponent)&&void 0!==a||(this.exponent=ee(X(this),1)),this.exponent(e,t,n)}})),J(G.register({name:"Engineering",decimal(e,t,n){var a;return null!==(a=this.exponent)&&void 0!==a||(this.exponent=ee(X(this),3)),this.exponent(e,t,n)}})),J(G.register({name:"Logarithmic",decimal(e,t,n){var a;return null!==(a=this.exponent)&&void 0!==a||(this.exponent=X(this,((e,t)=>e.toFixed(t)))),`e${this.exponent(e.log10(),t,n)}`}}));const K={abbreviations:["K","M","B","T","Qa","Qt","Sx","Sp","Oc","No"],prefixes:[["","U","D","T","Qa","Qt","Sx","Sp","O","N"],["","Dc","Vg","Tg","Qd","Qi","Se","St","Og","Nn"],["","Ce","Dn","Tc","Qe","Qu","Sc","Si","Oe","Ne"]],prefixes_2:["","MI-","MC-","NA-","PC-","FM-","AT-","ZP-"]};function Y(e){const t=e.toNumber()-1;if(-1===t)return"";if(t>z.commas.min)return(1/0).toString();if(t<K.abbreviations.length)return K.abbreviations[t];const n=[];for(let e=t;e>0;e=Math.floor(e/10))n.push(K.prefixes[n.length%3][e%10]);for(;n.length%3!=0;)n.push("");let a="";for(let e=n.length/3-1;e>=0;e--)a+=n.slice(3*e,3*e+3).join("")+K.prefixes_2[e];return a.replace(/-[A-Z]{2}-/g,"-").replace(/U([A-Z]{2}-)/g,"$1").replace(/-$/,"")}function X(e,t=(e=>e.toString())){return function(n,a=z.prec,s=Math.max(2,a)){if(n.lt(z.commas.min))return t(n.toNumber(),Math.max(a,1));if(z.commas.show&&n.lt(z.commas.max)){const e=t(n.toNumber(),0).split(".");return e[0]=e[0].replace(/\w+$/g,(e=>Array.from(Array(Math.ceil(e.length/3))).map(((t,n)=>n?e.slice(-3*(n+1),-3*n):e.slice(-3))).reverse().join(","))),e.join(".")}return e.decimal(n,s,s)}}function ee(e,t,n=10){return function(a,s=0,i=0){const o=Math.pow(n,t);let l=a.log(o).floor().mul(t);n>=100&&(l=l.max(r.Z.dZero));let c=a.div(l.pow_base(n)).toFixed(s);return c===o.toFixed(s)&&(c=1..toFixed(s),l=l.add(t)),l.eq(r.Z.dZero)?c:`${c}${10===n?"e":" "}${e(l,i)}`}}function te(e,t){return null==e||null==e||"string"==typeof e?te.word(null!=e?e:void 0,t):e instanceof Date?te.time(e.getTime(),t):e instanceof r.Z||"number"==typeof e?te.number(e,t):""}te.number=function(e,t){var n,a,s;const i=null!==(n=null==t?void 0:t.prec)&&void 0!==n?n:0,o=null!==(a=null==t?void 0:t.smallPrec)&&void 0!==a?a:i,l=null!==(s=null==t?void 0:t.expPrec)&&void 0!==s?s:Math.max(i,"tiny"===(null==t?void 0:t.len)?0:"short"===(null==t?void 0:t.len)?2:3);let c=G(e,null==t?void 0:t.notation,i,l,o);return c&&(null==t?void 0:t.alwaysShowSign)&&!"+-".includes(c[0])&&r.Z.gte(e,0)&&(c="+"+c),c},te.time=function(e,t){var n,a,s,i,o,l;const r=null!==(n=null==t?void 0:t.len)&&void 0!==n?n:"long",c=(null!==(a=null==t?void 0:t.sep)&&void 0!==a?a:"long"===r)?", ":":",u=((null==t?void 0:t.oxfordComma)?c:"")+((null!==(s=null==t?void 0:t.lastSep)&&void 0!==s?s:"long"===r)?" and ":c),d=(null!==(i=null==t?void 0:t.now)&&void 0!==i?i:"long"===r)?"now":"",m=(null!==(o=null==t?void 0:t.never)&&void 0!==o?o:"long"===r)?"never":"",f=(null!==(l=null==t?void 0:t.ago)&&void 0!==l?l:"long"===r)?"ago":"";if(m&&(e<0||null!=(null==t?void 0:t.epoch)&&(t.epoch<=0||e-t.epoch<0)))return m;if(d&&(0===e||null!=(null==t?void 0:t.epoch)&&e===t.epoch))return d;null!=(null==t?void 0:t.epoch)&&(e-=t.epoch);let h=Math.floor(e/1e3),p=Math.floor(e-1e3*h),g=Math.floor(h/60);h-=60*g;let v=Math.floor(g/60);g-=60*v;let b=Math.floor(v/24);v-=24*b;let j=Math.floor(b/365);if(b-=365*j,(null==t?void 0:t.millis)||(p=0),null!=d&&b+v+g+h+p===0)return d;let x=[];if(x="long"!==r?[j>0?j.toFixed(0):"",b>0?b.toFixed(0):"",v>0||"short"===r?v.toFixed(0):"",g>0||"short"===r?g.toFixed(0):"",(h+p/1e3).toFixed(!(null==t?void 0:t.millis)||"tiny"===r&&0===p?0:3)].map((e=>"short"!==r||1!==e.length&&1!==e.indexOf(".")?e:"0"+e)):[[j,"year"],[b,"day"],[v,"hour"],[g,"minute"],[h,"second",j+b+v+g===0,p]].map((([e,t,n=!1,a=0])=>e>0||a>0||n&&0===e?e.toString()+(a>0?"."+a.toString():"")+" "+t+(1===e?"":"s"):"")),x=x.filter((e=>!!e)),x.length>2){const e=x.pop();x=[x.join(c),e]}let y=x.join(u)+(f?" "+f:"");return y&&(null==t?void 0:t.alwaysShowSign)&&e>=0&&"long"!==r&&!"+-".includes(y[0])&&(y="+"+y),y},te.word=function(e,t){var n,a,s,i,o,l;return e||(e=null!==(s=Math.abs(Math.abs(null!==(n=null==t?void 0:t.count)&&void 0!==n?n:0)-1)<=(null!==(a=null==t?void 0:t.tolerance)&&void 0!==a?a:.001)?null==t?void 0:t.singularName:null==t?void 0:t.pluralName)&&void 0!==s?s:null==t?void 0:t.name),(null===(i=null==t?void 0:t.condition)||void 0===i||i)&&(e||null!==(o=null==t?void 0:t.allowEmpties)&&void 0!==o&&o)?null===(l=null==t?void 0:t.capitalize)||void 0===l||l?(null!=e?e:"").replace(/([a-z])([A-Z]|_\S)/g,((e,t,n)=>`${t} ${n.slice(-1)}`)).replace(/(?:^|\s)\w(?=\w)/g,(e=>e.toUpperCase())):null!=e?e:"":""},te.resource=function(e,t){var n,a,s,i,o,c,u,d,m,f,h,p,g,v,b,j,x,y,N,O,_,w,k,S,C;t||(t={});let A=null!==(n=(e=t.override?Object.assign(Object.assign({},e),t.override):e).display)&&void 0!==n?n:"number";null!==(a=t.len)&&void 0!==a||(t.len="long"),null!==(s=t.now)&&void 0!==s||(t.now=""),null!==(i=t.never)&&void 0!==i||(t.never=""),null!==(o=t.ago)&&void 0!==o||(t.ago=""),null!==(c=t.prec)&&void 0!==c||(t.prec="time"===A?3:"number"===A?2:1),null!==(u=t.smallPrec)&&void 0!==u||(t.smallPrec="number"===A?0:t.prec),null!==(d=t.round)&&void 0!==d||(t.round="number"===A?r.Z.floor:r.Z.round),null!==(m=t.millis)&&void 0!==m||(t.millis=t.prec>0),t.notation||(t.notation=(null===(f=e.manager)||void 0===f?void 0:f.settings.numberFormat)||"Standard"),null!==(h=t.tolerance)&&void 0!==h||(t.tolerance=Math.pow(10,-t.prec-("percentage"===A?2:0)));const F=null===(p=e.unlocked)||void 0===p||p?e.disabled?"disabled":"active":"locked";let M,P,T=null!==(b=(null===(g=t.override)||void 0===g?void 0:g.value)?t.override.value():null===(v=t.override)||void 0===v?void 0:v.count)&&void 0!==b?b:e.value?e.value():e.count;T&&(T=t.round(T.div(t.tolerance)).mul(t.tolerance)),T&&"none"!==A&&(M="time"===A?te.time(1e3*T.toNumber(),t):"percentage"===A?te(T,t)+"%":te(T,t),P=ne[T.cmp_tolerance(r.Z.dZero,t.tolerance)]),null!==(j=t.count)&&void 0!==j||(t.count=T?T.toNumber():void 0),null!==(x=t.name)&&void 0!==x||(t.name=e.name),null!==(y=t.singularName)&&void 0!==y||(t.singularName=null!==(N=e.singularName)&&void 0!==N?N:e.pluralName),null!==(O=t.pluralName)&&void 0!==O||(t.pluralName=null!==(_=e.pluralName)&&void 0!==_?_:e.singularName);const $=te(null===(w=t.override)||void 0===w?void 0:w.name,t)||void 0,B=e.icon;let Z;e.maxCount&&(Z=te(e.maxCount,t));const E=l.map(e.extra||{},(e=>te(e,t)||void 0),(e=>te(e,t)));let U,q;if((null===(k=e.rate)||void 0===k?void 0:k.lastCountUpdate)&&e.rate.count&&"none"!==A){let n=e.rate.count;null!==(S=t.useRatePercent)&&void 0!==S||(t.useRatePercent=T&&T.gte(1e3)&&n.gte(1e3)),"number"===A&&t.useRatePercent&&T&&(A="percentage",n=n.div(T)),t.len="long"!==t.len?"tiny":"short",t.alwaysShowSign=!0,t.smallPrec=(null!==(C=t.smallPrec)&&void 0!==C?C:t.prec)+2,t.prec+=2,U="time"===A?te.time(1e3*e.rate.count.toNumber(),t):"percentage"===A?te(n.mul(100),t)+"%":te(n,t),U&&(U+="/s"),q=ne[r.Z.cmp_tolerance(n,0,t.tolerance)]}return{active:F,name:$,icon:B,value:M,valueSign:P,max:Z,rate:U,rateSign:q,extras:E}};const ne={[-1]:"negative",0:"zero",1:"positive"};function ae(e){return ue("string"==typeof e?{message:e}:null!=e?e:{})}ae.info=(e,t)=>ue(Object.assign(Object.assign({},t),{message:e,type:"info"})),ae.success=(e,t)=>ue(Object.assign(Object.assign({},t),{message:e,type:"success"})),ae.fail=(e,t)=>ue(Object.assign(Object.assign({},t),{message:e,type:"fail"}));const se={top:"top",bottom:"bottom"},ie={left:"left",center:"center",right:"right"},oe={info:"ti:info-circle",success:"ti:circle-check",fail:"ti:alert-circle"};let le,re,ce=0;function ue(e){var t,n,a;(e=Object.assign({},e)).id=null!==(t=e.id)&&void 0!==t?t:ce++;const s=null!==(n=e.position)&&void 0!==n?n:"top-right";le=null!=le?le:{},le[s]=null!==(a=le[s])&&void 0!==a?a:[],s.includes("bottom")?le[s].unshift(e):le[s].push(e);const i=e.onHide;return e.onHide=e=>{var t;const n=null!==(t=e.position)&&void 0!==t?t:"top-right";le[n]=le[n].filter((t=>t.id!==e.id)),de(),i&&i(e)},de(),Object.assign(Object.assign({},new Promise((t=>{var n;return setTimeout(t,1e3*(null!==(n=e.duration)&&void 0!==n?n:3))}))),{hide:()=>e.onHide(e)})}function de(){re.render(Object.keys(se).map((e=>(0,a.jsx)("div",Object.assign({className:u.className("row",e)},{children:Object.keys(ie).map((t=>{var n;const s=`${e}-${t}`;return(0,a.jsx)("div",Object.assign({className:u.className("group",t)},{children:(null!==(n=le[s])&&void 0!==n?n:[]).map((e=>(0,a.jsx)(me,Object.assign({},e),`toast_${s}_${e.id}`)))}),s)}))}),e))))}function me(e){var t;const[n,s]=(0,i.useState)("hidden");function o(){s("hidden"),setTimeout((()=>{e.onHide&&e.onHide(e)}),300)}(0,i.useEffect)((()=>{var t;const n=setTimeout((()=>s("shown")),50),a=setTimeout((()=>{0!==e.duration&&o()}),1e3*(null!==(t=e.duration)&&void 0!==t?t:3));return()=>{clearTimeout(n),clearTimeout(a)}}),[]);const l="object"==typeof e.icon?e.icon:e.icon?{icon:e.icon}:e.type?{icon:oe[e.type]}:void 0;return(0,a.jsxs)("div",Object.assign({className:u.className("toast",n,e.type,e.className),onClick:null!==(t=e.onClick)&&void 0!==t?t:o,style:e.style},{children:[l&&(0,a.jsx)(L,Object.assign({},l)),(0,a.jsxs)("div",{children:[e.heading&&(0,a.jsx)("h4",{children:e.heading}),e.message&&(0,a.jsx)("div",Object.assign({className:"message"},{children:e.message})),e.children&&(0,a.jsx)("div",Object.assign({className:"children"},{children:e.children}))]})]}))}window.addEventListener("load",(()=>re=(0,s.s)(q("toasts-root"))),!1);const fe=["context","manager","resourceManager"];var he=n(877);function pe({resource:e,override:t,epoch:n,length:s,precision:i,showLocked:o,showIcon:l=!0,showName:r=!0,showValue:c=!0,showMaxValue:d,showRate:m,showExtras:f,showColors:h,showRateColors:p=!0,showNegatives:g=!0,showZeros:v=!0,showPlusSign:b,showZeroRates:j,showRatePercentages:x,showCapitalized:y,showChrome:N,prefix:O,suffix:_,infix:w,placeholder:k,className:S,style:C}){var A;const{resourceManager:F}=Z();e="string"==typeof e?F.get(e):null!=e?e:{};const M=te.resource(e,{override:t,useRatePercent:x,len:s,prec:i,alwaysShowSign:b,epoch:n,capitalize:y});let P=[];function T(e="",t="",n="",s=!1,i=!1){!e||!g&&"negative"==t||!v&&"zero"==t||P.push((0,a.jsx)("div",Object.assign({className:u.className(n,s&&t)},{children:i?`(${e})`:e}),`${n}-${P.length+1}`))}if((l&&e.icon||r&&M.name)&&P.push((0,a.jsxs)("div",Object.assign({className:"name"},{children:[l&&e.icon&&(0,a.jsx)(L,{icon:e.icon,size:"1em"}),r&&M.name,(c||m)&&(null!=w?w:":")]}),"name")),c&&M.value){const e=d&&M.max?" / "+M.max:"";T(M.value+e,M.valueSign,"value",h)}if(m&&M.rate&&(j||"zero"!==M.rateSign)&&T(M.rate,M.rateSign,"rate",p,c),f&&M.extras&&Object.keys(M.extras).length>0)for(let e in M.extras)e&&M.extras[e]&&(P.length>0&&P.push((0,a.jsx)("div",{className:"break"},`break-${e}`)),P.push((0,a.jsxs)("div",Object.assign({className:"extra-name"},{children:[e,null!=w?w:":"]}),`extra-name-${e}`)),T(M.extras[e],void 0,"extra-value"));const $=["resource",e.display,N&&S];o||null===(A=e.unlocked)||void 0===A||A||($.push("locked"),P=[(0,a.jsx)("div",Object.assign({className:"placeholder"},{children:k}),"lock")]);const B=(0,a.jsxs)("div",Object.assign({className:u.className($),style:N?C:void 0},{children:[O&&(0,a.jsx)("div",Object.assign({className:"prefix"},{children:O})),P,_&&(0,a.jsx)("div",Object.assign({className:"suffix"},{children:_}))]}));return N?(0,a.jsx)("div",Object.assign({className:u.className(S),style:C},{children:B})):B}function ge(){var e,t,n,s,o,l,r,c,u,d,m,f,h,p,g;const{popupManager:v}=Z(),b=v.getCurrentPopup();if((0,i.useEffect)((()=>{var e;const t=null==b?void 0:b.onMount,n=null==b?void 0:b.onUnmount;let a;try{a=document.querySelectorAll(null!==(e=null==b?void 0:b.highlightSelector)&&void 0!==e?e:"")}catch(e){}return(null==b?void 0:b.enabled)&&(null==a||a.forEach((e=>e.classList.add("highlight"))),t&&t()),()=>{null==a||a.forEach((e=>e.classList.remove("highlight"))),n&&n()}}),[null==b?void 0:b.name,null==b?void 0:b.step,null==b?void 0:b.enabled]),!b)return null;function j(e){return null!=(null==e?void 0:e.name)&&null!=(null==e?void 0:e.step)&&""!=(null==e?void 0:e.name)&&!isNaN(null==e?void 0:e.step)&&isFinite(null==e?void 0:e.step)&&!((null==e?void 0:e.name)==(null==b?void 0:b.name)&&(null==e?void 0:e.step)==(null==b?void 0:b.step))}function x(e,t){null==t||t.preventDefault();const n=v.getPopupState(b);v.delPopupState(b),e&&j(e)&&v.setPopupState(e,{priority:n.priority})}function y(e,t="%"){return`max(5${t}, 1em, min(90${t}, calc(100${t} - 2em), calc(${e})))`}const N={left:y(b.bounds.left,"vw"),bottom:y(`100vh - ${b.bounds.top} - ${b.bounds.height}`,"vh"),width:y(b.bounds.width,"vw"),minHeight:y(b.bounds.height,"vh"),maxHeight:y("100vh","vh")},O=(0,a.jsx)("div",Object.assign({id:"popup-root",style:N},{children:(0,a.jsxs)("div",Object.assign({className:"panel shadow",style:{minHeight:b.bounds.height}},{children:[b.title&&(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:b.title})),b.body,j(b.prev)&&!((null===(e=b.prev)||void 0===e?void 0:e.name)===(null===(t=b.next)||void 0===t?void 0:t.name)&&(null===(n=b.prev)||void 0===n?void 0:n.step)===(null===(s=b.next)||void 0===s?void 0:s.step))&&(0,a.jsx)("div",Object.assign({className:"prev"},{children:(0,a.jsx)("a",Object.assign({href:"",onClick:he.Z.apply(x,b.prev)},{children:null!==(l=null===(o=b.prev)||void 0===o?void 0:o.title)&&void 0!==l?l:"< back"}))})),(0,a.jsx)("div",Object.assign({className:"next"},{children:(0,a.jsx)("a",Object.assign({href:"",onClick:he.Z.apply(x,b.next)},{children:null!==(c=null===(r=b.next)||void 0===r?void 0:r.title)&&void 0!==c?c:(null===(u=b.next)||void 0===u?void 0:u.step)?"next >":"done"}))})),j(b.skip)&&!((null===(d=b.skip)||void 0===d?void 0:d.name)===(null===(m=b.next)||void 0===m?void 0:m.name)&&(null===(f=b.skip)||void 0===f?void 0:f.step)===(null===(h=b.next)||void 0===h?void 0:h.step))&&(0,a.jsx)("div",Object.assign({className:"skip"},{children:(0,a.jsx)("a",Object.assign({href:"",onClick:he.Z.apply(x,b.skip)},{children:null!==(g=null===(p=b.skip)||void 0===p?void 0:p.title)&&void 0!==g?g:"skip >>>"}))}))]}))}));return b.greyOut?(0,a.jsx)("div",Object.assign({className:"greyout"},{children:O})):O}function ve(){var e,t,n,s;const{context:o,settings:l,save:r}=Z(),[c,u]=(0,i.useState)(),[d,m]=(0,i.useState)(0),f=(0,i.useCallback)((e=>function(e,t){if(t.target&&xe.includes(t.target.tagName.toUpperCase()))return;const n=ye[t.key.toLowerCase()];n&&n.length>0&&n.forEach((n=>{n(e,t)&&(t.preventDefault(),t.stopPropagation())}))}(o,e)),[o]);(0,i.useEffect)((()=>(document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f))),[f]);const h=(0,i.useCallback)((()=>{o.resourceManager.update(void 0,"tick").includes(!0),l.lastUpdate-l.lastSaved>=1e3*l.saveFrequencySecs&&l.lastUpdate-l.lastLoaded>=1e3*l.saveFrequencySecs&&(r(),ae.info("Game saved!")),m((e=>l.lastUpdate-e>=1e3/l.framesPerSecond?l.lastUpdate:e))}),[o,l,r,m]);(0,i.useEffect)((function(){return c&&clearInterval(c),u(setInterval(h,1e3/l.ticksPerSecond)),R(l.theme),()=>{c&&(clearInterval(c),u(void 0))}}),[l,l.ticksPerSecond,l.theme]);const p=be.left.map((e=>g(e,{},o))),v=be.right.map((e=>g(e,{},o))),b=null!==(s=null!==(n=null!==(t=null!==(e=p.filter((e=>"/"===e.path))[0])&&void 0!==e?e:v.filter((e=>"/"===e.path))[0])&&void 0!==t?t:p[0])&&void 0!==n?n:v[0])&&void 0!==s?s:{body:""};return(0,a.jsxs)(E.UT,{children:[(0,a.jsxs)("nav",Object.assign({id:"navbar"},{children:[(0,a.jsx)("div",Object.assign({className:"left"},{children:p.map((e=>(0,a.jsx)(je,{tab:e},e.path)))})),(0,a.jsx)("div",{className:"spacer"}),(0,a.jsx)("div",Object.assign({className:"right"},{children:v.map((e=>(0,a.jsx)(je,{tab:e},e.path)))}))]})),(0,a.jsx)(ge,{}),(0,a.jsxs)(U.Z5,{children:["/"!==b.path&&(0,a.jsx)(U.AW,{path:"/",element:b.body}),[...p,...v].map((e=>(0,a.jsx)(U.AW,{path:e.path,element:e.body},e.path)))]})]})}A.push((function({settings:e,resourceManager:t,popupManager:n}){n.register({name:"OfflineSummary",title:"While you were offline...",bounds:{height:"32em"},body(){var s;const i=t.execution.load,o=Object.keys(null!==(s=null==i?void 0:i.lastChanges)&&void 0!==s?s:{}).filter((e=>isFinite(t.resources[e].priority))).sort(((e,n)=>t.resources[e].priority-t.resources[n].priority));let l=0;return i?0===o.length?(n.delPopupState("OfflineSummary"),(0,a.jsx)("div",Object.assign({className:"full"},{children:"Nothing happened!"}))):(o.length>e.offlineSummaryMaxUpdates&&(l=o.splice(e.offlineSummaryMaxUpdates-1).length),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",Object.assign({className:"full"},{children:["You were offline for"," ",te.time(1e3*i.lastDelta,{now:"",ago:"",never:""}),". During this time, you gained:"]})),o.map((e=>(0,a.jsx)("div",Object.assign({className:"full"},{children:(0,a.jsx)(pe,{resource:e,showColors:!0,showPlusSign:!0,override:{count:i.lastChanges[e]}})}),e))),l>0&&(0,a.jsxs)("div",Object.assign({className:"full center"},{children:["... and ",l," more ..."]}))]})):null}}),t.onUpdateComplete=function(t,a,s){"load"===s&&a>=e.offlineSummaryMinSecs&&Object.keys(t).length>0&&n.setPopupState("OfflineSummary",{step:0})}}));const be={left:[],right:[{path:"/settings",placement:"right",order:0,enabled:!0,icon:"ti:settings",body:(0,a.jsx)((function(){const e=Z(),[t,n]=(0,i.useState)(""),[s,o]=(0,i.useState)(!1),r=(0,U.s0)(),c=(0,U.TH)(),u=e.settings,d=c.search.toLowerCase().includes("debug");function m(e,t){let n=parseInt(t);if(n>=1&&n<=1e3)switch(e){case"tick":u.ticksPerSecond=n;break;case"render":u.framesPerSecond=n;break;case"save":u.saveFrequencySecs=600/n}}function f(e){const t=e.target.getAttribute("theme");t&&(u.theme=t,R(t))}function h(e){u.numberFormat=e.target.name}return(0,a.jsxs)("div",Object.assign({id:"options"},{children:[(0,a.jsxs)("div",Object.assign({className:"panel options",id:"options-theme"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:"Theme Options"})),(0,a.jsxs)("div",Object.assign({className:"full"},{children:["Current theme is:  ",W[u.theme]]})),Object.keys(W).map((e=>(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("div",Object.assign({className:"themed",id:`theme-${e}`,theme:e},{children:(0,a.jsx)("button",Object.assign({id:`button-theme-${e}`,theme:e,onClick:f},{children:W[e]}))}))}),`theme-${e}`))),(0,a.jsx)("hr",{className:"dashed"}),(0,a.jsxs)("div",Object.assign({className:"full"},{children:["Current number format is:  ",G.all[u.numberFormat].name]})),Object.values(G.all).map((e=>(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("div",Object.assign({className:"themed"},{children:(0,a.jsxs)("button",Object.assign({id:`button-notation-${e.name}`,name:e.name,onClick:h},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:e.name})),["123456.789","123.456e789.012"].map(((t,n)=>(0,a.jsx)("div",Object.assign({className:"full center"},{children:G(t,e,3)}),`sample-${e.name}-${n}`)))]}))}))}),`notation-${e.name}`)))]})),(0,a.jsxs)("div",Object.assign({className:"panel options",id:"options-data"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:"Game Data"})),(0,a.jsxs)("div",Object.assign({className:"full"},{children:["You started this game"," ",te.time(u.lastUpdate,{epoch:u.lastReset})]})),(0,a.jsxs)("div",Object.assign({className:"full"},{children:["This session started"," ",te.time(u.lastUpdate,{epoch:u.lastLoaded})]})),(0,a.jsxs)("div",Object.assign({className:"full"},{children:["Game was last saved"," ",te.time(u.lastUpdate,{epoch:u.lastSaved})]})),(0,a.jsx)("hr",{className:"dashed"}),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"button",value:"Load",onClick:function(){e.load()?(r({pathname:"/",search:c.search}),ae.success("Game loaded!")):ae.fail("Load failed!")},id:"button-load"})})),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"button",value:"Save",onClick:function(){e.save(d),ae.success("Game saved!")},id:"button-save"})})),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"button",value:"Load from File",onClick:function(){!function(e,t){const n=document.createElement("input");n.type="file",n.addEventListener("change",(function(t){const n=t.target.files;if(!n||0===n.length||!n[0])return;const a=new FileReader;a.onload=function(t){var n;const a=null===(n=t.target)||void 0===n?void 0:n.result;a&&"string"==typeof a&&e&&e(a)},a.readAsText(n[0])}),!1),n.click()}((t=>{e.loadAs(t)?(r({pathname:"/",search:c.search}),ae.success("Game imported!")):ae.fail("Import failed!")}))},id:"button-file-load"})})),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"button",value:"Save to File",onClick:function(){const t=l.map(globalThis.gamePackage,(e=>null==e?void 0:e.replace(/\W/g,"_"))),n=(new Date).toISOString().replace(/\D/g," ").trim().replace(/\D/g,"-");!function(e,t){t instanceof Blob||(t=new Blob([t],{type:"text/plain"}));const n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download=e,a.click(),URL.revokeObjectURL(n)}(`${t.name}-v${t.version}-${n}`,e.saveAs(d)),ae.success("Game exported!")},id:"button-file-save"})})),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"button",value:"Import",onClick:function(){e.loadAs(t)?(r({pathname:"/",search:c.search}),ae.success("Game imported!")):ae.fail("Import failed!")},id:"button-import"})})),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"button",value:"Export",onClick:function(){n(e.saveAs(d)),ae.success("Game exported!")},id:"button-export"})})),(0,a.jsx)("div",Object.assign({className:"full center",id:"export-text"},{children:(0,a.jsx)("textarea",{value:t,onChange:e=>n(e.target.value)})}))]})),(0,a.jsxs)("div",Object.assign({className:"panel options",id:"options-advanced"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:"Advanced Settings"})),(0,a.jsx)("div",Object.assign({className:"full"},{children:"If you are having performance issues, increase the time between updates. Faster updating frequncies lead to better game experience but might use a lot of CPU."})),(0,a.jsx)("div",Object.assign({className:"half"},{children:"Updating frequency:"})),(0,a.jsxs)("div",Object.assign({className:"half center"},{children:[Math.floor(1e3/u.ticksPerSecond),"ms"]})),(0,a.jsx)("div",{className:"half"}),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"range",min:1,max:1e3,value:u.ticksPerSecond,onInput:e=>m("tick",e.target.value),id:"input-freq-tick"})})),(0,a.jsx)("div",{className:"full"}),(0,a.jsx)("div",Object.assign({className:"half"},{children:"Rendering frequency:"})),(0,a.jsxs)("div",Object.assign({className:"half center"},{children:[Math.floor(1e3/u.framesPerSecond),"ms"]})),(0,a.jsx)("div",{className:"half"}),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"range",min:1,max:60,value:u.framesPerSecond,onInput:e=>m("render",e.target.value),id:"input-freq-render"})})),(0,a.jsx)("div",Object.assign({className:"full"},{children:"Change how often the game is saved in the background. More frequent saving leads to faster backups, but increases CPU and I/O usage"})),(0,a.jsx)("div",Object.assign({className:"half"},{children:"Saving frequency:"})),(0,a.jsx)("div",Object.assign({className:"half center"},{children:te.time(1e3*u.saveFrequencySecs,{ago:""})})),(0,a.jsx)("div",{className:"half"}),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"range",min:1,max:60,value:600/u.saveFrequencySecs,onInput:e=>m("save",e.target.value),id:"input-freq-save"})}))]})),(0,a.jsxs)("div",Object.assign({className:"panel options reset",id:"options-reset"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar warning"},{children:"Game Reset"})),(0,a.jsx)("div",Object.assign({className:"full"},{children:"WARNING: this will completely reset your game and delete all saved progress and setting. Only use this if you want to restart the game from beginning, or if something in the settings is so messed up that the game is now unplayable."})),(0,a.jsx)("div",Object.assign({className:"full"},{children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:s,onChange:()=>o(!s),id:"acknowledge-box"}),"I understand what this means and still want to reset the game"]})})),(0,a.jsx)("div",Object.assign({className:"full right"},{children:(0,a.jsx)("input",{type:"button",value:"Reset everything",disabled:!s,onClick:function(){s&&(confirm("Are you sure you want to reset? This cannot be undone.")?(e.reset(),r({pathname:"/",search:c.search})):o(!1))},id:"button-wipeall"})}))]})),d&&(0,a.jsxs)("div",Object.assign({className:"panel options debug",id:"options-debug"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:"Debug Context"})),(0,a.jsx)("div",Object.assign({className:"full"},{children:JSON.stringify(e,((e,t)=>"string"==typeof e&&e.startsWith("_")||fe.includes(e)?void 0:t),2)}))]}))]}))}),{})}]};function je({tab:e}){var t;if(null!==(t=e.enabled)&&void 0!==t&&!t)return null;const n=(0,U.TH)();return(0,a.jsx)("div",Object.assign({id:`tab-${e.path.replace(/\W/g,"")||"main"}`},{children:(0,a.jsxs)(E.OL,Object.assign({className:e=>e.isActive?"active":void 0,to:{pathname:e.path,search:n.search},end:!0},{children:["string"==typeof e.icon?(0,a.jsx)(L,{icon:e.icon}):e.icon,e.heading&&(0,a.jsx)("span",{children:e.heading})]}))}))}ve.registerTab=e=>{var t;const n=null!==(t=e.placement)&&void 0!==t?t:"left",a=be[n].findIndex((t=>t.path===e.path));a>=0&&be[n].splice(a,1),be[n].push(e),be[n].sort(((e,t)=>{var a,s;return("left"===n?1:-1)*(null!==(a=e.order)&&void 0!==a?a:1/0)-(null!==(s=t.order)&&void 0!==s?s:1/0)}))};const xe=["TEXTAREA","INPUT"],ye={s:[function(e,t){return!(!t.ctrlKey&&!t.metaKey||(e.save(),ae.success("Game saved!"),0))}]};function Ne(){const e=Z(),t=(0,i.useMemo)((()=>e.saveAs(!0)),[]);return(0,a.jsxs)("div",Object.assign({id:"reset"},{children:[(0,a.jsxs)("div",Object.assign({className:"panel options"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:"Load Failure!"})),(0,a.jsx)("div",Object.assign({className:"full"},{children:"Looks like something went very wrong in loading the game. It's possible that the game version is out of date, or that the save data is corrupt."})),(0,a.jsx)("hr",{className:"dashed"}),(0,a.jsx)("div",Object.assign({className:"full"},{children:"For your records, here is the current contents of the save state. Keep this somewhere before resetting the game:"})),(0,a.jsx)("div",Object.assign({className:"full center"},{children:(0,a.jsx)("textarea",{value:t,readOnly:!0})}))]})),(0,a.jsxs)("div",Object.assign({className:"panel options reset"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar warning"},{children:"Game Reset"})),(0,a.jsx)("div",Object.assign({className:"full"},{children:"WARNING: this will completely reset your game and delete all saved progress and settings. This will hard reset the game from beginning."})),(0,a.jsx)("div",Object.assign({className:"full right"},{children:(0,a.jsx)("input",{type:"button",value:"Hard Reset Everything",onClick:function(){confirm("Are you sure you want to reset? This cannot be undone.")&&(e.reset(),window.location.reload())}})}))]}))]}))}function Oe({frames:e=12,duration:t=1,className:n,style:s,children:i}){return(0,a.jsxs)("svg",Object.assign({className:u.className(["spinner",n]),style:s,width:"128px",height:"128px",viewBox:"0 0 100 100"},{children:[Array.from(Array(e).keys()).map((n=>(0,a.jsx)("g",Object.assign({transform:`rotate(${360*n/e} 50 50)`},{children:(0,a.jsx)("rect",Object.assign({x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#32a0da"},{children:(0,a.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:`${t}s`,begin:t/e*(n-e)+"s",repeatCount:"indefinite"})}))}),`g-${n}`))),i]}))}function _e(){const e=Z(),[t,n]=(0,i.useState)(!1),[s,o]=(0,i.useState)(!1);function l(){try{e.init(),e.load(),n(!0)}catch(e){throw o(!0),e}}return(0,i.useEffect)((()=>{t||s||setTimeout(l,1e3/e.settings.ticksPerSecond)}),[t,s]),t?(0,a.jsx)(ve,{}):s?(0,a.jsx)(Ne,{}):(0,a.jsx)(Oe,{})}ve.registerShortcut=(e,t)=>{var n;e=e.toLowerCase().replace(/\W/g,""),null!==(n=ye[e])&&void 0!==n||(ye[e]=[]),ye[e].includes(t)||ye[e].push(t)};const we={rank:{E:{color:"lightgray"},D:{color:"white"},C:{color:"lightgreen"},B:{color:"lightblue"},A:{color:"orchid"},S:{color:"gold"}},cloak:{},character:{Nobody:{fileName:"char-00"},"Man A":{fileName:"char-01",overlayFileName:"char-01-fg"},"Man B":{fileName:"char-02",overlayFileName:"char-02-fg"},"Woman A":{fileName:"char-03",overlayFileName:"char-03-fg"},"Woman B":{fileName:"char-04",overlayFileName:"char-04-fg"},"Boy A":{fileName:"char-05",overlayFileName:"char-05-fg"},"Boy B":{fileName:"char-06",overlayFileName:"char-06-fg"},"Girl A":{fileName:"char-07",overlayFileName:"char-07-fg"},"Girl B":{fileName:"char-08",overlayFileName:"char-08-fg"},"Man C":{fileName:"char-09",overlayFileName:"char-09-fg"},"Man D":{fileName:"char-10",overlayFileName:"char-10-fg"},"Woman C":{fileName:"char-11",overlayFileName:"char-11-fg"},"Woman D":{fileName:"char-12",overlayFileName:"char-12-fg"},"Old Man A":{fileName:"char-13",overlayFileName:"char-13-fg"},"Old Man B":{fileName:"char-14",overlayFileName:"char-14-fg"},"Old Woman A":{fileName:"char-15",overlayFileName:"char-15-fg"},"Old Woman B":{fileName:"char-16",overlayFileName:"char-16-fg"},"Catgirl A":{fileName:"char-17",overlayFileName:"char-17-fg"},"Catgirl B":{fileName:"char-18",overlayFileName:"char-18-fg"}},body:{"Casual Light A":{fileName:"body-01"},"Casual Light B":{fileName:"body-02"},"Casual Light C":{fileName:"body-03"},"Casual Light D":{fileName:"body-04"},"Fur Medium A":{fileName:"body-05"},"Fur Medium B":{fileName:"body-06"},"Fur Medium C":{fileName:"body-07"},"Fur Medium D":{fileName:"body-08"},"Leather Medium A":{fileName:"body-09"},"Leather Medium B":{fileName:"body-10"},"Leather Medium C":{fileName:"body-11"},"Leather Medium D":{fileName:"body-12"},"Khakis Medium A":{fileName:"body-13"},"Dress Light A":{fileName:"body-14"},"Officer Light A":{fileName:"body-15"}},head:{"Witch Hat A":{fileName:"head-01",overlayFileName:"head-01-fg",className:"glow-above"},"Bronze Helmet A":{overlayFileName:"head-02",className:"glow-above"},"Crown A":{overlayFileName:"head-03",className:"glow-above"},"Top Hat A":{fileName:"head-04",overlayFileName:"head-04-fg",className:"glow-above"},"Top Hat B":{fileName:"head-05",overlayFileName:"head-05-fg",className:"glow-above"},"Top Hat C":{fileName:"head-06",overlayFileName:"head-06-fg",className:"glow-above"},"Crown B":{overlayFileName:"head-07",className:"glow-above"},"Top Hat D":{overlayFileName:"head-08",className:"glow-above"},"Top Hat E":{fileName:"head-09",overlayFileName:"head-09-fg",className:"glow-above"},"Bonnet A":{overlayFileName:"head-10",className:"glow-above"},"Top Hat F":{fileName:"head-11",overlayFileName:"head-11-fg",className:"glow-above"},"Witch Hat B":{fileName:"head-12",overlayFileName:"head-12-fg",className:"glow-above"}},feet:{"Metal Boots A":{fileName:"feet-01",className:"glow-below"},"Metal Boots B":{fileName:"feet-02",className:"glow-below"},"Fur Boots A":{fileName:"feet-03",className:"glow-below"},"Fur Boots B":{fileName:"feet-04",className:"glow-below"},"Formal Shoes A":{fileName:"feet-05",className:"glow-below"},"Leather Shoes A":{fileName:"feet-06",className:"glow-below"},"Leather Shoes B":{fileName:"feet-07",className:"glow-below"},"Casual Shoes A":{fileName:"feet-08",className:"glow-below"}},hand:{"Leather Gloves A":{fileName:"hand-01"},"Bronze Gloves A":{fileName:"hand-02"},"Fur Gloves A":{fileName:"hand-03"},"Cloth Armlets A":{fileName:"hand-04"},"Leather Armlets A":{fileName:"hand-05"},"Crystal Armlets A":{fileName:"hand-06"}},amulet:{"Fancy Emerald-Amethyst":{fileName:"amulet-01"},"Diamond Choker":{fileName:"amulet-02"},"Blue Crystal":{fileName:"amulet-03"}},extra:{Bow:{fileName:"extra-01"},Star:{fileName:"extra-02"},"Ruby Star":{fileName:"extra-03"},"Teddy Pouch":{fileName:"extra-04"}},offhand:{"Officer Blade":{fileName:"offhand-01"},"Ring of Magic":{fileName:"offhand-02"},"Sapphire Whip":{fileName:"offhand-03"},Lasso:{fileName:"offhand-04"},"Teddy Bear":{fileName:"offhand-05"},"Star of Sorcery":{fileName:"offhand-06"},"Crystal Staff":{fileName:"offhand-07"}},weapon:{Sabre:{fileName:"weapon-01"},Dagger:{fileName:"weapon-02"},Shortsword:{fileName:"weapon-03"},Machete:{fileName:"weapon-04"},Gladius:{fileName:"weapon-05"},Scimitar:{fileName:"weapon-06"},"Crystal Wand":{fileName:"weapon-07"},"Plasma Sword":{fileName:"weapon-08"},"Long Whip":{fileName:"weapon-09"},"Scaled Whip":{fileName:"weapon-10"},Zephyr:{fileName:"weapon-11"},"Crystall Blade":{fileName:"weapon-12"},"Frost Wand":{fileName:"weapon-13"},"Crystal Spear":{fileName:"weapon-14"},"Officer Sword":{fileName:"weapon-15"},"Wooden Wand":{fileName:"weapon-16"}}};function ke(e){const t=e.components.map((e=>"string"==typeof e?Ce[e]:e)).filter(Boolean),n=t.filter((e=>e.overlayFileName));t.sort(((e,t)=>{var n,a;return(null!==(n=e.zIndex)&&void 0!==n?n:Se[e.type])-(null!==(a=t.zIndex)&&void 0!==a?a:Se[t.type])})),n.sort(((e,t)=>{var n,a,s,i;return(null!==(a=null!==(n=e.overlayZIndex)&&void 0!==n?n:e.zIndex)&&void 0!==a?a:Se[e.type])-(null!==(i=null!==(s=t.overlayZIndex)&&void 0!==s?s:t.zIndex)&&void 0!==i?i:Se[t.type])}));let s=e.style;e.scale&&1!==e.scale&&(s=Object.assign(Object.assign({},s),{"--scale":e.scale}));let i="",o={"--glow-scale":1};return t.forEach((e=>{"rank"===e.type&&e.color&&(i="glow",o=Object.assign(Object.assign({},o),{"--glow-color":e.color}))})),(0,a.jsxs)("div",Object.assign({className:u.className("character",e.className),style:s},{children:[t.map(((t,n)=>{var s,l;const r=null!==(s=t.zIndex)&&void 0!==s?s:Se[t.type],c=t.color,d=t.fileName?`url(characters/${t.fileName}.png)`:void 0,m=t.effects,f=t.animation,h=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t.style),e.additionalComponentsStyle),{backgroundColor:c,backgroundImage:d,filter:m,animation:f,zIndex:r}),o),{"--glow-scale":null!==(l=t.glowScale)&&void 0!==l?l:1}),p=u.className("item",t.className,e.additionalComponentsClassName,"rank"!==t.type&&!t.color&&i);return(0,a.jsx)("div",{className:p,style:h},`component-${t.type}-${n}`)})),n.map(((e,t)=>{var n,s;const l=10+(null!==(n=e.zIndex)&&void 0!==n?n:Se[e.type]),r=`url(characters/${e.overlayFileName}.png)`,c=Object.assign(Object.assign(Object.assign(Object.assign({},e.style),{backgroundImage:r,zIndex:l}),o),{"--glow-scale":null!==(s=e.overlayGlowScale)&&void 0!==s?s:1}),d=u.className("item",e.className,e.overlayGlowScale&&i);return(0,a.jsx)("div",{className:d,style:c},`component-overlay-${e.type}-${t}`)})),e.children]}))}const Se={rank:0,cloak:1,character:2,body:3,head:4,feet:4,hand:4,amulet:5,extra:5,offhand:6,weapon:7},Ce={},Ae={body:[],head:[],rank:[],character:[],feet:[],hand:[],weapon:[],offhand:[],cloak:[],amulet:[],extra:[]};function Fe(){const[e,t]=(0,i.useState)({body:"",head:"",rank:"E",character:"Nobody",feet:"",hand:"",weapon:"",offhand:"",cloak:"",amulet:"",extra:""});return(0,a.jsxs)("div",Object.assign({className:"panel"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:"Preview"})),(0,a.jsx)("div",Object.assign({className:"left"},{children:(0,a.jsx)(ke,{components:Object.values(e)})})),(0,a.jsxs)("div",Object.assign({className:"panel right half"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:"Character Design"})),["character","rank","body","head","feet","hand","cloak","amulet","weapon","offhand","extra"].map((n=>(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)("div",Object.assign({className:"half right"},{children:(0,a.jsxs)("span",{children:[te.word(n,{capitalize:!0}),":  "]})})),(0,a.jsx)("div",Object.assign({className:"half left"},{children:(0,a.jsxs)("select",Object.assign({name:n,value:e[n],onChange:a=>t(Object.assign(Object.assign({},e),{[n]:a.target.value}))},{children:["rank"!==n&&"character"!==n&&(0,a.jsx)("option",Object.assign({value:""},{children:"--"})),ke.componentsByType[n].map((e=>(0,a.jsx)("option",Object.assign({value:e.name},{children:e.name}),e.name)))]}))}))]},`frag-${n}`)))]}))]}))}ke.componentByName=Ce,ke.componentsByType=Ae,ke.registerComponent=e=>{var t,n;const a=null!==(t=e.type)&&void 0!==t?t:"extra",s=null!==(n=e.name)&&void 0!==n?n:a+"-"+(Object.keys(Ce).length+1);let i={type:a,name:s};return i=Object.assign(Object.assign(Object.assign({},i),Ce[s]),e),Ce[i.name]=i,Ae[i.type]=Ae[i.type].filter((e=>e.name!==i.name)),Ae[i.type].push(i),Ae[i.type].sort(((e,t)=>e.name.localeCompare(t.name))),i},A.push((()=>{for(let[e,t]of Object.entries(we))for(let[n,a]of Object.entries(t))ke.registerComponent(Object.assign(Object.assign({},a),{type:e,name:n}))}));const Me=[{name:"Tutorial",step:0,title:"Starting Tutorial",body:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",Object.assign({className:"full"},{children:"Hi! Welcome to Lumindor."})),(0,a.jsx)("div",Object.assign({className:"full"},{children:"I don't really have anything to tell you here yet."})),(0,a.jsx)("div",Object.assign({className:"full"},{children:"These dialogs are tests of the tutorial system."}))]}),greyOut:!0}];window.addEventListener("load",(()=>(0,s.s)(q("app")).render((0,a.jsx)(B,{children:(0,a.jsx)(_e,{})}))),!1),A.push((function(e){!function(e){e.popupManager.register(...Me),e.popupManager.setPopupState("Tutorial",{})}(e),ve.registerTab({path:"/char_design",placement:"left",order:3,heading:"Character Designer",body:()=>(0,a.jsx)(Fe,{})})}))},877:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function Fn(){return Fn}__webpack_require__.d(__webpack_exports__,{Z:()=>Fn}),Fn.apply=function(e,...t){return(...n)=>e(...t,...n)},Fn.compose=function(...e){return t=>e.reduceRight(((e,t)=>t(e)),t)},Fn.chain=function(...e){return t=>e.reduce(((e,t)=>t(e)),t)},Fn.map=function(...e){return(...t)=>e.map((e=>e(...t)))},Fn.mapReduce=function(e,...t){const n=Fn.map(...t);return(...t)=>e(n(...t))},Fn.compile=function(body,thisBind,args=[],globals={},reserved=[],forceArgs=!1,forceGlobals=!1){let fnBody=body.replace(/\b\w+\b/gim,(function(e){return!e||"this"===e||reserved.includes(e)?e:args.includes(e)?(forceArgs=!0,"___param_"+e):globals[e]?(forceGlobals=!0,"___globals."+e):e})),fn;forceArgs&&(fnBody=`(function (${args.map((e=>"___param_"+e)).join(",")}) { return ${fnBody}; })`),forceGlobals&&(fnBody=`(function (___globals) { return (${fnBody}); })`);try{fn=eval(fnBody)}catch(e){fn=null}return thisBind&&"function"==typeof fn&&(fn=fn.bind(thisBind)),forceGlobals&&"function"==typeof fn&&(fn=fn(globals),thisBind&&"function"==typeof fn&&(fn=fn.bind(thisBind))),"function"!=typeof fn?forceArgs?()=>fn:Fn.compile(body,thisBind,args,globals,reserved,!0,forceGlobals):fn}}},__webpack_module_cache__={},deferred,leafPrototypes,getProto;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(e,t,n,a)=>{if(!t){var s=1/0;for(r=0;r<deferred.length;r++){for(var[t,n,a]=deferred[r],i=!0,o=0;o<t.length;o++)(!1&a||s>=a)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[o])))?t.splice(o--,1):(i=!1,a<s&&(s=a));if(i){deferred.splice(r--,1);var l=n();void 0!==l&&(e=l)}}return e}a=a||0;for(var r=deferred.length;r>0&&deferred[r-1][2]>a;r--)deferred[r]=deferred[r-1];deferred[r]=[t,n,a]},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var a={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var s=2&t&&e;"object"==typeof s&&!~leafPrototypes.indexOf(s);s=getProto(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,__webpack_require__.d(n,a),n},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={873:0};__webpack_require__.O.j=t=>0===e[t];var t=(t,n)=>{var a,s,[i,o,l]=n,r=0;if(i.some((t=>0!==e[t]))){for(a in o)__webpack_require__.o(o,a)&&(__webpack_require__.m[a]=o[a]);if(l)var c=l(__webpack_require__)}for(t&&t(n);r<i.length;r++)s=i[r],__webpack_require__.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return __webpack_require__.O(c)},n=self.webpackChunklumindor=self.webpackChunklumindor||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var __webpack_exports__=__webpack_require__.O(void 0,[216],(()=>__webpack_require__(782)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();