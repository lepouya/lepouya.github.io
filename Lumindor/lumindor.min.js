(()=>{"use strict";var __webpack_modules__={782:(e,n,t)=>{var a=t(893),i=t(745),o=t(294);function l(){const e=window.localStorage,n="__storage_test__";if(!e)return!1;try{return e.setItem(n,n),e.removeItem(n),!0}catch(n){return n instanceof DOMException&&0!==e.length&&(22===n.code||1014===n.code||"QuotaExceededError"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name)}}function s(...e){return Object.assign({},e)}s.assign=function(e,n,t){const a=e||{};return null!=n&&a[n]&&null!=t&&"object"==typeof t?a[n]=Object.assign(Object.assign({},a[n]),t):null!=n&&null!=t&&(a[n]=t),a},s.copy=function(e,n){e||(e={}),n||(n={});for(let t in e)s.assign(n,t,e[t]);return n},s.map=function(e,n,t){const a={};for(const i in e){const o=t?t(i):i,l=e[i],s=n?n(l,i):l;a[o]=s}return a},s.filter=function(e,n,t){const a={};for(const i in e){const o=!t||t(i),l=!n||n(e[i],i);o&&l&&(a[i]=e[i])}return a};var r=t(243);function c(e=0,n=0,t=1){return isNaN(e)||e<n?n:e>t?t:e}function u(...e){return[...e]}u.dedupe=function(e){return e.filter(((e,n,t)=>t.indexOf(e)===n))},u.shuffle=function(e){for(let n=e.length-1;n>0;n--){const t=Math.floor(Math.random()*(n+1));[e[n],e[t]]=[e[t],e[n]]}return e},u.className=function(e,...n){return[...Array.isArray(e)?e:[e],...n].map((e=>e?String(e):void 0)).filter((e=>!!e)).join(" ")||void 0},u.pickWeightedSamples=function(e,n=1,t=0,a,i){const o=[];if(n=Math.floor(c(n,0,e.length)),t=c(t,0,1),0===n)return o;let l=[...e];a&&l.sort(!0===a?void 0:a),i&&(l=l.filter(i));for(let e=0;e<n&&0!==l.length;e++){let e=0;const n=t,a=Math.random();e=.5===n?a:(Math.sqrt(n*n+a-2*n*a)-n)/(1-2*n),e=Math.floor(e*l.length),l.splice(e,1).forEach((e=>o.push(e)))}return o};let d=!1;function m(e){if(d)return e;const n=e.startsWith(".."),t=(n?e:Math.random().toString(36)).substring(2,10);return(n?"":".."+t)+(n?e.slice(10):e).split("").map((e=>e.charCodeAt(0))).map(((e,n)=>String.fromCharCode(e^t.charCodeAt(n%8)))).join("")}function f(e){const n=[],t=e._save_properties;return null!=t&&"object"==typeof t&&Array.isArray(t)&&n.push(...t),n}function h(e){if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map((e=>h(e)));if(e instanceof r.Z)return e.toJSON();if(0===Object.keys(e).length)return null;const n={},t=f(e);let a;for(a in e)if(!a.startsWith("_")&&null!=e[a]&&(0===t.length||t.includes(a))){const t=e[a];if("object"==typeof t){const e=h(t);null!=e&&(n[a.toString()]=e)}else"function"!=typeof t&&(n[a.toString()]=t)}return n}function p(e,n){if(null!=e){const t=f(e);t.push(...n),Object.assign(e,{_save_properties:u.dedupe(t)})}return e}function g(e,n,...t){const a=Object.assign({},n);if(e){let n;for(n in e){let i=e[n];s.assign(a,n,"function"==typeof i?i(a,...t):i)}}return a}function v({kind:e="",tickSource:n="",minValue:t=0,maxValue:a=1/0,direction:i=1,streakKind:o="current",maxStreakKind:l="max",minStreakKind:s="min",resetStreakSource:u=""}={}){return function(d,m){var f,h;if(n&&m!==n)u&&m!==u||o&&this.extra&&(this.extra[o]=i>0?t:i<0?a:0);else{let n=null!==(h=e&&this.extra?this.extra[e]:null===(f=this.count)||void 0===f?void 0:f.toNumber())&&void 0!==h?h:0;(n>t||i>0)&&(n<a||i<0)&&(n=c(n+i*d,t,a),e&&this.extra?this.extra[e]=n:this.count=r.Z.fromNumber(n),o&&this.extra&&null!=this.extra[o]&&(this.extra[o]=c(this.extra[o]+i*d,t,a),l&&null!=this.extra[l]&&this.extra[l]<this.extra[o]&&(this.extra[l]=this.extra[o]),s&&null!=this.extra[s]&&this.extra[s]>this.extra[o]&&(this.extra[s]=this.extra[o])))}return null}}const b=[{name:"totalTime",icon:"ti:clock",display:"time",tick:v()},{name:"activeTime",icon:"ti:alarm",display:"time",extra:{current:0,max:0},tick:v({tickSource:"tick"})},{name:"offlineTime",icon:"ti:user-off",display:"time",extra:{current:0,max:0},tick:v({tickSource:"load"})}];function N(e,n){var t,a;return null!==(a=e.resources["string"==typeof n?n:null!==(t=n.name)&&void 0!==t?t:""])&&void 0!==a?a:x(e,n)}function j(e,n){return n.map((({resource:n,count:t})=>({resource:N(e,n),count:t}))).filter((({resource:e,count:n})=>e&&r.Z.neq(n,0)))}function x(e,n){var t,a;const i="string"==typeof n?n:null!==(t=n.name)&&void 0!==t?t:"",o=null!==(a=e.resources[i])&&void 0!==a?a:function(e,n){const t={manager:e,name:n,priority:1/0,count:r.Z.dZero,extra:{},value(){var e,n;return t.count.clamp(null!==(e=t.minCount)&&void 0!==e?e:0,null!==(n=t.maxCount)&&void 0!==n?n:1/0)},cost:()=>[],buy:(e=1,n="partial",a=1,i=1,o)=>w(t,e,n,a,i,o),sell:(e=1,n="full",a=1,i=1,o)=>t.buy("object"!=typeof e||e instanceof r.Z?r.Z.neg(e):s.map(e,(e=>-(null!=e?e:0))),n,a,i,o),add:(e,n)=>t.buy(e,"free",n),canBuy:(e,n,a)=>t.buy(e,"dry-partial",1,n,a),execution:{},rate:{count:r.Z.dZero,ticks:0,pastCounts:[],pastTicks:[]}};return p(t,["name","unlocked","disabled","count","extra"])}(e,i);if("string"!=typeof n){let e;for(e in n)"extra"===e?s.assign(o,e,n[e]):"count"===e||"maxCount"===e||"minCount"===e?null!=n[e]&&(o[e]=r.Z.fromValue(n[e])):"manager"!==e&&"name"!==e&&null!=n[e]&&(o[e]=n[e])}return o.name&&(e.resources[o.name]=o),o}function y(e,n=!0){return k(e).every((({resource:e,count:t})=>{var a,i;return(null===(a=e.unlocked)||void 0===a||a)&&e.count.minus(t).gte(n&&null!==(i=e.minCount)&&void 0!==i?i:0)}))}function w(e,n,t,a,i,o){var l,s,u,d;if("object"!=typeof n||n instanceof r.Z)return _(e.manager,[{resource:e,count:n}],t,a,i,o);const m=O(e,o).toNumber();if(!isFinite(m)||Math.abs(n.minAmount)>Math.abs(n.maxAmount)||Math.abs(n.maxAmount)>1e3||0===n.increments)return{count:0,style:t,gain:[],cost:[]};const f=null!==(s=null===(l=e.minCount)||void 0===l?void 0:l.toNumber())&&void 0!==s?s:0,h=null!==(d=null===(u=e.maxCount)||void 0===u?void 0:u.toNumber())&&void 0!==d?d:1/0,p=n.increments;function g(e){return c(Math.floor((m+e)/p)*p,f,h)-m}let v=_(e.manager,[{resource:e,count:g(n.maxAmount)}],"dry-partial",a,i,o),b=v.count.toNumber();if(b%p!=0&&(v=_(e.manager,[{resource:e,count:g(b)}],"dry-partial",a,i,o),b=v.count.toNumber()),0===b||n.minAmount>=0&&b<n.minAmount||n.minAmount<0&&b>n.minAmount){if(!t.includes("dry"))return{count:0,style:t,gain:[],cost:[]};const l=g(c(p,Math.min(n.minAmount,n.maxAmount),Math.max(n.minAmount,n.maxAmount)));v=_(e.manager,[{resource:e,count:0===l?Math.sign(p):l}],"dry-full",a,i,o),b=v.count.toNumber()}return t.includes("dry")?v:_(e.manager,[{resource:e,count:b}],t,a,i,o)}function _(e,n,t,a,i,o){a=e.gainFactor?e.gainFactor(a):a,i=e.costFactor?e.costFactor(i):i;const l=j(e,n).map((({resource:n,count:l})=>{var s;const c=function(e,n,t,a,i,o,l){var s,c,u,d;if(!n||r.Z.eq(t,0))return{count:0,style:a,gain:[],cost:[]};let m=O(n,l),f=m.plus(t).clamp(null!==(s=n.minCount)&&void 0!==s?s:0,null!==(c=n.maxCount)&&void 0!==c?c:1/0);if("free"===a){const e=f.minus(m);return{count:e,style:a,gain:[{resource:n,count:e.mul(i)}],cost:[]}}m.gt(f)&&([m,f]=[f,m],[i,o]=[r.Z.neg(i),r.Z.neg(o).mul(null!==(u=e.settings.sellRatio)&&void 0!==u?u:1)]);let h=[];null!==(d=n.unlocked)&&void 0!==d&&!d&&n.unlockCost&&(h=j(e,n.unlockCost()));const p=m.floor().toNumber(),g=f.floor().toNumber();if(!isFinite(p)||!isFinite(g)||Math.abs(g-p)>1e3)return{count:0,style:a,gain:[],cost:[]};let v=0;for(let t=p;t<g;t++){const i=j(e,n.cost(t+1));i.forEach((e=>e.count=r.Z.mul(e.count,o)));const l=k([...h,...i]);if(a.includes("partial")&&!y(l))break;v++,h=l}return!a.includes("dry")&&!y(h)||"full"===a&&v!==g-p?{count:0,style:a,gain:[],cost:[]}:{count:v*r.Z.sign(i),style:a,gain:[{resource:n,count:r.Z.mul(i,v)}],cost:h}}(e,n,l,t,n.gainFactor?n.gainFactor(a):a,n.costFactor?n.costFactor(i):i,o);if(t.includes("dry")||r.Z.eq(c.count,0))return c;{if(null!==(s=n.unlocked)&&void 0!==s&&!s){if(!n.unlockCost)return{count:0,style:t,gain:[],cost:[]};n.unlocked=!0}const e=F(n,c.gain),a=c.cost.map((({resource:e,count:n})=>F(e,[{resource:e,count:r.Z.neg(n)}]))).flat(),i=Object.assign(Object.assign({},c),{gain:e,cost:a});return n.onPurchase&&n.onPurchase(i),i}}));return{count:l.reduce(((e,n)=>e.plus(n.count)),r.Z.dZero),style:t,gain:k(l.map((e=>e.gain)).flat()),cost:k(l.map((e=>e.cost)).flat())}}function O(e,n){return null!=n?null!=e&&"string"==typeof n&&null!=e.extra[n]?r.Z.fromValue_noAlloc(e.extra[n]):r.Z.fromValue_noAlloc(n):null!=e?e.count:r.Z.dNaN}function k(e){const n={};return e.forEach((({resource:e,count:t})=>{var a,i;null!==(a=n[i=e.name])&&void 0!==a||(n[i]={resource:e,count:0}),n[e.name].count=r.Z.add(n[e.name].count,t)})),Object.values(n).filter((({count:e})=>r.Z.neq(e,0)))}function F(e,n){return k(n.filter((({resource:n})=>e.name===n.name)).map((({count:n})=>{var t,a;const i=e.count;return e.count=e.count.plus(n).clamp(null!==(t=e.minCount)&&void 0!==t?t:0,null!==(a=e.maxCount)&&void 0!==a?a:1/0),[{resource:e,count:e.count.minus(i)}]})).flat())}const S={ticksPerSecond:50,framesPerSecond:10,saveFrequencySecs:60,lastReset:Date.now(),lastUpdate:Date.now(),lastSaved:0,lastLoaded:Date.now(),rateUpdateSecs:.1,rateHistoryWindow:10,minResourceUpdateSecs:.001,maxResourceUpdateSecs:86400,maxResourceTickSecs:1,offlineSummaryMinSecs:60,offlineSummaryMaxUpdates:12,sellRatio:.8,timeDilation:1,buyAmount:"+1",numberFormat:"Standard",theme:"light"},C=[];const A=globalThis.gamePackage.name;function M(e,n){const t=Object.assign({},e),a=!!n&&function(e,n){let t=null;if(!t)try{t=JSON.parse(m(window.atob(n)))}catch(e){t=null}if(!t)try{t=JSON.parse(window.atob(n))}catch(e){t=null}if(!t)try{t=JSON.parse(n)}catch(e){t=null}return!!t&&function(e,n){if(null==e||null==n||"object"!=typeof n||"object"!=typeof e)return!1;let t;for(t in e)typeof n[t]==typeof e[t]&&(e[t]=n[t]);return!0}(e,t)}(t,n);return e.init(),C.forEach((n=>n(e))),a&&(s.copy(t.settings,e.settings),Object.values(t.resourceManager.resources||{}).forEach((n=>e.resourceManager.upsert(n)))),e.settings.lastLoaded=Date.now(),e.resourceManager.update(void 0,"load"),a}function P(e,n){return e.settings.lastSaved=Date.now(),function(e,n=!1){return n?JSON.stringify(h(e),null,2):window.btoa(m(JSON.stringify(h(e))))}(e,n)}const T=function e(n){var t,a;const i=n||{};return null!==(t=i.init)&&void 0!==t||(i.init=()=>{}),i.load=()=>{return M(i,(e=A,l()?window.localStorage.getItem(e):null));var e},i.loadAs=e=>M(i,e),i.save=e=>{return n=A,t=P(i,e),void(l()&&t&&window.localStorage.setItem(n,t));var n,t},i.saveAs=e=>P(i,e),i.reset=()=>function(n){var t;t=A,l()&&window.localStorage.removeItem(t),e(n)}(i),i.settings=Object.assign(Object.assign({},S),{lastReset:Date.now(),lastUpdate:Date.now(),lastLoaded:Date.now()}),i.resourceManager=function(e,n){const t={context:e,settings:n,resources:{},upsert:e=>x(t,e),get:e=>N(t,e),canAfford:e=>y(j(t,e)),purchase:(e,n="partial",a=1,i=1,o)=>_(t,e,n,a,i,o),purchaseAll:(e={},n=1,a,i=1,o=1,l)=>function(e,n,t,a,i,o,l){let s=Object.values(e.resources).filter((e=>{var n;return(null===(n=e.unlocked)||void 0===n||n)&&!e.disabled}));const c=Object.keys(n);c.length>0&&(s=s.filter((e=>c.includes(e.name))));const u=s.map((e=>{var s;return w(e,t,a,i,o,null!==(s=n[e.name])&&void 0!==s?s:l)}));return{count:u.reduce(((e,n)=>e.plus(n.count)),r.Z.dZero),style:a,gain:k(u.map((e=>e.gain)).flat()),cost:k(u.map((e=>e.cost)).flat())}}(t,e,n,null!=a?a:"partial",i,o,l),update:(e,n)=>function(e,n,t){var a;const{rateUpdateSecs:i=.1,rateHistoryWindow:o=10,minResourceUpdateSecs:l=.001,maxResourceUpdateSecs:s=86400,maxResourceTickSecs:r=1,timeDilation:d=1}=e.settings;let m=c((n-(null!==(a=e.settings.lastUpdate)&&void 0!==a?a:n))/1e3,0,s);if(m<l&&null!=e.settings.lastUpdate)return[];e.settings.lastUpdate=n;const f=n-1e3*m,h={};Object.values(e.resources).forEach((n=>{var t,a;!n.autoUnlock||n.disabled||null===(t=n.unlocked)||void 0===t||t||y(j(e,(null!==(a=n.unlockCost)&&void 0!==a?a:n.cost)(1)),!1)&&(n.unlocked=!0)}));const p=Object.values(e.resources).filter((e=>{var n;return(null===(n=e.unlocked)||void 0===n||n)&&!e.disabled})).sort(((e,n)=>e.priority-n.priority));p.forEach((e=>{var t,a,i,o,l;h[e.name]=e.count,null!==(t=(o=e.rate).lastCountUpdate)&&void 0!==t||(o.lastCountUpdate=f),null!==(a=(l=e.rate).lastCount)&&void 0!==a||(l.lastCount=e.count),e.execution.lastTick=c(null!==(i=e.execution.lastTick)&&void 0!==i?i:f,n-1e3*s,n),e.execution.lastAttempt=n}));const g={},v=p.filter((e=>e.tick)),b=.001/d;for(;m>0;){m-=c(m,l,r);const e=n-1e3*m;v.forEach((n=>{var a,i,o;const l=(e-n.execution.lastTick)*b;l>0&&(!n.shouldTick||n.shouldTick(l,t))&&(n.execution.lastResult=n.tick(l,t),n.execution.lastTick=e,n.rate.deltaTicks=(null!==(a=n.rate.deltaTicks)&&void 0!==a?a:0)+1,null!==(i=(o=n.rate).lastTickUpdate)&&void 0!==i||(o.lastTickUpdate=e),n.execution.lastResult&&(g[n.name]||(g[n.name]=[]),g[n.name].includes(n.execution.lastResult)||g[n.name].push(n.execution.lastResult)))}))}if(p.forEach((n=>{var t;if(n.autoAward&&!n.disabled&&n.count.lt(null!==(t=n.maxCount)&&void 0!==t?t:0)){const t=n.cost(n.count.add(1));y(j(e,t),!1)&&(n.count=n.count.add(1),n.onPurchase&&n.onPurchase({count:1,style:"free",gain:[{resource:n,count:1}],cost:[]}))}})),p.forEach((e=>{var t,a,l,s;const r=(n-(null!==(t=e.rate.lastCountUpdate)&&void 0!==t?t:0))/1e3;(null==e.rate.lastCountUpdate||null==e.rate.lastCount||r>=i)&&(e.rate.count=e.count.minus(null!==(a=e.rate.lastCount)&&void 0!==a?a:0).div(r),e.rate.lastCount=e.count,e.rate.lastCountUpdate=n,e.rate.pastCounts.unshift(e.rate.count),e.rate.pastCounts.splice(o));const c=(n-(null!==(l=e.rate.lastTickUpdate)&&void 0!==l?l:0))/1e3;(null==e.rate.lastTickUpdate||null==e.rate.deltaTicks||c>=i)&&(e.rate.ticks=(null!==(s=e.rate.deltaTicks)&&void 0!==s?s:0)/c,e.rate.deltaTicks=0,e.rate.lastTickUpdate=n,e.rate.pastTicks.unshift(e.rate.ticks),e.rate.pastTicks.splice(o))})),p.forEach((e=>{var n;if(h[e.name]=e.count.minus(null!==(n=h[e.name])&&void 0!==n?n:0),h[e.name].eq(0)&&delete h[e.name],e.onChange&&h[e.name]){const n=e.onChange(e.count,t);n&&!g[e.name].includes(n)&&g[e.name].push(n)}})),e.execution[t]={lastTick:n,lastDelta:(n-f)/1e3,lastResult:u.dedupe(Object.values(g).flat()),lastChanges:h},e.onUpdateComplete){const a=e.onUpdateComplete(h,(n-f)/1e3,t);a&&(g.__ResourceManager_onUpdateComplete=[a])}return e.execution[t].lastResult}(t,null!=e?e:Date.now(),null!=n?n:"unknown"),execution:{}};return b.forEach((e=>x(t,e))),p(t,["resources"])}(i,i.settings),null!==(a=i.popupManager)&&void 0!==a||(i.popupManager=function(e,n){const t=n.get("popup:states"),a={context:e,currentStates:t,popups:{},register(...e){e.forEach((e=>{var n,t,i,o;a.popups[null!==(n=e.name)&&void 0!==n?n:""]||(a.popups[null!==(t=e.name)&&void 0!==t?t:""]={}),s.assign(a.popups[null!==(i=e.name)&&void 0!==i?i:""],null!==(o=e.step)&&void 0!==o?o:0,e)}))},resolve(e="",n=0){var t;const i=(null!==(t=a.popups[e])&&void 0!==t?t:{})[n];if(!i)return;const o=Object.keys(a.popups[e]).map((e=>parseInt(e))).sort(((e,n)=>e-n)),l=o.indexOf(n),s=o[l-1],r=o[l+1],c=100*(1+Math.floor(n/100));return g(i,{name:e,step:n,enabled:!0,title:`${e} #${n}`,body:"...",prev:{name:e,step:null!=s?s:n,title:"< back"},next:{name:e,step:null!=r?r:c,title:r?"next >":"done"},skip:{name:e,step:c,title:"skip >>>"},highlightSelector:"",greyOut:!1,bounds:{left:"50% - 14rem",top:"6rem",width:"28rem",height:"28rem"}},a)},getPopupState(e){var n;const a="string"==typeof e?e:null!==(n=null==e?void 0:e.name)&&void 0!==n?n:"",i=t.extra[a];return Object.assign({name:a,step:"object"==typeof e&&(null==e?void 0:e.step)||0,priority:1/0},i)},setPopupState(e,n){const i=a.getPopupState(e);t.extra[i.name]=Object.assign(Object.assign({},i),n)},delPopupState(e){const n=a.getPopupState(e).name;delete t.extra[n]},getCurrentPopup:()=>Object.keys(a.currentStates.extra).map(a.getPopupState).sort(((e,n)=>e.priority-n.priority)).reduce((function(e,n){if(e)return e;const t=a.resolve(n.name,n.step);return t&&t.enabled?t:void 0}),void 0)};return a}(i,i.resourceManager)),i.init(),C.forEach((e=>e(i))),p(i,["settings","resourceManager"])}(),$=(0,o.createContext)(T);function I(e){return(0,a.jsx)($.Provider,Object.assign({value:T},{children:e.children}))}function B(){return function(e){return Object.assign(Object.assign(Object.assign({},e.resourceManager),e),{context:e})}((0,o.useContext)($))}var Z=t(655),E=t(250);function U(e){var n,t;const a="string"==typeof e?{id:e}:e;let i,o=document.getElementById(null!==(n=a.id)&&void 0!==n?n:"");for(i in o||(o=document.createElement(null!==(t=a.tagName)&&void 0!==t?t:"div"),document.body.appendChild(o)),a)s.assign(o,i,a[i]);return o}function q(e){e?document.documentElement.setAttribute("theme",e):document.documentElement.removeAttribute("theme")}function R(e){if(e.icon.includes(";")){const[n,...t]=e.icon.split(";");e=Object.assign(Object.assign({},e),{icon:n,children:(0,a.jsxs)(a.Fragment,{children:[t.map(((e,n)=>(0,a.jsx)(L,{icon:e},`badge-${n}`))),e.children]})})}return(0,a.jsxs)("div",Object.assign({className:"icon-wrapper"},{children:[D(e),e.children]}))}function L(e){return D(e,"icon-badge")}function D({icon:e,pack:n,color:t,size:i,position:o,className:l,style:s},r=""){const c=e.split(/\s+/).filter((e=>e.trim().length>0)).filter((t=>!t.includes(":")||!([n,e]=t.split(":",2)))).filter((e=>!/^#[0-9a-f]+$/i.test(e)||!(t=e))).filter((e=>!/^[-.0-9]+(%|px|em|vh|vw)$/i.test(e)||!(i=e))).filter((e=>"top-left"!==e&&"top-right"!==e&&"bottom-left"!==e&&"bottom-right"!==e||!(o=e)));return e=c.pop()||e,t=c.pop()||t,i=c.pop()||i,l=["icon",n&&`icon-${n}`,e&&`icon-${e}`,(o=o||(r?"top-right":void 0))&&`icon-${o}`,t&&!t.startsWith("#")&&t,l,r].filter(Boolean).join(" "),(0,a.jsx)("svg",Object.assign({className:l,width:i,height:i,color:(null==t?void 0:t.startsWith("#"))?t:void 0,style:s},{children:(0,a.jsx)("use",{href:`${n?`sprites/${n}.svg`:""}#${e}`})}))}const W={light:"Light Mode",dark:"Dark Mode","jumbo-light":"Jumbo Light","jumbo-dark":"Jumbo Dark"};function G(e,n,t=0,a=t,i=0){var o;const l=r.Z.fromValue_noAlloc(e);return n=null!==(o="string"==typeof n?H[n]:n)&&void 0!==o?o:V,l.isFinite()?l.exponent<-300?l.sign<0?n.negativeVerySmall(l.abs(),i):n.verySmall(l,i):l.exponent<3?l.sign<0?n.negativeSmall(l.abs().toNumber(),i):n.small(l.toNumber(),i):l.sign<0?n.negativeDecimal(l.abs(),t,a):n.decimal(l,t,a):l.sign<0?n.negativeInfinite():n.infinite()}const H={},z={prec:3,commas:{show:!0,min:1e6,max:1e9}};G.all=H,G.exponentSettings=z,G.register=e=>{var n;return H[null!==(n=e.name)&&void 0!==n?n:""]=Object.assign(Object.assign({},V),e)};const V={name:"System",infinite:()=>(1/0).toString(),negativeInfinite(){return`-${this.infinite()}`},decimal(e,n,t){var a;return e.toStringWithDecimalPlaces(null!==(a=null!=n?n:t)&&void 0!==a?a:0)},negativeDecimal(e,n,t){return`-${this.decimal(e,n,t)}`},verySmall(e,n){return this.small(e.toNumber(),n)},negativeVerySmall(e,n){return`-${this.verySmall(e,n)}`},small:(e,n)=>e.toFixed(n),negativeSmall(e,n){return`-${this.small(e,n)}`}};G.register(V);const Q=G.register({name:"Standard",decimal(e,n,t){var a;return null!==(a=this.exponent)&&void 0!==a||(this.exponent=ee(Y,1,1e3)),this.exponent(e,n,t)}}),J=(e,n=Q)=>G.register({name:`Mixed ${e.name}`,decimal:(t,a,i)=>(t.exponent<33?n:e).decimal(t,a,i)});J(G.register({name:"Scientific",decimal(e,n,t){var a;return null!==(a=this.exponent)&&void 0!==a||(this.exponent=ee(X(this),1)),this.exponent(e,n,t)}})),J(G.register({name:"Engineering",decimal(e,n,t){var a;return null!==(a=this.exponent)&&void 0!==a||(this.exponent=ee(X(this),3)),this.exponent(e,n,t)}})),J(G.register({name:"Logarithmic",decimal(e,n,t){var a;return null!==(a=this.exponent)&&void 0!==a||(this.exponent=X(this,((e,n)=>e.toFixed(n)))),`e${this.exponent(e.log10(),n,t)}`}}));const K={abbreviations:["K","M","B","T","Qa","Qt","Sx","Sp","Oc","No"],prefixes:[["","U","D","T","Qa","Qt","Sx","Sp","O","N"],["","Dc","Vg","Tg","Qd","Qi","Se","St","Og","Nn"],["","Ce","Dn","Tc","Qe","Qu","Sc","Si","Oe","Ne"]],prefixes_2:["","MI-","MC-","NA-","PC-","FM-","AT-","ZP-"]};function Y(e){const n=e.toNumber()-1;if(-1===n)return"";if(n>z.commas.min)return(1/0).toString();if(n<K.abbreviations.length)return K.abbreviations[n];const t=[];for(let e=n;e>0;e=Math.floor(e/10))t.push(K.prefixes[t.length%3][e%10]);for(;t.length%3!=0;)t.push("");let a="";for(let e=t.length/3-1;e>=0;e--)a+=t.slice(3*e,3*e+3).join("")+K.prefixes_2[e];return a.replace(/-[A-Z]{2}-/g,"-").replace(/U([A-Z]{2}-)/g,"$1").replace(/-$/,"")}function X(e,n=(e=>e.toString())){return function(t,a=z.prec,i=Math.max(2,a)){if(t.lt(z.commas.min))return n(t.toNumber(),Math.max(a,1));if(z.commas.show&&t.lt(z.commas.max)){const e=n(t.toNumber(),0).split(".");return e[0]=e[0].replace(/\w+$/g,(e=>Array.from(Array(Math.ceil(e.length/3))).map(((n,t)=>t?e.slice(-3*(t+1),-3*t):e.slice(-3))).reverse().join(","))),e.join(".")}return e.decimal(t,i,i)}}function ee(e,n,t=10){return function(a,i=0,o=0){const l=Math.pow(t,n);let s=a.log(l).floor().mul(n);t>=100&&(s=s.max(r.Z.dZero));let c=a.div(s.pow_base(t)).toFixed(i);return c===l.toFixed(i)&&(c=1..toFixed(i),s=s.add(n)),s.eq(r.Z.dZero)?c:`${c}${10===t?"e":" "}${e(s,o)}`}}function ne(e,n){return null==e||null==e||"string"==typeof e?ne.word(null!=e?e:void 0,n):e instanceof Date?ne.time(e.getTime(),n):e instanceof r.Z||"number"==typeof e?ne.number(e,n):""}ne.number=function(e,n){var t,a,i;const o=null!==(t=null==n?void 0:n.prec)&&void 0!==t?t:0,l=null!==(a=null==n?void 0:n.smallPrec)&&void 0!==a?a:o,s=null!==(i=null==n?void 0:n.expPrec)&&void 0!==i?i:Math.max(o,"tiny"===(null==n?void 0:n.len)?0:"short"===(null==n?void 0:n.len)?2:3);let c=G(e,null==n?void 0:n.notation,o,s,l);return c&&(null==n?void 0:n.alwaysShowSign)&&!"+-".includes(c[0])&&r.Z.gte(e,0)&&(c="+"+c),c},ne.time=function(e,n){var t,a,i,o,l,s;const r=null!==(t=null==n?void 0:n.len)&&void 0!==t?t:"long",c=(null!==(a=null==n?void 0:n.sep)&&void 0!==a?a:"long"===r)?", ":":",u=((null==n?void 0:n.oxfordComma)?c:"")+((null!==(i=null==n?void 0:n.lastSep)&&void 0!==i?i:"long"===r)?" and ":c),d=(null!==(o=null==n?void 0:n.now)&&void 0!==o?o:"long"===r)?"now":"",m=(null!==(l=null==n?void 0:n.never)&&void 0!==l?l:"long"===r)?"never":"",f=(null!==(s=null==n?void 0:n.ago)&&void 0!==s?s:"long"===r)?"ago":"";if(m&&(e<0||null!=(null==n?void 0:n.epoch)&&(n.epoch<=0||e-n.epoch<0)))return m;if(d&&(0===e||null!=(null==n?void 0:n.epoch)&&e===n.epoch))return d;null!=(null==n?void 0:n.epoch)&&(e-=n.epoch);let h=Math.floor(e/1e3),p=Math.floor(e-1e3*h),g=Math.floor(h/60);h-=60*g;let v=Math.floor(g/60);g-=60*v;let b=Math.floor(v/24);v-=24*b;let N=Math.floor(b/365);if(b-=365*N,(null==n?void 0:n.millis)||(p=0),null!=d&&b+v+g+h+p===0)return d;let j=[];if(j="long"!==r?[N>0?N.toFixed(0):"",b>0?b.toFixed(0):"",v>0||"short"===r?v.toFixed(0):"",g>0||"short"===r?g.toFixed(0):"",(h+p/1e3).toFixed(!(null==n?void 0:n.millis)||"tiny"===r&&0===p?0:3)].map((e=>"short"!==r||1!==e.length&&1!==e.indexOf(".")?e:"0"+e)):[[N,"year"],[b,"day"],[v,"hour"],[g,"minute"],[h,"second",N+b+v+g===0,p]].map((([e,n,t=!1,a=0])=>e>0||a>0||t&&0===e?e.toString()+(a>0?"."+a.toString():"")+" "+n+(1===e?"":"s"):"")),j=j.filter((e=>!!e)),j.length>2){const e=j.pop();j=[j.join(c),e]}let x=j.join(u)+(f?" "+f:"");return x&&(null==n?void 0:n.alwaysShowSign)&&e>=0&&"long"!==r&&!"+-".includes(x[0])&&(x="+"+x),x},ne.word=function(e,n){var t,a,i,o,l,s;return e||(e=null!==(i=Math.abs(Math.abs(null!==(t=null==n?void 0:n.count)&&void 0!==t?t:0)-1)<=(null!==(a=null==n?void 0:n.tolerance)&&void 0!==a?a:.001)?null==n?void 0:n.singularName:null==n?void 0:n.pluralName)&&void 0!==i?i:null==n?void 0:n.name),(null===(o=null==n?void 0:n.condition)||void 0===o||o)&&(e||null!==(l=null==n?void 0:n.allowEmpties)&&void 0!==l&&l)?null===(s=null==n?void 0:n.capitalize)||void 0===s||s?(null!=e?e:"").replace(/([a-z])([A-Z]|_\S)/g,((e,n,t)=>`${n} ${t.slice(-1)}`)).replace(/(?:^|\s)\w(?=\w)/g,(e=>e.toUpperCase())):null!=e?e:"":""},ne.resource=function(e,n){var t,a,i,o,l,c,u,d,m,f,h,p,g,v,b,N,j,x,y,w,_,O,k,F,S;n||(n={});let C=null!==(t=(e=n.override?Object.assign(Object.assign({},e),n.override):e).display)&&void 0!==t?t:"number";null!==(a=n.len)&&void 0!==a||(n.len="long"),null!==(i=n.now)&&void 0!==i||(n.now=""),null!==(o=n.never)&&void 0!==o||(n.never=""),null!==(l=n.ago)&&void 0!==l||(n.ago=""),null!==(c=n.prec)&&void 0!==c||(n.prec="time"===C?3:"number"===C?2:1),null!==(u=n.smallPrec)&&void 0!==u||(n.smallPrec="number"===C?0:n.prec),null!==(d=n.round)&&void 0!==d||(n.round="number"===C?r.Z.floor:r.Z.round),null!==(m=n.millis)&&void 0!==m||(n.millis=n.prec>0),n.notation||(n.notation=(null===(f=e.manager)||void 0===f?void 0:f.settings.numberFormat)||"Standard"),null!==(h=n.tolerance)&&void 0!==h||(n.tolerance=Math.pow(10,-n.prec-("percentage"===C?2:0)));const A=null===(p=e.unlocked)||void 0===p||p?e.disabled?"disabled":"active":"locked";let M,P,T=null!==(b=(null===(g=n.override)||void 0===g?void 0:g.value)?n.override.value():null===(v=n.override)||void 0===v?void 0:v.count)&&void 0!==b?b:e.value?e.value():e.count;T&&(T=n.round(T.div(n.tolerance)).mul(n.tolerance)),T&&"none"!==C&&(M="time"===C?ne.time(1e3*T.toNumber(),n):"percentage"===C?ne(T,n)+"%":ne(T,n),P=te[T.cmp_tolerance(r.Z.dZero,n.tolerance)]),null!==(N=n.count)&&void 0!==N||(n.count=T?T.toNumber():void 0),null!==(j=n.name)&&void 0!==j||(n.name=e.name),null!==(x=n.singularName)&&void 0!==x||(n.singularName=null!==(y=e.singularName)&&void 0!==y?y:e.pluralName),null!==(w=n.pluralName)&&void 0!==w||(n.pluralName=null!==(_=e.pluralName)&&void 0!==_?_:e.singularName);const $=ne(null===(O=n.override)||void 0===O?void 0:O.name,n)||void 0,I=e.icon;let B;e.maxCount&&(B=ne(e.maxCount,n));const Z=s.map(e.extra||{},(e=>ne(e,n)||void 0),(e=>ne(e,n)));let E,U;if((null===(k=e.rate)||void 0===k?void 0:k.lastCountUpdate)&&e.rate.count&&"none"!==C){let t=e.rate.count;null!==(F=n.useRatePercent)&&void 0!==F||(n.useRatePercent=T&&T.gte(1e3)&&t.gte(1e3)),"number"===C&&n.useRatePercent&&T&&(C="percentage",t=t.div(T)),n.len="long"!==n.len?"tiny":"short",n.alwaysShowSign=!0,n.smallPrec=(null!==(S=n.smallPrec)&&void 0!==S?S:n.prec)+2,n.prec+=2,E="time"===C?ne.time(1e3*e.rate.count.toNumber(),n):"percentage"===C?ne(t.mul(100),n)+"%":ne(t,n),E&&(E+="/s"),U=te[r.Z.cmp_tolerance(t,0,n.tolerance)]}return{active:A,name:$,icon:I,value:M,valueSign:P,max:B,rate:E,rateSign:U,extras:Z}};const te={[-1]:"negative",0:"zero",1:"positive"};function ae(e){return ue("string"==typeof e?{message:e}:null!=e?e:{})}ae.info=(e,n)=>ue(Object.assign(Object.assign({},n),{message:e,type:"info"})),ae.success=(e,n)=>ue(Object.assign(Object.assign({},n),{message:e,type:"success"})),ae.fail=(e,n)=>ue(Object.assign(Object.assign({},n),{message:e,type:"fail"}));const ie={top:"top",bottom:"bottom"},oe={left:"left",center:"center",right:"right"},le={info:"ti:info-circle",success:"ti:circle-check",fail:"ti:alert-circle"};let se,re,ce=0;function ue(e){var n,t,a;(e=Object.assign({},e)).id=null!==(n=e.id)&&void 0!==n?n:ce++;const i=null!==(t=e.position)&&void 0!==t?t:"top-right";se=null!=se?se:{},se[i]=null!==(a=se[i])&&void 0!==a?a:[],i.includes("bottom")?se[i].unshift(e):se[i].push(e);const o=e.onHide;return e.onHide=e=>{var n;const t=null!==(n=e.position)&&void 0!==n?n:"top-right";se[t]=se[t].filter((n=>n.id!==e.id)),de(),o&&o(e)},de(),Object.assign(Object.assign({},new Promise((n=>{var t;return setTimeout(n,1e3*(null!==(t=e.duration)&&void 0!==t?t:3))}))),{hide:()=>e.onHide(e)})}function de(){re.render(Object.keys(ie).map((e=>(0,a.jsx)("div",Object.assign({className:u.className("row",e)},{children:Object.keys(oe).map((n=>{var t;const i=`${e}-${n}`;return(0,a.jsx)("div",Object.assign({className:u.className("group",n)},{children:(null!==(t=se[i])&&void 0!==t?t:[]).map((e=>(0,a.jsx)(me,Object.assign({},e),`toast_${i}_${e.id}`)))}),i)}))}),e))))}function me(e){var n;const[t,i]=(0,o.useState)("hidden");function l(){i("hidden"),setTimeout((()=>{e.onHide&&e.onHide(e)}),300)}(0,o.useEffect)((()=>{var n;const t=setTimeout((()=>i("shown")),50),a=setTimeout((()=>{0!==e.duration&&l()}),1e3*(null!==(n=e.duration)&&void 0!==n?n:3));return()=>{clearTimeout(t),clearTimeout(a)}}),[]);const s="object"==typeof e.icon?e.icon:e.icon?{icon:e.icon}:e.type?{icon:le[e.type]}:void 0;return(0,a.jsxs)("div",Object.assign({className:u.className("toast",t,e.type,e.className),onClick:null!==(n=e.onClick)&&void 0!==n?n:l,style:e.style},{children:[s&&(0,a.jsx)(R,Object.assign({},s)),(0,a.jsxs)("div",{children:[e.heading&&(0,a.jsx)("h4",{children:e.heading}),e.message&&(0,a.jsx)("div",Object.assign({className:"message"},{children:e.message})),e.children&&(0,a.jsx)("div",Object.assign({className:"children"},{children:e.children}))]})]}))}window.addEventListener("load",(()=>re=(0,i.s)(U("toasts-root"))),!1);const fe=["context","manager","resourceManager"];var he=t(122);function pe({resource:e,override:n,epoch:t,length:i,precision:o,showLocked:l,showIcon:s=!0,showName:r=!0,showValue:c=!0,showMaxValue:d,showRate:m,showExtras:f,showColors:h,showRateColors:p=!0,showNegatives:g=!0,showZeros:v=!0,showPlusSign:b,showZeroRates:N,showRatePercentages:j,showCapitalized:x,showChrome:y,prefix:w,suffix:_,infix:O,placeholder:k,className:F,style:S}){var C;const{resourceManager:A}=B();e="string"==typeof e?A.get(e):null!=e?e:{};const M=ne.resource(e,{override:n,useRatePercent:j,len:i,prec:o,alwaysShowSign:b,epoch:t,capitalize:x});let P=[];function T(e="",n="",t="",i=!1,o=!1){!e||!g&&"negative"==n||!v&&"zero"==n||P.push((0,a.jsx)("div",Object.assign({className:u.className(t,i&&n)},{children:o?`(${e})`:e}),`${t}-${P.length+1}`))}if((s&&e.icon||r&&M.name)&&P.push((0,a.jsxs)("div",Object.assign({className:"name"},{children:[s&&e.icon&&(0,a.jsx)(R,{icon:e.icon,size:"1em"}),r&&M.name,(c||m)&&(null!=O?O:":")]}),"name")),c&&M.value){const e=d&&M.max?" / "+M.max:"";T(M.value+e,M.valueSign,"value",h)}if(m&&M.rate&&(N||"zero"!==M.rateSign)&&T(M.rate,M.rateSign,"rate",p,c),f&&M.extras&&Object.keys(M.extras).length>0)for(let e in M.extras)e&&M.extras[e]&&(P.length>0&&P.push((0,a.jsx)("div",{className:"break"},`break-${e}`)),P.push((0,a.jsxs)("div",Object.assign({className:"extra-name"},{children:[e,null!=O?O:":"]}),`extra-name-${e}`)),T(M.extras[e],void 0,"extra-value"));const $=["resource",e.display,y&&F];l||null===(C=e.unlocked)||void 0===C||C||($.push("locked"),P=[(0,a.jsx)("div",Object.assign({className:"placeholder"},{children:k}),"lock")]);const I=(0,a.jsxs)("div",Object.assign({className:u.className($),style:y?S:void 0},{children:[w&&(0,a.jsx)("div",Object.assign({className:"prefix"},{children:w})),P,_&&(0,a.jsx)("div",Object.assign({className:"suffix"},{children:_}))]}));return y?(0,a.jsx)("div",Object.assign({className:u.className(F),style:S},{children:I})):I}function ge(){var e,n,t,i,l,s,r,c,u,d,m,f,h,p,g;const{popupManager:v}=B(),b=v.getCurrentPopup();if((0,o.useEffect)((()=>{var e;const n=null==b?void 0:b.onMount,t=null==b?void 0:b.onUnmount;let a;try{a=document.querySelectorAll(null!==(e=null==b?void 0:b.highlightSelector)&&void 0!==e?e:"")}catch(e){}return(null==b?void 0:b.enabled)&&(null==a||a.forEach((e=>e.classList.add("highlight"))),n&&n()),()=>{null==a||a.forEach((e=>e.classList.remove("highlight"))),t&&t()}}),[null==b?void 0:b.name,null==b?void 0:b.step,null==b?void 0:b.enabled]),!b)return null;function N(e){return null!=(null==e?void 0:e.name)&&null!=(null==e?void 0:e.step)&&""!=(null==e?void 0:e.name)&&!isNaN(null==e?void 0:e.step)&&isFinite(null==e?void 0:e.step)&&!((null==e?void 0:e.name)==(null==b?void 0:b.name)&&(null==e?void 0:e.step)==(null==b?void 0:b.step))}function j(e,n){null==n||n.preventDefault();const t=v.getPopupState(b);v.delPopupState(b),e&&N(e)&&v.setPopupState(e,{priority:t.priority})}function x(e,n="%"){return`max(5${n}, 1em, min(90${n}, calc(100${n} - 2em), calc(${e})))`}const y={left:x(b.bounds.left,"vw"),bottom:x(`100vh - ${b.bounds.top} - ${b.bounds.height}`,"vh"),width:x(b.bounds.width,"vw"),minHeight:x(b.bounds.height,"vh"),maxHeight:x("100vh","vh")},w=(0,a.jsx)("div",Object.assign({id:"popup-root",style:y},{children:(0,a.jsxs)("div",Object.assign({className:"panel shadow",style:{minHeight:b.bounds.height}},{children:[b.title&&(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:b.title})),b.body,N(b.prev)&&!((null===(e=b.prev)||void 0===e?void 0:e.name)===(null===(n=b.next)||void 0===n?void 0:n.name)&&(null===(t=b.prev)||void 0===t?void 0:t.step)===(null===(i=b.next)||void 0===i?void 0:i.step))&&(0,a.jsx)("div",Object.assign({className:"prev"},{children:(0,a.jsx)("a",Object.assign({href:"",onClick:he.Z.apply(j,b.prev)},{children:null!==(s=null===(l=b.prev)||void 0===l?void 0:l.title)&&void 0!==s?s:"< back"}))})),(0,a.jsx)("div",Object.assign({className:"next"},{children:(0,a.jsx)("a",Object.assign({href:"",onClick:he.Z.apply(j,b.next)},{children:null!==(c=null===(r=b.next)||void 0===r?void 0:r.title)&&void 0!==c?c:(null===(u=b.next)||void 0===u?void 0:u.step)?"next >":"done"}))})),N(b.skip)&&!((null===(d=b.skip)||void 0===d?void 0:d.name)===(null===(m=b.next)||void 0===m?void 0:m.name)&&(null===(f=b.skip)||void 0===f?void 0:f.step)===(null===(h=b.next)||void 0===h?void 0:h.step))&&(0,a.jsx)("div",Object.assign({className:"skip"},{children:(0,a.jsx)("a",Object.assign({href:"",onClick:he.Z.apply(j,b.skip)},{children:null!==(g=null===(p=b.skip)||void 0===p?void 0:p.title)&&void 0!==g?g:"skip >>>"}))}))]}))}));return b.greyOut?(0,a.jsx)("div",Object.assign({className:"greyout"},{children:w})):w}function ve(){var e,n,t,i;const{context:l,settings:s,save:r}=B(),[c,u]=(0,o.useState)(),[d,m]=(0,o.useState)(0),f=(0,o.useCallback)((e=>function(e,n){if(n.target&&je.includes(n.target.tagName.toUpperCase()))return;const t=xe[n.key.toLowerCase()];t&&t.length>0&&t.forEach((t=>{t(e,n)&&(n.preventDefault(),n.stopPropagation())}))}(l,e)),[l]);(0,o.useEffect)((()=>(document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f))),[f]);const h=(0,o.useCallback)((()=>{l.resourceManager.update(void 0,"tick").includes(!0),s.lastUpdate-s.lastSaved>=1e3*s.saveFrequencySecs&&s.lastUpdate-s.lastLoaded>=1e3*s.saveFrequencySecs&&(r(),ae.info("Game saved!")),m((e=>s.lastUpdate-e>=1e3/s.framesPerSecond?s.lastUpdate:e))}),[l,s,r,m]);(0,o.useEffect)((function(){return c&&clearInterval(c),u(setInterval(h,1e3/s.ticksPerSecond)),q(s.theme),()=>{c&&(clearInterval(c),u(void 0))}}),[s,s.ticksPerSecond,s.theme]);const p=be.left.map((e=>g(e,{},l))),v=be.right.map((e=>g(e,{},l))),b=null!==(i=null!==(t=null!==(n=null!==(e=p.filter((e=>"/"===e.path))[0])&&void 0!==e?e:v.filter((e=>"/"===e.path))[0])&&void 0!==n?n:p[0])&&void 0!==t?t:v[0])&&void 0!==i?i:{body:""};return(0,a.jsxs)(Z.UT,{children:[(0,a.jsxs)("nav",Object.assign({id:"navbar"},{children:[(0,a.jsx)("div",Object.assign({className:"left"},{children:p.map((e=>(0,a.jsx)(Ne,{tab:e},e.path)))})),(0,a.jsx)("div",{className:"spacer"}),(0,a.jsx)("div",Object.assign({className:"right"},{children:v.map((e=>(0,a.jsx)(Ne,{tab:e},e.path)))}))]})),(0,a.jsx)(ge,{}),(0,a.jsxs)(E.Z5,{children:["/"!==b.path&&(0,a.jsx)(E.AW,{path:"/",element:b.body}),[...p,...v].map((e=>(0,a.jsx)(E.AW,{path:e.path,element:e.body},e.path)))]})]})}C.push((function({settings:e,resourceManager:n,popupManager:t}){t.register({name:"OfflineSummary",title:"While you were offline...",bounds:{height:"32em"},body(){var i;const o=n.execution.load,l=Object.keys(null!==(i=null==o?void 0:o.lastChanges)&&void 0!==i?i:{}).filter((e=>isFinite(n.resources[e].priority))).sort(((e,t)=>n.resources[e].priority-n.resources[t].priority));let s=0;return o?0===l.length?(t.delPopupState("OfflineSummary"),(0,a.jsx)("div",Object.assign({className:"full"},{children:"Nothing happened!"}))):(l.length>e.offlineSummaryMaxUpdates&&(s=l.splice(e.offlineSummaryMaxUpdates-1).length),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",Object.assign({className:"full"},{children:["You were offline for"," ",ne.time(1e3*o.lastDelta,{now:"",ago:"",never:""}),". During this time, you gained:"]})),l.map((e=>(0,a.jsx)("div",Object.assign({className:"full"},{children:(0,a.jsx)(pe,{resource:e,showColors:!0,showPlusSign:!0,override:{count:o.lastChanges[e]}})}),e))),s>0&&(0,a.jsxs)("div",Object.assign({className:"full center"},{children:["... and ",s," more ..."]}))]})):null}}),n.onUpdateComplete=function(n,a,i){"load"===i&&a>=e.offlineSummaryMinSecs&&Object.keys(n).length>0&&t.setPopupState("OfflineSummary",{step:0})}}));const be={left:[],right:[{path:"/settings",placement:"right",order:0,enabled:!0,icon:"ti:settings",body:(0,a.jsx)((function(){const e=B(),[n,t]=(0,o.useState)(""),[i,l]=(0,o.useState)(!1),r=(0,E.s0)(),c=(0,E.TH)(),u=e.settings,d=c.search.toLowerCase().includes("debug");function m(e,n){let t=parseInt(n);if(t>=1&&t<=1e3)switch(e){case"tick":u.ticksPerSecond=t;break;case"render":u.framesPerSecond=t;break;case"save":u.saveFrequencySecs=600/t}}function f(e){const n=e.target.getAttribute("theme");n&&(u.theme=n,q(n))}function h(e){u.numberFormat=e.target.name}return(0,a.jsxs)("div",Object.assign({id:"options"},{children:[(0,a.jsxs)("div",Object.assign({className:"panel options",id:"options-theme"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:"Theme Options"})),(0,a.jsxs)("div",Object.assign({className:"full"},{children:["Current theme is:  ",W[u.theme]]})),Object.keys(W).map((e=>(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("div",Object.assign({className:"themed",id:`theme-${e}`,theme:e},{children:(0,a.jsx)("button",Object.assign({id:`button-theme-${e}`,theme:e,onClick:f},{children:W[e]}))}))}),`theme-${e}`))),(0,a.jsx)("hr",{className:"dashed"}),(0,a.jsxs)("div",Object.assign({className:"full"},{children:["Current number format is:  ",G.all[u.numberFormat].name]})),Object.values(G.all).map((e=>(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("div",Object.assign({className:"themed"},{children:(0,a.jsxs)("button",Object.assign({id:`button-notation-${e.name}`,name:e.name,onClick:h},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:e.name})),["123456.789","123.456e789.012"].map(((n,t)=>(0,a.jsx)("div",Object.assign({className:"full center"},{children:G(n,e,3)}),`sample-${e.name}-${t}`)))]}))}))}),`notation-${e.name}`)))]})),(0,a.jsxs)("div",Object.assign({className:"panel options",id:"options-data"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:"Game Data"})),(0,a.jsxs)("div",Object.assign({className:"full"},{children:["You started this game"," ",ne.time(u.lastUpdate,{epoch:u.lastReset})]})),(0,a.jsxs)("div",Object.assign({className:"full"},{children:["This session started"," ",ne.time(u.lastUpdate,{epoch:u.lastLoaded})]})),(0,a.jsxs)("div",Object.assign({className:"full"},{children:["Game was last saved"," ",ne.time(u.lastUpdate,{epoch:u.lastSaved})]})),(0,a.jsx)("hr",{className:"dashed"}),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"button",value:"Load",onClick:function(){e.load()?(r({pathname:"/",search:c.search}),ae.success("Game loaded!")):ae.fail("Load failed!")},id:"button-load"})})),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"button",value:"Save",onClick:function(){e.save(d),ae.success("Game saved!")},id:"button-save"})})),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"button",value:"Load from File",onClick:function(){!function(e,n){const t=document.createElement("input");t.type="file",t.addEventListener("change",(function(n){const t=n.target.files;if(!t||0===t.length||!t[0])return;const a=new FileReader;a.onload=function(n){var t;const a=null===(t=n.target)||void 0===t?void 0:t.result;a&&"string"==typeof a&&e&&e(a)},a.readAsText(t[0])}),!1),t.click()}((n=>{e.loadAs(n)?(r({pathname:"/",search:c.search}),ae.success("Game imported!")):ae.fail("Import failed!")}))},id:"button-file-load"})})),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"button",value:"Save to File",onClick:function(){const n=s.map(globalThis.gamePackage,(e=>null==e?void 0:e.replace(/\W/g,"_"))),t=(new Date).toISOString().replace(/\D/g," ").trim().replace(/\D/g,"-");!function(e,n){n instanceof Blob||(n=new Blob([n],{type:"text/plain"}));const t=URL.createObjectURL(n),a=document.createElement("a");a.href=t,a.download=e,a.click(),URL.revokeObjectURL(t)}(`${n.name}-v${n.version}-${t}`,e.saveAs(d)),ae.success("Game exported!")},id:"button-file-save"})})),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"button",value:"Import",onClick:function(){e.loadAs(n)?(r({pathname:"/",search:c.search}),ae.success("Game imported!")):ae.fail("Import failed!")},id:"button-import"})})),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"button",value:"Export",onClick:function(){t(e.saveAs(d)),ae.success("Game exported!")},id:"button-export"})})),(0,a.jsx)("div",Object.assign({className:"full center",id:"export-text"},{children:(0,a.jsx)("textarea",{value:n,onChange:e=>t(e.target.value)})}))]})),(0,a.jsxs)("div",Object.assign({className:"panel options",id:"options-advanced"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:"Advanced Settings"})),(0,a.jsx)("div",Object.assign({className:"full"},{children:"If you are having performance issues, increase the time between updates. Faster updating frequncies lead to better game experience but might use a lot of CPU."})),(0,a.jsx)("div",Object.assign({className:"half"},{children:"Updating frequency:"})),(0,a.jsxs)("div",Object.assign({className:"half center"},{children:[Math.floor(1e3/u.ticksPerSecond),"ms"]})),(0,a.jsx)("div",{className:"half"}),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"range",min:1,max:1e3,value:u.ticksPerSecond,onInput:e=>m("tick",e.target.value),id:"input-freq-tick"})})),(0,a.jsx)("div",{className:"full"}),(0,a.jsx)("div",Object.assign({className:"half"},{children:"Rendering frequency:"})),(0,a.jsxs)("div",Object.assign({className:"half center"},{children:[Math.floor(1e3/u.framesPerSecond),"ms"]})),(0,a.jsx)("div",{className:"half"}),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"range",min:1,max:60,value:u.framesPerSecond,onInput:e=>m("render",e.target.value),id:"input-freq-render"})})),(0,a.jsx)("div",Object.assign({className:"full"},{children:"Change how often the game is saved in the background. More frequent saving leads to faster backups, but increases CPU and I/O usage"})),(0,a.jsx)("div",Object.assign({className:"half"},{children:"Saving frequency:"})),(0,a.jsx)("div",Object.assign({className:"half center"},{children:ne.time(1e3*u.saveFrequencySecs,{ago:""})})),(0,a.jsx)("div",{className:"half"}),(0,a.jsx)("div",Object.assign({className:"half center"},{children:(0,a.jsx)("input",{type:"range",min:1,max:60,value:600/u.saveFrequencySecs,onInput:e=>m("save",e.target.value),id:"input-freq-save"})}))]})),(0,a.jsxs)("div",Object.assign({className:"panel options reset",id:"options-reset"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar warning"},{children:"Game Reset"})),(0,a.jsx)("div",Object.assign({className:"full"},{children:"WARNING: this will completely reset your game and delete all saved progress and setting. Only use this if you want to restart the game from beginning, or if something in the settings is so messed up that the game is now unplayable."})),(0,a.jsx)("div",Object.assign({className:"full"},{children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:i,onChange:()=>l(!i),id:"acknowledge-box"}),"I understand what this means and still want to reset the game"]})})),(0,a.jsx)("div",Object.assign({className:"full right"},{children:(0,a.jsx)("input",{type:"button",value:"Reset everything",disabled:!i,onClick:function(){i&&(confirm("Are you sure you want to reset? This cannot be undone.")?(e.reset(),r({pathname:"/",search:c.search})):l(!1))},id:"button-wipeall"})}))]})),d&&(0,a.jsxs)("div",Object.assign({className:"panel options debug",id:"options-debug"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:"Debug Context"})),(0,a.jsx)("div",Object.assign({className:"full"},{children:JSON.stringify(e,((e,n)=>"string"==typeof e&&e.startsWith("_")||fe.includes(e)?void 0:n),2)}))]}))]}))}),{})}]};function Ne({tab:e}){var n;if(null!==(n=e.enabled)&&void 0!==n&&!n)return null;const t=(0,E.TH)();return(0,a.jsx)("div",Object.assign({id:`tab-${e.path.replace(/\W/g,"")||"main"}`},{children:(0,a.jsxs)(Z.OL,Object.assign({className:e=>e.isActive?"active":void 0,to:{pathname:e.path,search:t.search},end:!0},{children:["string"==typeof e.icon?(0,a.jsx)(R,{icon:e.icon}):e.icon,e.heading&&(0,a.jsx)("span",{children:e.heading})]}))}))}ve.registerTab=e=>{var n;const t=null!==(n=e.placement)&&void 0!==n?n:"left",a=be[t].findIndex((n=>n.path===e.path));a>=0&&be[t].splice(a,1),be[t].push(e),be[t].sort(((e,n)=>{var a,i;return("left"===t?1:-1)*(null!==(a=e.order)&&void 0!==a?a:1/0)-(null!==(i=n.order)&&void 0!==i?i:1/0)}))};const je=["TEXTAREA","INPUT"],xe={s:[function(e,n){return!(!n.ctrlKey&&!n.metaKey||(e.save(),ae.success("Game saved!"),0))}]};function ye(){const e=B(),n=(0,o.useMemo)((()=>e.saveAs(!0)),[]);return(0,a.jsxs)("div",Object.assign({id:"reset"},{children:[(0,a.jsxs)("div",Object.assign({className:"panel options"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:"Load Failure!"})),(0,a.jsx)("div",Object.assign({className:"full"},{children:"Looks like something went very wrong in loading the game. It's possible that the game version is out of date, or that the save data is corrupt."})),(0,a.jsx)("hr",{className:"dashed"}),(0,a.jsx)("div",Object.assign({className:"full"},{children:"For your records, here is the current contents of the save state. Keep this somewhere before resetting the game:"})),(0,a.jsx)("div",Object.assign({className:"full center"},{children:(0,a.jsx)("textarea",{value:n,readOnly:!0})}))]})),(0,a.jsxs)("div",Object.assign({className:"panel options reset"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar warning"},{children:"Game Reset"})),(0,a.jsx)("div",Object.assign({className:"full"},{children:"WARNING: this will completely reset your game and delete all saved progress and settings. This will hard reset the game from beginning."})),(0,a.jsx)("div",Object.assign({className:"full right"},{children:(0,a.jsx)("input",{type:"button",value:"Hard Reset Everything",onClick:function(){confirm("Are you sure you want to reset? This cannot be undone.")&&(e.reset(),window.location.reload())}})}))]}))]}))}function we({frames:e=12,duration:n=1,className:t,style:i,children:o}){return(0,a.jsxs)("svg",Object.assign({className:u.className(["spinner",t]),style:i,width:"128px",height:"128px",viewBox:"0 0 100 100"},{children:[Array.from(Array(e).keys()).map((t=>(0,a.jsx)("g",Object.assign({transform:`rotate(${360*t/e} 50 50)`},{children:(0,a.jsx)("rect",Object.assign({x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#32a0da"},{children:(0,a.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:`${n}s`,begin:n/e*(t-e)+"s",repeatCount:"indefinite"})}))}),`g-${t}`))),o]}))}function _e(){const e=B(),[n,t]=(0,o.useState)(!1),[i,l]=(0,o.useState)(!1);function s(){try{e.init(),e.load(),t(!0)}catch(e){throw l(!0),e}}return(0,o.useEffect)((()=>{n||i||setTimeout(s,1e3/e.settings.ticksPerSecond)}),[n,i]),n?(0,a.jsx)(ve,{}):i?(0,a.jsx)(ye,{}):(0,a.jsx)(we,{})}ve.registerShortcut=(e,n)=>{var t;e=e.toLowerCase().replace(/\W/g,""),null!==(t=xe[e])&&void 0!==t||(xe[e]=[]),xe[e].includes(n)||xe[e].push(n)};const Oe={rank:{E:{color:"lightgray"},D:{color:"white"},C:{color:"lightgreen"},B:{color:"lightblue"},A:{color:"orchid"},S:{color:"gold"}},cloak:{},character:{Nobody:{fileName:"char-00",iconFileName:"char-00-icon"},"Man A":{fileName:"char-01",iconFileName:"char-01-icon",overlayFileName:"char-01-fg"},"Man B":{fileName:"char-02",iconFileName:"char-02-icon",overlayFileName:"char-02-fg"},"Woman A":{fileName:"char-03",iconFileName:"char-03-icon",overlayFileName:"char-03-fg"},"Woman B":{fileName:"char-04",iconFileName:"char-04-icon",overlayFileName:"char-04-fg"},"Boy A":{fileName:"char-05",iconFileName:"char-05-icon",overlayFileName:"char-05-fg"},"Boy B":{fileName:"char-06",iconFileName:"char-06-icon",overlayFileName:"char-06-fg"},"Girl A":{fileName:"char-07",iconFileName:"char-07-icon",overlayFileName:"char-07-fg"},"Girl B":{fileName:"char-08",iconFileName:"char-08-icon",overlayFileName:"char-08-fg"},"Young Man A":{fileName:"char-09",iconFileName:"char-09-icon",overlayFileName:"char-09-fg"},"Young Man B":{fileName:"char-10",iconFileName:"char-10-icon",overlayFileName:"char-10-fg"},"Young Woman A":{fileName:"char-11",iconFileName:"char-11-icon",overlayFileName:"char-11-fg"},"Young Woman B":{fileName:"char-12",iconFileName:"char-12-icon",overlayFileName:"char-12-fg"},"Mature Man A":{fileName:"char-13",iconFileName:"char-13-icon",overlayFileName:"char-13-fg"},"Mature Man B":{fileName:"char-14",iconFileName:"char-14-icon",overlayFileName:"char-14-fg"},"Mature Woman A":{fileName:"char-15",iconFileName:"char-15-icon",overlayFileName:"char-15-fg"},"Mature Woman B":{fileName:"char-16",iconFileName:"char-16-icon",overlayFileName:"char-16-fg"},"Catgirl A":{fileName:"char-17",iconFileName:"char-17-icon",overlayFileName:"char-17-fg"},"Catgirl B":{fileName:"char-18",iconFileName:"char-18-icon",overlayFileName:"char-18-fg"}},body:{"Casual Light A":{fileName:"body-01",iconFileName:"body-01-icon"},"Casual Light B":{fileName:"body-02",iconFileName:"body-02-icon"},"Casual Light C":{fileName:"body-03",iconFileName:"body-03-icon"},"Casual Light D":{fileName:"body-04",iconFileName:"body-04-icon"},"Fur Medium A":{fileName:"body-05",iconFileName:"body-05-icon"},"Fur Medium B":{fileName:"body-06",iconFileName:"body-06-icon"},"Fur Medium C":{fileName:"body-07",iconFileName:"body-07-icon"},"Fur Medium D":{fileName:"body-08",iconFileName:"body-08-icon"},"Leather Medium A":{fileName:"body-09",iconFileName:"body-09-icon"},"Leather Medium B":{fileName:"body-10",iconFileName:"body-10-icon"},"Leather Medium C":{fileName:"body-11",iconFileName:"body-11-icon"},"Leather Medium D":{fileName:"body-12",iconFileName:"body-12-icon"},"Khakis Medium A":{fileName:"body-13",iconFileName:"body-13-icon"},"Dress Light A":{fileName:"body-14",iconFileName:"body-14-icon"},"Officer Light A":{fileName:"body-15",iconFileName:"body-15-icon"}},head:{"Witch Hat A":{fileName:"head-01",iconFileName:"head-01-icon",overlayFileName:"head-01-fg",className:"glow-above"},"Bronze Helmet A":{overlayFileName:"head-02",overlayIconFileName:"head-02-icon",className:"glow-above"},"Crown A":{overlayFileName:"head-03",overlayIconFileName:"head-03-icon",className:"glow-above"},"Top Hat A":{fileName:"head-04",iconFileName:"head-04-icon",overlayFileName:"head-04-fg",className:"glow-above"},"Top Hat B":{fileName:"head-05",iconFileName:"head-05-icon",overlayFileName:"head-05-fg",className:"glow-above"},"Top Hat C":{fileName:"head-06",iconFileName:"head-06-icon",overlayFileName:"head-06-fg",className:"glow-above"},"Crown B":{overlayFileName:"head-07",overlayIconFileName:"head-07-icon",className:"glow-above"},"Top Hat D":{overlayFileName:"head-08",overlayIconFileName:"head-08-icon",className:"glow-above"},"Top Hat E":{fileName:"head-09",iconFileName:"head-09-icon",overlayFileName:"head-09-fg",className:"glow-above"},"Bonnet A":{overlayFileName:"head-10",overlayIconFileName:"head-10-icon",className:"glow-above"},"Top Hat F":{fileName:"head-11",iconFileName:"head-11-icon",overlayFileName:"head-11-fg",className:"glow-above"},"Witch Hat B":{fileName:"head-12",iconFileName:"head-12-icon",overlayFileName:"head-12-fg",className:"glow-above"}},feet:{"Metal Boots A":{fileName:"feet-01",iconFileName:"feet-01-icon",className:"glow-below"},"Metal Boots B":{fileName:"feet-02",iconFileName:"feet-02-icon",className:"glow-below"},"Fur Boots A":{fileName:"feet-03",iconFileName:"feet-03-icon",className:"glow-below"},"Fur Boots B":{fileName:"feet-04",iconFileName:"feet-04-icon",className:"glow-below"},"Formal Shoes A":{fileName:"feet-05",iconFileName:"feet-05-icon",className:"glow-below"},"Leather Shoes A":{fileName:"feet-06",iconFileName:"feet-06-icon",className:"glow-below"},"Leather Shoes B":{fileName:"feet-07",iconFileName:"feet-07-icon",className:"glow-below"},"Casual Shoes A":{fileName:"feet-08",iconFileName:"feet-08-icon",className:"glow-below"}},hand:{"Leather Gloves A":{fileName:"hand-01",iconFileName:"hand-01-icon"},"Bronze Gloves A":{fileName:"hand-02",iconFileName:"hand-02-icon"},"Fur Gloves A":{fileName:"hand-03",iconFileName:"hand-03-icon"},"Cloth Armlets A":{fileName:"hand-04",iconFileName:"hand-04-icon"},"Leather Armlets A":{fileName:"hand-05",iconFileName:"hand-05-icon"},"Crystal Armlets A":{fileName:"hand-06",iconFileName:"hand-06-icon"}},amulet:{"Emerald Amulet":{fileName:"amulet-01",iconFileName:"amulet-01-icon"},"Diamond Choker":{fileName:"amulet-02",iconFileName:"amulet-02-icon"},"Blue Crystal":{fileName:"amulet-03",iconFileName:"amulet-03-icon"}},extra:{Bow:{fileName:"extra-01",iconFileName:"extra-01-icon"},Star:{fileName:"extra-02",iconFileName:"extra-02-icon"},"Ruby Star":{fileName:"extra-03",iconFileName:"extra-03-icon"},"Teddy Pouch":{fileName:"extra-04",iconFileName:"extra-04-icon"}},offhand:{"Officer Blade":{fileName:"offhand-01",iconFileName:"offhand-01-icon"},"Ring of Magic":{fileName:"offhand-02",iconFileName:"offhand-02-icon"},"Sapphire Whip":{fileName:"offhand-03",iconFileName:"offhand-03-icon"},Lasso:{fileName:"offhand-04",iconFileName:"offhand-04-icon"},"Teddy Bear":{fileName:"offhand-05",iconFileName:"offhand-05-icon"},"Star of Sorcery":{fileName:"offhand-06",iconFileName:"offhand-06-icon"},"Crystal Staff":{fileName:"offhand-07",iconFileName:"offhand-07-icon"}},weapon:{Sabre:{fileName:"weapon-01",iconFileName:"weapon-01-icon"},Dagger:{fileName:"weapon-02",iconFileName:"weapon-02-icon"},Shortsword:{fileName:"weapon-03",iconFileName:"weapon-03-icon"},Machete:{fileName:"weapon-04",iconFileName:"weapon-04-icon"},Gladius:{fileName:"weapon-05",iconFileName:"weapon-05-icon"},Scimitar:{fileName:"weapon-06",iconFileName:"weapon-06-icon"},"Crystal Wand":{fileName:"weapon-07",iconFileName:"weapon-07-icon"},"Plasma Sword":{fileName:"weapon-08",iconFileName:"weapon-08-icon"},"Long Whip":{fileName:"weapon-09",iconFileName:"weapon-09-icon"},"Scaled Whip":{fileName:"weapon-10",iconFileName:"weapon-10-icon"},Zephyr:{fileName:"weapon-11",iconFileName:"weapon-11-icon"},"Crystall Blade":{fileName:"weapon-12",iconFileName:"weapon-12-icon"},"Frost Wand":{fileName:"weapon-13",iconFileName:"weapon-13-icon"},"Crystal Spear":{fileName:"weapon-14",iconFileName:"weapon-14-icon"},"Officer Sword":{fileName:"weapon-15",iconFileName:"weapon-15-icon"},"Wooden Wand":{fileName:"weapon-16",iconFileName:"weapon-16-icon"}}};function ke(e){var n;const t=e.components.map((e=>"string"==typeof e?Se[e]:e)).filter(Boolean),i=t.filter((e=>e.overlayFileName||e.overlayIconFileName));t.sort(((e,n)=>{var t,a;return(null!==(t=e.zIndex)&&void 0!==t?t:Fe[e.type])-(null!==(a=n.zIndex)&&void 0!==a?a:Fe[n.type])})),i.sort(((e,n)=>{var t,a,i,o;return(null!==(a=null!==(t=e.overlayZIndex)&&void 0!==t?t:e.zIndex)&&void 0!==a?a:Fe[e.type])-(null!==(o=null!==(i=n.overlayZIndex)&&void 0!==i?i:n.zIndex)&&void 0!==o?o:Fe[n.type])}));let o=e.style;o=Object.assign(Object.assign({},o),{"--scale":null!==(n=e.scale)&&void 0!==n?n:1,"--h-factor":e.smallIcon?.125:1,"--v-factor":e.smallIcon?.125:2});let l="",s={"--glow-scale":e.smallIcon?.125:1};return t.forEach((e=>{"rank"===e.type&&e.color&&(l="glow",s=Object.assign(Object.assign({},s),{"--glow-color":e.color}))})),(0,a.jsxs)("div",Object.assign({className:u.className("character",e.className),style:o},{children:[t.map(((n,t)=>{var i,o;const r=e.smallIcon?n.iconFileName:n.fileName,c=null!==(i=n.zIndex)&&void 0!==i?i:Fe[n.type],d=n.color,m=r?`url(characters/${r}.png)`:void 0,f=n.effects,h=n.animation,p=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n.style),e.additionalComponentsStyle),{backgroundColor:d,backgroundImage:m,filter:f,animation:h,zIndex:c}),s),{"--glow-scale":(null!==(o=n.glowScale)&&void 0!==o?o:1)*(e.smallIcon?.125:1)}),g=u.className("item",n.className,e.additionalComponentsClassName,"rank"!==n.type&&!n.color&&l);return(0,a.jsx)("div",{className:g,style:p},`component-${n.type}-${t}`)})),i.map(((n,t)=>{var i,o;const r=e.smallIcon?n.overlayIconFileName:n.overlayFileName,c=10+(null!==(i=n.zIndex)&&void 0!==i?i:Fe[n.type]),d=r?`url(characters/${r}.png)`:void 0,m=Object.assign(Object.assign(Object.assign(Object.assign({},n.style),{backgroundImage:d,zIndex:c}),s),{"--glow-scale":(null!==(o=n.overlayGlowScale)&&void 0!==o?o:1)*(e.smallIcon?.125:1)}),f=u.className("item",n.className,n.overlayGlowScale&&l);return(0,a.jsx)("div",{className:f,style:m},`component-overlay-${n.type}-${t}`)})),e.children]}))}const Fe={rank:0,cloak:1,character:2,body:3,head:4,feet:4,hand:4,amulet:5,extra:5,offhand:6,weapon:7},Se={},Ce={body:[],head:[],rank:[],character:[],feet:[],hand:[],weapon:[],offhand:[],cloak:[],amulet:[],extra:[]};function Ae(){const[e,n]=(0,o.useState)({body:"",head:"",rank:"E",character:"Nobody",feet:"",hand:"",weapon:"",offhand:"",cloak:"",amulet:"",extra:""});return(0,a.jsxs)("div",Object.assign({className:"panel"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:"Preview"})),(0,a.jsx)("div",Object.assign({className:"left"},{children:(0,a.jsx)(ke,{components:Object.values(e)})})),(0,a.jsxs)("div",Object.assign({className:"panel right half"},{children:[(0,a.jsx)("div",Object.assign({className:"title-bar"},{children:"Character Design"})),["character","rank","body","head","feet","hand","cloak","amulet","weapon","offhand","extra"].map((t=>(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("div",Object.assign({className:"half right"},{children:(0,a.jsxs)("span",{children:[ne.word(t,{capitalize:!0}),":  "]})})),(0,a.jsxs)("div",Object.assign({className:"half left"},{children:[(0,a.jsx)(ke,{components:[e[t]],smallIcon:!0}),(0,a.jsxs)("select",Object.assign({name:t,value:e[t],onChange:a=>n(Object.assign(Object.assign({},e),{[t]:a.target.value})),style:{width:"100%"}},{children:["rank"!==t&&"character"!==t&&(0,a.jsx)("option",Object.assign({value:""},{children:"--"})),ke.componentsByType[t].map((e=>(0,a.jsx)("option",Object.assign({value:e.name},{children:e.name}),e.name)))]}))]})),(0,a.jsx)("hr",{className:"underlined separator"})]},`frag-${t}`)))]}))]}))}ke.componentByName=Se,ke.componentsByType=Ce,ke.registerComponent=e=>{var n,t;const a=null!==(n=e.type)&&void 0!==n?n:"extra",i=null!==(t=e.name)&&void 0!==t?t:a+"-"+(Object.keys(Se).length+1);let o={type:a,name:i};return o=Object.assign(Object.assign(Object.assign({},o),Se[i]),e),Se[o.name]=o,Ce[o.type]=Ce[o.type].filter((e=>e.name!==o.name)),Ce[o.type].push(o),Ce[o.type].sort(((e,n)=>e.name.localeCompare(n.name))),o},C.push((()=>{for(let[e,n]of Object.entries(Oe))for(let[t,a]of Object.entries(n))ke.registerComponent(Object.assign(Object.assign({},a),{type:e,name:t}))}));const Me=[{name:"Tutorial",step:0,title:"Starting Tutorial",body:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",Object.assign({className:"full"},{children:"Hi! Welcome to Lumindor."})),(0,a.jsx)("div",Object.assign({className:"full"},{children:"I don't really have anything to tell you here yet."})),(0,a.jsx)("div",Object.assign({className:"full"},{children:"These dialogs are tests of the tutorial system."}))]}),greyOut:!0}];window.addEventListener("load",(()=>(0,i.s)(U("app")).render((0,a.jsx)(I,{children:(0,a.jsx)(_e,{})}))),!1),C.push((function(e){!function(e){e.popupManager.register(...Me),e.popupManager.setPopupState("Tutorial",{})}(e),ve.registerTab({path:"/char_design",placement:"left",order:3,heading:"Character Designer",body:()=>(0,a.jsx)(Ae,{})})}))},122:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function Fn(){return Fn}__webpack_require__.d(__webpack_exports__,{Z:()=>Fn}),Fn.apply=function(e,...n){return(...t)=>e(...n,...t)},Fn.compose=function(...e){return n=>e.reduceRight(((e,n)=>n(e)),n)},Fn.chain=function(...e){return n=>e.reduce(((e,n)=>n(e)),n)},Fn.map=function(...e){return(...n)=>e.map((e=>e(...n)))},Fn.mapReduce=function(e,...n){const t=Fn.map(...n);return(...n)=>e(t(...n))},Fn.compile=function(body,thisBind,args=[],globals={},reserved=[],forceArgs=!1,forceGlobals=!1){let fnBody=body.replace(/\b\w+\b/gim,(function(e){return!e||"this"===e||reserved.includes(e)?e:args.includes(e)?(forceArgs=!0,"___param_"+e):globals[e]?(forceGlobals=!0,"___globals."+e):e})),fn;forceArgs&&(fnBody=`(function (${args.map((e=>"___param_"+e)).join(",")}) { return ${fnBody}; })`),forceGlobals&&(fnBody=`(function (___globals) { return (${fnBody}); })`);try{fn=eval(fnBody)}catch(e){fn=null}return thisBind&&"function"==typeof fn&&(fn=fn.bind(thisBind)),forceGlobals&&"function"==typeof fn&&(fn=fn(globals),thisBind&&"function"==typeof fn&&(fn=fn.bind(thisBind))),"function"!=typeof fn?forceArgs?()=>fn:Fn.compile(body,thisBind,args,globals,reserved,!0,forceGlobals):fn}}},__webpack_module_cache__={},deferred,leafPrototypes,getProto;function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(e,n,t,a)=>{if(!n){var i=1/0;for(r=0;r<deferred.length;r++){for(var[n,t,a]=deferred[r],o=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](n[l])))?n.splice(l--,1):(o=!1,a<i&&(i=a));if(o){deferred.splice(r--,1);var s=t();void 0!==s&&(e=s)}}return e}a=a||0;for(var r=deferred.length;r>0&&deferred[r-1][2]>a;r--)deferred[r]=deferred[r-1];deferred[r]=[n,t,a]},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var t=Object.create(null);__webpack_require__.r(t);var a={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var i=2&n&&e;"object"==typeof i&&!~leafPrototypes.indexOf(i);i=getProto(i))Object.getOwnPropertyNames(i).forEach((n=>a[n]=()=>e[n]));return a.default=()=>e,__webpack_require__.d(t,a),t},__webpack_require__.d=(e,n)=>{for(var t in n)__webpack_require__.o(n,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={873:0};__webpack_require__.O.j=n=>0===e[n];var n=(n,t)=>{var a,i,[o,l,s]=t,r=0;if(o.some((n=>0!==e[n]))){for(a in l)__webpack_require__.o(l,a)&&(__webpack_require__.m[a]=l[a]);if(s)var c=s(__webpack_require__)}for(n&&n(t);r<o.length;r++)i=o[r],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return __webpack_require__.O(c)},t=self.webpackChunklumindor=self.webpackChunklumindor||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var __webpack_exports__=__webpack_require__.O(void 0,[216],(()=>__webpack_require__(782)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();