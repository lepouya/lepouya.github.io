"use strict";(self.webpackChunkprogressive_mine_sweep=self.webpackChunkprogressive_mine_sweep||[]).push([[873],{449:(e,s,t)=>{t.r(s);var n=t(893),a=t(745),i=t(294);function r({frames:e=12,duration:s=1}){return(0,n.jsx)("svg",Object.assign({className:"spinner",width:"128px",height:"128px",viewBox:"0 0 100 100"},{children:Array.from(Array(e).keys()).map((t=>(0,n.jsx)("g",Object.assign({transform:`rotate(${360*t/e} 50 50)`},{children:(0,n.jsx)("rect",Object.assign({x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#32a0da"},{children:(0,n.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:`${s}s`,begin:s/e*(t-e)+"s",repeatCount:"indefinite"})}))}),`g-${t}`)))}))}var l=t(711),o=t(974);function c({board:e}){return 100*(e.cellCounts.revealed+e.cellCounts.flagged)/(e.rows*e.cols)}function u({board:e}){return e.rows*e.cols-e.numMines-e.cellCounts.revealed}function d({resourceManager:{resources:{difficulty:e}}}){return(e.value()+10)/25}function h(e,s,t,n){const a=d(e),i=g[s+":"+t];let r=e.resourceManager.resources[null!=i?i:""];if(i&&r)r.count+=1*a,n?r.extra.auto+=1:r.extra.manual+=1;else switch(s+":"+t){case"cell:unflagged":r=e.resourceManager.resources.flags,r.count-=1*a,r.extra.unflags+=1;break;case"cell:unrevealed":r=e.resourceManager.resources.cells,r.count-=1*a,r.extra.hidden+=1}}const g={"board:active":"resets","board:lost":"losses","board:won":"wins","cell:blown":"explosions","cell:hinted":"hints","cell:flagged":"flags","cell:revealed":"cells"},m={"":{min:1,max:1,inc:1},x1:{min:1,max:1,inc:1},x5:{min:1,max:5,inc:5},x10:{min:1,max:10,inc:10},"+5":{min:5,max:5,inc:1},"+10":{min:10,max:10,inc:1},max:{min:1,max:100,inc:1}};function f(e){const s=e.startsWith(".."),t=(s?e:Math.random().toString(36)).substring(2,10);return(s?"":".."+t)+(s?e.slice(10):e).split("").map((e=>e.charCodeAt(0))).map(((e,s)=>String.fromCharCode(e^t.charCodeAt(s%8)))).join("")}function p(e){const s=[],t=e._save_properties;return null!=t&&"object"==typeof t&&Array.isArray(t)&&s.push(...t),s}function v(e){if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map((e=>v(e)));if(0===Object.keys(e).length)return null;const s={},t=p(e);let n;for(n in e)if(!n.startsWith("_")&&null!=e[n]&&(0===t.length||t.includes(n))){const t=e[n];if("object"==typeof t){const e=v(t);null!=e&&(s[n.toString()]=e)}else"function"!=typeof t&&(s[n.toString()]=t)}return s}function j(e,s){const t=p(e);var n;return t.push(...s),Object.assign(e,{_save_properties:(n=t,n.filter(((e,s,t)=>t.indexOf(e)===s)))}),e}function x(e,...s){return[e,...s].flat().reduce(((e,s)=>{const t=e.find((e=>{var t,n;return(e.resource===s.resource||("string"==typeof e.resource?e.resource:e.resource.name)===("string"==typeof s.resource?s.resource:s.resource.name))&&(null!==(t=e.kind)&&void 0!==t?t:"")===(null!==(n=s.kind)&&void 0!==n?n:"")}));return t?(t.count+=s.count,e):[...e,s]}),[]).filter((({count:e})=>0!==e))}function b(e,s){return e.map((({resource:e,count:t,kind:n})=>({resource:e,count:s*t,kind:n})))}function y(e,s){return x(s.filter((({resource:s})=>{var t;return(null===(t=e.unlocked)||void 0===t||t)&&e.name===("string"==typeof s?s:s.name)})).map((({count:s,kind:t})=>{var n;const a=t?null!==(n=e.extra[t])&&void 0!==n?n:0:e.count;let i=Math.max(0,a+s);return!t&&e.maxCount&&i>e.maxCount&&(i=e.maxCount),t?e.extra[t]=i:e.count=i,[{resource:e,count:i-a,kind:t}]})).flat())}function O(e,...s){return(...t)=>e(...s,...t)}function w(e,s=0,t=1){return isNaN(e)||e<s?s:e>t?t:e}function N(e,s,t){e[s]&&t&&"object"==typeof t?e[s]=Object.assign(Object.assign({},e[s]),t):null!=t&&null!=t&&(e[s]=t)}const k={ticksPerSecond:60,framesPerSecond:10,saveFrequencySecs:60,rateUpdateSecs:1,minResourceUpdateSecs:.001,maxResourceUpdateSecs:86400,maxResourceTickSecs:1,lastReset:Date.now(),lastUpdate:Date.now(),lastSaved:0,lastLoaded:Date.now(),maxErrors:1,timeDilation:1,tutorialStep:0,tapMode:"reveal",buyAmount:"x1",theme:""};function S(e,s){switch(s){case"flag":"hidden"===e.state||"hinted"===e.state?e.state="flagged":"flagged"===e.state&&(e.state="hidden");break;case"reveal":"hidden"!==e.state&&"hinted"!==e.state||("clear"===e.contents?e.state="revealed":"mine"===e.contents&&(e.state="blown"));break;case"hint":"hidden"===e.state&&(e.state="hinted");break;case"hide":"flagged"!==e.state&&"revealed"!==e.state||(e.state="hidden")}return e}const C={hidden:0,hinted:0,flagged:0,revealed:0,blown:0},M={rows:0,cols:0,cells:[],numMines:0,state:"inactive",cellCounts:Object.assign({},C)};function T(e,s=1){var t,n;e.cellCounts=Object.assign({},C),e.numMines=0,e.cells.forEach((e=>e.forEach((e=>e.neighbors=0))));for(let s=0;s<e.rows;s++)for(let a=0;a<e.cols;a++){const i=e.cells[s][a];e.numMines+="mine"===i.contents?1:0,e.cellCounts[i.state]++,i.row=s,i.col=a,i.locked=!!i.locked||void 0,j(i,["contents","state","locked"]),i.neighbors=0;for(let r=s-1;r<=s+1;r++)for(let l=a-1;l<=a+1;l++)"mine"!==(null===(n=(null!==(t=e.cells[r])&&void 0!==t?t:[])[l])||void 0===n?void 0:n.contents)||r===s&&l===a||i.neighbors++}return"lost"===e.state||e.cellCounts.blown>=s?(e.state="lost",e.cells.forEach((s=>s.forEach((s=>{e.cellCounts[s.state]--,S(s,"reveal"),e.cellCounts[s.state]++}))))):e.cols*e.rows==0?e.state="inactive":e.cellCounts.blown+e.cellCounts.flagged===e.numMines&&0===e.cellCounts.hidden&&e.cellCounts.revealed===e.cols*e.rows-e.numMines?e.state="won":e.state="active",j(e,["rows","cols","cells"])}function R(e,s,t,n){let a=function(e,s){const t=[];for(let n=0;n<e;n++){t[n]=[];for(let e=0;e<s;e++)t[n][e]={row:n,col:e,contents:"clear",state:"hidden",neighbors:0}}return{rows:e,cols:s,cells:t,numMines:0,state:"active",cellCounts:Object.assign(Object.assign({},C),{hidden:e*s})}}(e,s);return a=function(e,s,t){var n,a;s=null!==(n=null!=s?s:t)&&void 0!==n?n:0,t=null!==(a=null!=t?t:s)&&void 0!==a?a:0;let i=w(Math.floor(s+Math.random()*(1+t-s)),0,e.rows*e.cols-e.numMines-1);for(;i>0;){const s=Math.floor(Math.random()*e.rows),t=Math.floor(Math.random()*e.cols);"clear"===e.cells[s][t].contents&&(e.cells[s][t].contents="mine",e.numMines++,i--)}return e}(a,t,n),a=T(a),a}function q(){const e={resources:{},upsert:s=>function(e,s){var t,n;const a="string"==typeof s?s:null!==(t=s.name)&&void 0!==t?t:"",i=null!==(n=e.resources[a])&&void 0!==n?n:function(e){const s={name:e,count:0,extra:{},value:e=>{var t;return e?null!==(t=s.extra[e])&&void 0!==t?t:0:s.count},cost:()=>[],rate:{value:0}};return j(s,["name","unlocked","count","maxCount","extra"]),s}(a);if("string"!=typeof s){let e;for(e in s)N(i,e,s[e])}return i.buy=(s=1,t="partial",n="")=>E(e,[{resource:i,count:s,kind:n}],t),i.add=(e,s)=>i.buy(e,"free",s),i.canBuy=(e,s)=>i.buy(e,"dry-partial",s),i.name&&(e.resources[i.name]=i),i}(e,s),get:s=>A(e,s),purchase:(s,t)=>E(e,s,t),canAfford:s=>D(e,s),update:(s,t,n)=>function(e,s,t,n){var a;const{rateUpdateSecs:i=1,minResourceUpdateSecs:r=.001,maxResourceUpdateSecs:l=86400,maxResourceTickSecs:o=1,timeDilation:c=1}=t;s||(s=Date.now());let u=w((s-(null!==(a=t.lastUpdate)&&void 0!==a?a:s))/1e3,0,l);if(!(u<r)){for(t.lastUpdate=s;u>0;){const s=w(u,r,o);Object.values(e.resources).forEach((e=>e.tick&&e.tick(s/c,n))),u-=s}Object.values(e.resources).forEach((e=>{var s,n;const a=((null!==(s=t.lastUpdate)&&void 0!==s?s:0)-(null!==(n=e.rate.lastCheck)&&void 0!==n?n:0))/1e3;a>=i&&(void 0!==e.rate.lastCount?e.rate.value=(e.count-e.rate.lastCount)/a:e.rate.value=0),(void 0===e.rate.lastCheck||void 0===e.rate.lastCount||a>=i)&&(e.rate.lastCheck=t.lastUpdate,e.rate.lastCount=e.count)}))}}(e,s,null!=t?t:{},null!=n?n:"unknown")};return e}function A(e,s){return e.resources["string"==typeof s?s:s.name]}function E(e,s,t){const n=$(e,s).map((s=>{const n=function(e,s,t,n,a){var i,r;if(!s||0===t||null!==(i=s.unlocked)&&void 0!==i&&!i)return{count:0,gain:[],cost:[]};const l=n?null!==(r=s.extra[n])&&void 0!==r?r:0:s.count;let o=Math.max(0,l+t);if(!n&&s.maxCount&&o>s.maxCount&&(o=s.maxCount),"free"===a)return{count:o-l,gain:[{resource:s,count:o-l,kind:n}],cost:[]};let c=[],u=c,d=0;for(let t=l;t<o&&("partial"!==a&&"dry-partial"!==a||(u=x(u,$(e,s.cost(t+1,n))),D(e,u)));t++)d++,c=x(c,$(e,s.cost(t+1,n)));const h=[{resource:s,count:d,kind:n}];return"dry-full"!==a&&!D(e,c)||"full"===a&&l+d!==o?{count:0,gain:[],cost:[]}:{count:d,gain:h,cost:c}}(e,s.resource,s.count,s.kind,null!=t?t:"partial");if("dry-partial"===t||"dry-full"===t)return n;{const t=y(s.resource,n.gain),o=(a=t,i=s.resource.name,r=s.kind,null!==(l=a.filter((({resource:e,kind:s})=>(null!=r?r:"")===(null!=s?s:"")&&i===("string"==typeof e?e:e.name))).map((({count:e})=>e)).pop())&&void 0!==l?l:0),c=n.cost.map((({resource:s,count:t,kind:n})=>y(A(e,s),[{resource:s,count:-t,kind:n}]))).flat();return{count:o,gain:t,cost:c}}var a,i,r,l}));return{count:n.reduce(((e,s)=>e+s.count),0),gain:x(n.map((e=>e.gain)).flat()),cost:x(n.map((e=>e.cost)).flat())}}function $(e,s){return s.map((({resource:s,count:t,kind:n})=>({resource:A(e,s),count:t,kind:null!=n?n:""}))).filter((({resource:e,count:s})=>e&&s))}function D(e,s){return $(e,x(s)).every((e=>{return s=e.resource,t=[e],(null===(n=s.unlocked)||void 0===n||n)&&0===(r=s,a=[{resource:r,count:r.count},...Object.entries(r.extra).map((([e,s])=>({resource:r,count:s,kind:e})))].filter((({count:e})=>0!==e)),i=t.filter((({resource:e})=>s.name===("string"==typeof e?e:e.name))),x(a,b(i,-1))).filter((({count:e})=>e<0)).length;var s,t,n,a,i,r}))}function I(e,{kind:s="",source:t="",min:n=0,max:a=1/0,direction:i=-1,combineWithCurrentTick:r=!1,assignToResourceTick:l=!0}={},o){const c=e.tick,u=(r,l)=>{var c;if(!t||l===t){let t=null!==(c=s?e.extra[s]:e.count)&&void 0!==c?c:0;(t>n||i>0)&&(t<a||i<0)&&(t=w(t+i*r,n,a),s?e.extra[s]=t:e.count=t,!o||t!==n&&t!==a||o(e,t,s,l))}},d=c&&r?(e,s)=>{c(e,s),u(e,s)}:u;return l&&(e.tick=d),d}const U=[JSON.parse('[{"name":"totalTime","icon":"clock","display":"time"},{"name":"activeTime","icon":"alarm","display":"time","extra":{"current":0,"max":0}},{"name":"offlineTime","icon":"user-off","display":"time","extra":{"current":0,"max":0}}]'),JSON.parse('[{"name":"rows","singularName":"row","icon":"arrows-vertical","count":3},{"name":"cols","singularName":"col","icon":"arrows-horizontal","count":3},{"name":"difficulty","icon":"adjustments-horizontal","display":"percentage","count":15},{"name":"hintQuality","icon":"bulb","display":"percentage","count":0},{"name":"resetSpeed","icon":"refresh-alert","display":"percentage","count":0,"extra":{"remainingTime":0}}]'),JSON.parse('[{"name":"wins","singularName":"win","icon":"icon-won square-check","extra":{"auto":0,"manual":0}},{"name":"losses","singularName":"lose","icon":"icon-lost square-x","extra":{"auto":0,"manual":0}},{"name":"resets","singularName":"reset","icon":"refresh","extra":{"auto":0,"manual":0}}]'),JSON.parse('[{"name":"clicks","singularName":"click","icon":"hand-click","extra":{"left":0,"right":0,"useless":0}},{"name":"cells","singularName":"cell","icon":"icon-revealed square","extra":{"auto":0,"manual":0,"hidden":0}},{"name":"hints","singularName":"hint","icon":"icon-hinted eye","extra":{"auto":0,"manual":0}},{"name":"flags","singularName":"flag","icon":"icon-flagged flag-2","extra":{"auto":0,"manual":0,"unflags":0}},{"name":"explosions","singularName":"explosion","icon":"icon-blown alert-triangle","extra":{"auto":0,"manual":0}}]')];function P(e){const s=null!=e?e:q();return U.flat().forEach((e=>s.upsert(e))),F(s.get("rows"),(e=>w(e,3,100))),F(s.get("cols"),(e=>w(e,3,100))),F(s.get("difficulty"),(e=>w(e,0,100))),F(s.get("hintQuality"),(e=>w(e,0,100))),F(s.get("resetSpeed"),((e,s)=>s?e:w(e,0,100))),s.get("rows").cost=e=>[{resource:"cells",count:Math.pow(e,2)}],s.get("cols").cost=e=>[{resource:"cells",count:Math.pow(e,2)}],s.get("hints").cost=()=>[{resource:"wins",count:1}],s.get("difficulty").cost=e=>[{resource:"flags",count:Math.floor(e/2)}],s.get("hintQuality").cost=e=>[{resource:"wins",count:1},{resource:"cells",count:e-1}],s.get("resetSpeed").cost=e=>[{resource:"resets",count:1},{resource:"cells",count:e}],I(s.get("resetSpeed"),{kind:"remainingTime"}),I(s.get("totalTime"),{direction:1}),L(s.get("activeTime"),"tick","load"),L(s.get("offlineTime"),"load","tick"),s}function F(e,s){e.value=t=>{var n;return s(null!==(n=t?e.extra[t]:e.count)&&void 0!==n?n:0,t)}}function L(e,s,t){e.tick=(n,a)=>{a===s?(e.count+=n,e.extra.current+=n,e.extra.current>e.extra.max&&(e.extra.max=e.extra.current)):a===t&&(e.extra.current=0)}}function z(){const e=window.localStorage,s="__storage_test__";if(!e)return!1;try{return e.setItem(s,s),e.removeItem(s),!0}catch(s){return s instanceof DOMException&&0!==e.length&&(22===s.code||1014===s.code||"QuotaExceededError"===s.name||"NS_ERROR_DOM_QUOTA_REACHED"===s.name)}}function W(){return{settings:Object.assign(Object.assign({},k),{lastReset:Date.now(),lastUpdate:Date.now(),lastLoaded:Date.now()}),board:Object.assign({},M),resourceManager:P(q())}}const B="Context";function G(e,s){const t=Object.assign({},e),n=!!s&&function(e,s){let t=null;if(!t)try{t=JSON.parse(f(window.atob(s)))}catch(e){t=null}if(!t)try{t=JSON.parse(window.atob(s))}catch(e){t=null}if(!t)try{t=JSON.parse(s)}catch(e){t=null}return!!t&&function(e,s){if(!s||"object"!=typeof s||"object"!=typeof e)return!1;let t;for(t in e)typeof s[t]==typeof e[t]&&(e[t]=s[t]);return!0}(e,t)}(e,s);if(n)e.settings=Object.assign(Object.assign(Object.assign({},t.settings),e.settings),{lastLoaded:Date.now()}),e.board=T(Object.assign(Object.assign({},t.board),e.board)),e.resourceManager=function(e,s){var t;let n;for(n in s)"resources"===n?Object.values(null!==(t=s[n])&&void 0!==t?t:{}).forEach((s=>e.upsert(s))):N(e,n,s[n]);return e}(t.resourceManager,e.resourceManager),e.resourceManager.update(e.settings.lastLoaded,e.settings,"load");else{let s;for(s in t)N(e,s,t[s])}return n}function H(e,s){return e.settings.lastSaved=Date.now(),function(e,s=!1){return s?JSON.stringify(v(e),null,2):window.btoa(f(JSON.stringify(v(e))))}(e,s)}const _=(0,i.createContext)(W()),J=e=>(0,n.jsx)(_.Provider,Object.assign({value:W()},{children:e.children}));function V(){return e=(0,i.useContext)(_),Object.assign(Object.assign(Object.assign({context:e},e),e.resourceManager),{setBoard:s=>e.board=s,resource:s=>e.resourceManager.get(s),load:()=>{return G(e,(s=B,z()?window.localStorage.getItem(s):null));var s},loadAs:s=>G(e,s),save:s=>{return t=B,n=H(e,s),void(z()&&n&&window.localStorage.setItem(t,n));var t,n},saveAs:s=>H(e,s),reset:()=>function(e){var s;s=B,z()&&window.localStorage.removeItem(s);const t=W();let n;for(n in t)N(e,n,t[n])}(e)});var e}function Q(e){var s,t;const n="string"==typeof e?{id:e}:e;let a,i=document.getElementById(null!==(s=n.id)&&void 0!==s?s:"");for(a in i||(i=document.createElement(null!==(t=n.tagName)&&void 0!==t?t:"div"),document.body.appendChild(i)),n)N(i,a,n[a]);return i}function Y(e){e?document.documentElement.setAttribute("theme",e):document.documentElement.removeAttribute("theme")}const Z=JSON.parse('{"hidden":"question-mark","hinted":"eye","flagged":"flag-2","blown":"alert-triangle","revealed":["square-dot","square-1","square-2","square-3","square-4","square-5","square-6","square-7","square-8","square"]}');var K=t(394);function X(e){var s,t,a,i,r,l;const o=null!==(t=null===(s=e.cell)||void 0===s?void 0:s.state)&&void 0!==t?t:e.state,c=null!==(i=null===(a=e.cell)||void 0===a?void 0:a.neighbors)&&void 0!==i?i:e.neighbors;let u=e.icon;if(!u){const e=Z[null!=o?o:"hidden"];if(e instanceof Array)u=e[null!=c?c:0];else{if(null==e)return null;u=e}}const d=u.split(/\s+/).filter((e=>e.trim().length>0));u=null!==(r=d.pop())&&void 0!==r?r:u;let h=null!==(l=d.pop())&&void 0!==l?l:e.color;const g=["icon"];return u&&g.push("icon-"+u),o&&g.push("icon-"+o),h&&!h.startsWith("#")&&(g.push(h),h=void 0),e.className&&g.push(e.className),(0,n.jsx)("svg",Object.assign({className:g.join(" "),width:e.size,height:e.size,color:h},{children:(0,n.jsx)("use",{xlinkHref:`#tabler-${u}`})}))}function ee(e,s="expanded",t=!1,n=("expanded"===s?", ":":"),a="",i="",r=""){if(i.length>0&&e<0)return i;if(a.length>0&&0===e)return a;let l=Math.floor(e/1e3),o=Math.floor(e-1e3*l),c=Math.floor(l/60);l-=60*c;let u=Math.floor(c/60);c-=60*u;let d=Math.floor(u/24);u-=24*d;let h=Math.floor(d/365);if(d-=365*h,t||(o=0),a.length>0&&d+u+c+l+o===0)return a;let g=[];return g="expanded"!==s?[h>0?h.toFixed(0):"",d>0?d.toFixed(0):"",u>0||"compact"===s?u.toFixed(0):"",c>0||"compact"===s?c.toFixed(0):"",(l+o/1e3).toFixed(!t||"tiny"===s&&0===o?0:3)].map((e=>"compact"!==s||1!==e.length&&1!==e.indexOf(".")?e:"0"+e)):[[h,"year"],[d,"day"],[u,"hour"],[c,"minute"],[l,"second",h+d+u+c===0,o]].map((([e,s,t=!1,n=0])=>e>0||n>0||t&&0===e?e.toString()+(n>0?"."+n.toString():"")+" "+s+(1===e?"":"s"):"")),g.filter((e=>e.length>0)).join(n)+(r.length>0?" "+r:"")}window.addEventListener("load",(()=>Q("icon").innerHTML=K),!1);const se={floor:Math.floor,round:Math.round,ceil:Math.ceil};function te(e,s,t){const n=Math.pow(10,s);return se[t](e*n)/n}const ne={tiny:4,compact:9,expanded:21},ae={number:1,percentage:1,time:1e3};function ie(e){var s,t,a,i,r,{value:l,epoch:o,name:c,resource:u={name:c,count:l},kind:d,display:h=(null!==(s=u.display)&&void 0!==s?s:"number"),length:g="expanded",rounding:m=("number"===h?"floor":"round"),showLocked:f=!1,showIcon:p=!0,showName:v=!0,showValue:j=!0,showMaxValue:x=!1,showRawValue:b=!1,showRate:y=!1,showExtras:O=!1,showRawExtras:N=O&&b,showColors:k=!1,showRateColors:S=!0,showNegatives:C=!0,showZeros:M=!0,showPlusSign:T=!1,showGrouping:R="number"===h,showZeroRates:q=!1,showRatePercentages:A="number"===h,showCapitalized:E=!0,showChrome:$=!1,precision:D=("time"===h?3:"number"===h?2:0),valuePrecision:I=D,rawValuePrecision:U=I,ratePrecision:P=("time"===h?0:D),extrasPrecision:F=D,rawExtrasPrecision:L=F,reversedDirection:z=!1,prefix:W="",suffix:B="",infix:G=":",placeholder:H="-",timeSeparator:_=("expanded"===g?", ":":"),ago:J="ago",now:V="now",never:Q="never",className:Y="",style:Z}=e;const K=[];function se(e=NaN,s="",{prec:t=D,rnd:a=m,cls:i="",disp:r=h,len:l=g,neg:c=C,zero:u=M,plus:d=T,grp:f=R,color:p=k,paren:v=!1,sep:j=_,pre:x="",post:b="",ref:y=!1,dry:O=!1}){const N=te((e-(y&&o?o:0))*ae[r],t,a);if(isNaN(N)||!c&&N<0||!u&&0===N)return"";const S=[r.toString()];if(i&&S.push(i),p){const e=z?-N:+N;S.push(e>0?"positive":e<0?"negative":"zero")}let q=H;return"number"===r||"percentage"===r?(q=function(e,s=21,t=3,n=!1,a=!1){const i={style:"decimal",notation:"standard",signDisplay:n?"always":"auto",useGrouping:a,minimumIntegerDigits:1,minimumFractionDigits:0,maximumFractionDigits:w(t,0,s-1),minimumSignificantDigits:1,maximumSignificantDigits:s},r=e.toLocaleString(void 0,i);return r.length>s?(i.notation="scientific",e.toLocaleString(void 0,i)):r}(N,ne[l],t,d,f),"percentage"===r&&(q+="%")):"time"===r&&(q=y&&Q.length>0&&(e<=0||(null!=o?o:-1/0)<=0)?Q:y&&null!=o?ee(N,l,t>0,j,V,Q,J):ee(N,l,t>0),d&&N>=0&&"expanded"!==l&&(q=`+${q}`)),q=x+q+b,v&&(q=`(${q})`),O||K.push((0,n.jsx)("div",Object.assign({className:S.join(" ")},{children:q}),s)),q}function ie(e,{condition:s=!0,empties:t=!1,caps:n=E}={}){return s&&(t||null!=e&&e.length>0)?n?(null!=e?e:"").replace(/([a-z])([A-Z]|_\S)/g,((e,s,t)=>`${s} ${t.slice(-1)}`)).replace(/(?:^|\s)\S/g,(e=>e.toUpperCase())):e:null}function re(){var e,s,t;return null!==(t=null!==(e=null!=l?l:u.value?u.value(d):void 0)&&void 0!==e?e:(null!==(s=u.extra)&&void 0!==s?s:{})[null!=d?d:""])&&void 0!==t?t:u.count}const le=["resource"];if((p&&u.icon||v&&u.name)&&K.push((0,n.jsxs)("div",Object.assign({className:"name"},{children:[p&&u.icon&&u.icon.length>0?(0,n.jsx)(X,{icon:u.icon,size:"1em"}):null,ie(function(){var e,s;if(c)return c;let t=te((null!==(e=re())&&void 0!==e?e:0)*ae[h],I,m);return null!==(s=1===Math.abs(t)?u.singularName:u.pluralName)&&void 0!==s?s:u.name}(),{condition:v}),G]}),"name")),j){const e=x?se(u.maxCount,"denominator",{prec:I,pre:" / ",dry:!0}):"";se(re(),"value",{prec:I,ref:null!=o&&!isNaN(o),post:e,cls:"value"})}if(b&&se(null!=l?l:d&&u.extra?u.extra[d]:u.count,"raw-value",{disp:"number",prec:U,paren:j,cls:"raw-value"}),y&&!d&&null!=u.rate&&(null!==(t=u.rate.lastCheck)&&void 0!==t?t:0)>0&&(q||0!==u.rate.value)&&se(u.rate.value/(A&&u.rate.value>0?null!==(a=null!=l?l:u.value?u.value():u.count)&&void 0!==a?a:0:1),"rate",{disp:A&&u.rate.value>0?"percentage":h,prec:P,paren:j||b,color:S,len:A||"expanded"!==g?"tiny":"compact",cls:"rate",neg:!0,zero:!0,plus:!0,grp:!1,post:"/s"}),(O||N)&&!d&&u.extra&&Object.keys(u.extra).length>0)for(let e in u.extra)e.length>0&&(K.length>0&&K.push((0,n.jsx)("div",{className:"break"},`break-${e}`)),K.push((0,n.jsxs)("div",Object.assign({className:"extra-name"},{children:[ie(e),G]}),`extra-name-${e}`))),O&&se(u.value?u.value(e):u.extra[e],`extra-value-${e}`,{disp:e.toLowerCase().indexOf("time")>=0?"time":h,prec:F,cls:"extra-value"}),N&&se(u.extra[e],`extra-raw-${e}`,{disp:"number",prec:L,paren:O,cls:"raw-extra-value"}),y&&null!=u.rate&&(null!==(i=u.rate.lastCheck)&&void 0!==i?i:0)>0&&(q||0!==u.rate.value)&&K.push((0,n.jsx)("div",Object.assign({className:"rate"},{children:H}),`extra-rate-${e}`));f||null===(r=u.unlocked)||void 0===r||r||(le.push("locked"),K.splice(0,K.length,(0,n.jsx)("div",Object.assign({className:"placeholder"},{children:H}),"lock")));const oe=$?void 0:Z;Y&&!$&&le.push(Y);const ce=(0,n.jsxs)("div",Object.assign({className:le.join(" "),style:oe,id:`resource-${null!=c?c:u.name}`},{children:[W&&(0,n.jsx)("div",Object.assign({className:"prefix"},{children:W})),K,B&&(0,n.jsx)("div",Object.assign({className:"suffix"},{children:B}))]}));return $?(0,n.jsx)("div",Object.assign({className:Y||void 0,style:Z,id:`resource-chrome-${null!=c?c:u.name}`},{children:ce})):ce}function re({resource:e,kind:s,enabled:t=!0,count:a,maxCount:i=1/0,maxNum:r,minNum:l,increment:o,gainMultiplier:c=1,costMultiplier:u=1,prefix:d="Buy",suffix:h="",infix:g="for",and:f="&",className:p,style:v,onPurchase:j}){const{resourceManager:x,settings:{buyAmount:y}}=V(),N=x.get(e),k=function(e){var s;return null!==(s=m[null!=e?e:""])&&void 0!==s?s:m[""]}(y);function S(e,s,t,a){return e.map(((e,i)=>(0,n.jsx)(ie,{resource:"string"==typeof e.resource?{name:e.resource}:e.resource,value:e.count*s,kind:e.kind,display:"string"!=typeof e.resource?e.resource.display:"number",infix:"",prefix:i>0?f:"",showLocked:!0,showColors:!0,showChrome:!0,showPlusSign:t,className:"value-first",reversedDirection:a},"string"==typeof e.resource?e.resource:e.resource.name)))}function C(e=0,s=1){const t=null!=a?a:N.count;return w(Math.floor((t+e)/s)*s-t,0,i-t)}null!=l||(l=k.min),null!=r||(r=k.max),null!=o||(o=k.inc);let M=!0,T=N.buy(C(r,o),"dry-partial",s);T.count%o!=0&&(T=N.buy(C(T.count,o),"dry-partial",s)),(T.count<l||T.count<=0)&&(T=N.buy(Math.max(1,C(w(o,l,r))),"dry-full",s),M=!1),t||(T.cost=[]);const R=T.cost.reduce(((e,s)=>e+s.count),0),q=["buy-button",`buy-button-${M?"":"un"}affordable`,p].filter((e=>!!e));return(0,n.jsxs)("button",Object.assign({onClick:O((function(e,n){if(n.preventDefault(),!t||e<1)return;const a=N.buy(e,"partial",s);let i=a.count;1!=c&&(i+=x.purchase(b(a.gain,c-1),"free").count),1!=u&&x.purchase(b(a.cost,1-u),"free"),j&&j(N,s,i)}),M&&t?T.count:0),disabled:!M||!t,className:q.join(" "),style:v,id:`button-buy-${N.name}`},{children:[d&&(0,n.jsx)("div",Object.assign({className:"prefix"},{children:d})),S(T.gain,c,!0,!1),R>0&&g&&(0,n.jsx)("div",Object.assign({className:"infix"},{children:g})),R>0&&S(T.cost,u,!1,!0),h&&(0,n.jsx)("div",Object.assign({className:"suffix"},{children:h}))]}))}function le(e){var s,t;const a=V(),r=null!==(s=e.board)&&void 0!==s?s:a.board,l=e.cell,o=!e.board,c=(0,i.useCallback)((s=>{var t,n;s.preventDefault();const i=a.resources.clicks;if(i.count++,null!==(t=e.enabled)&&void 0!==t&&!t||l.locked)return void(o&&i.extra.useless++);const c=l.state;if(2===s.button||0===s.button&&(s.altKey||s.ctrlKey||s.metaKey||"flag"===a.settings.tapMode)?(o&&i.extra.right++,S(l,"flag")):0===s.button&&"reveal"===a.settings.tapMode&&(o&&i.extra.left++,S(l,"reveal")),c===l.state)o&&i.extra.useless++;else if(o&&(h(a,"cell",l.state,!1),"hidden"===l.state&&h(a,"cell","un"+c,!1)),"active"===r.state){let s=T(r,a.settings.maxErrors);(null!==(n=e.setBoard)&&void 0!==n?n:a.setBoard)(Object.assign({},s)),"active"!==s.state&&o&&h(a,"board",s.state,!1)}}),[r,l,e.enabled]),u=Math.floor((null!==(t=e.boardWidth)&&void 0!==t?t:640)*e.cellRatio/100),d=`min(${e.cellRatio}vmin, ${u}px)`;return(0,n.jsx)("td",Object.assign({className:`cell cell-${l.state}`,onClick:c,onContextMenu:c,id:`col-${l.col}`},{children:(0,n.jsx)("div",Object.assign({style:{width:d,height:d},id:`cell-${l.row}-${l.col}`},{children:(0,n.jsx)(X,{cell:l,size:"80%"})}))}))}function oe(e){var s;const t=V(),a=null!==(s=e.board)&&void 0!==s?s:t.board,r=(0,i.useMemo)((function(){const s=Math.floor(95/Math.max(a.rows,a.cols));return(0,n.jsx)("table",Object.assign({id:a===t.board?"board-main":"board-custom",className:"board"},{children:(0,n.jsx)("tbody",{children:a.cells.flatMap(((t,i)=>(0,n.jsx)("tr",Object.assign({id:`row-${i}`},{children:t.map(((t,r)=>(0,n.jsx)(le,{cell:t,cellRatio:s,enabled:"active"===a.state,board:e.board,setBoard:e.setBoard,boardWidth:e.boardWidth},`cell:${i}:${r}`)))}),`row:${i}:*`)))})}))}),[a]);return(0,n.jsx)("div",Object.assign({className:"minefield"},{children:r}))}function ce(e){const[s,t]=(0,i.useState)(M);return(0,i.useEffect)((()=>{var s,n,a,i,r,l,o;const c=R(e.rows,e.cols,e.randomMines);e.unlocks&&e.unlocks.length>0&&c.cells.forEach((e=>e.forEach((e=>e.locked=!0)))),null===(s=e.mines)||void 0===s||s.forEach((([e,s])=>c.cells[e][s].contents="mine")),null===(n=e.hints)||void 0===n||n.forEach((([e,s])=>c.cells[e][s].state="hinted")),null===(a=e.flags)||void 0===a||a.forEach((([e,s])=>c.cells[e][s].state="flagged")),null===(i=e.reveals)||void 0===i||i.forEach((([e,s])=>c.cells[e][s].state="revealed")),null===(r=e.blowns)||void 0===r||r.forEach((([e,s])=>c.cells[e][s].state="blown")),null===(l=e.locks)||void 0===l||l.forEach((([e,s])=>c.cells[e][s].locked=!0)),null===(o=e.unlocks)||void 0===o||o.forEach((([e,s])=>c.cells[e][s].locked=!1)),t(T(c))}),[e]),(0,n.jsx)(oe,{board:s,setBoard:t,boardWidth:e.size})}function ue(){const{context:e,board:s,resources:{wins:t,cells:a}}=V();return(0,n.jsxs)("div",Object.assign({className:`panel board-state-${s.state}`,id:"resource-bar"},{children:[(0,n.jsx)(ie,{resource:t,precision:0,showRate:!0,showZeroRates:!0,showRatePercentages:!1,showChrome:!0}),(0,n.jsx)(ie,{resource:a,precision:0,showRate:!0,showZeroRates:!0,showRatePercentages:!1,showChrome:!0}),(0,n.jsx)("hr",{className:"separator"}),(0,n.jsx)(ie,{name:"Board",suffix:`${s.rows}x${s.cols}`,showChrome:!0}),(0,n.jsx)(ie,{name:"progress",value:c(e),display:"percentage",showChrome:!0}),(0,n.jsx)(ie,{resource:{name:"Mines",count:s.cellCounts.flagged,maxCount:s.numMines},showMaxValue:!0,showChrome:!0})]}))}const de=JSON.parse('{"active":["Game in progress..."],"inavtive":["There\'s no game yet...?","Hmm... seems like you should reset the board.","Game is inactive :("],"won":["Hooray!!!","Minefield cleared!!","You win!","Game won!","Success!","Amazing job!!!","WIN!","#winning","Sweet!","We\'re all safe again"],"lost":["Oh no! :(","KABOOOM!!!!!","Minefield blown :/","TOTAL CATASTROPHIC LOSS OF EVERYTHING!!!!","Game lost!","You lost this one :(","#fail","What a tragedy...","It wasn\'t your fault!","sadpanda","Rave ruined"],"resetting":["Un-de-mining the playing field","Resetting the board","Ordering new landmines","Contemplating modern warfare","Bulldozing the ground","Wasting time for no reason","Treating shellshock","Rasterizing cell graphics","Writing new reset messages","Pre-computing game features","Calculating total land area","Integrating the area under board","Un-defusing the mines","Calling technical support","Taking the hobbits to Isengard","Reticulating splines","Swapping time and space","Grabbing extra minions","Rupturing the subspace barrier","Creating an anti-time reaction","Converging tachyon pulses","Bypassing control of the matter-antimatter integrator","Adjusting the dilithium crystal converter assembly","Reversing the shield polarity","Disrupting warp fields with an inverse graviton burst","Checking the gravitational constant in your locale","Reconfoobling energymotron","Counting backwards from Infinity","Creating time-loop inversion field","Computing chance of success","Adjusting flux capacitor","Connecting Neurotoxin Storage Tank","Constructing additional pylons","Roping some seaturtles","Locating Jebediah Kerman","Dividing by zero","Cracking military-grade encryption","Simulating traveling salesman","Proving P=NP","Entangling superstrings","Twiddling thumbs","Searching for plot device","Trying to sort in O(n)","Installing dependencies","Ordering 1s and 0s","Mining some bitcoins","Downloading more RAM","Updating to Windows Vista","Deleting System32 folder","Initializing the initializer","Optimizing the optimizer","Updating the updater","Downloading the downloader","Debugging the debugger","Discovering new ways of making you wait","Pushing pixels","Building a wall"]}');function he(e,s){var t,n;const a=de[e];return a&&0!==a.length?"string"==typeof a?a:(null!=s||(s=Math.floor(Math.random()*a.length)),null!==(n=null!==(t=a[s])&&void 0!==t?t:a[0])&&void 0!==n?n:e):e}function ge({value:e,minValue:s=0,maxValue:t=1,width:a="100px",height:i=a,showPercent:r=!1,className:l,children:o}){const c=(e-s)/(t-s);return(0,n.jsxs)("div",Object.assign({className:`progress-circle ${null!=l?l:""}`,style:{minWidth:a,minHeight:i}},{children:[(0,n.jsxs)("div",Object.assign({className:"children"},{children:[r&&(0,n.jsxs)("span",{children:[Math.floor(100*c),"%"]}),o]})),(0,n.jsxs)("svg",Object.assign({viewBox:"-55 -55 110 110",width:a,height:i},{children:[(0,n.jsx)("circle",{className:"secondary",r:50}),(0,n.jsx)("circle",{className:"primary",r:50,transform:"rotate(-90)",strokeDasharray:100*Math.PI,strokeDashoffset:100*Math.PI*(1-c)})]}))]}))}function me(){const{context:e,board:s,setBoard:t,settings:a,resources:{rows:r,cols:l,resetSpeed:o}}=V(),[c,u]=(0,i.useState)(s.state),[d,g]=(0,i.useState)(!1),[m,f]=(0,i.useState)(""),[p,v]=(0,i.useState)(0);if((0,i.useEffect)((()=>{u(he(s.state))}),[s,s.state]),0===s.rows||0===s.cols||"inactive"===s.state)return b(!0),null;if("active"===s.state)return null;const j=function({resourceManager:{resources:{rows:e,cols:s,difficulty:t,resetSpeed:n}}}){return(1-n.value()/100)*Math.sqrt(e.value()*s.value()*(t.value()/100)*10)}(e),x=o.extra.remainingTime;function b(s=!1){h(e,"board","active",s);const n=function({resourceManager:{resources:{rows:e,cols:s,difficulty:t}}}){return e.value()*s.value()*(t.value()/100)}(e);t(R(r.value(),l.value(),Math.floor(n),Math.ceil(n))),a.tapMode="reveal"}return d&&(!m||j-x>=p)&&(f(he("resetting")),v(p+2)),d&&0===x&&(g(!1),b()),(0,n.jsx)("div",Object.assign({className:"reset-box"},{children:(0,n.jsxs)("div",Object.assign({className:`panel shadow board-state-${s.state}`},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:c})),(0,n.jsx)("div",Object.assign({className:"full center"},{children:"Game over!"})),(0,n.jsx)("div",Object.assign({className:"full center"},{children:"You may reset the board to receive a brand new game to play:"})),(0,n.jsxs)(ge,Object.assign({value:d?(j-x)/j:0,showPercent:d,width:"100%",height:"50%"},{children:[!d&&(0,n.jsx)("input",{type:"button",value:"Reset!",disabled:d,onClick:function(e){e.preventDefault(),d||(g(!0),v(0),o.extra.remainingTime=j)},id:"button-reset"}),d&&(0,n.jsxs)("span",{children:[m,"..."]})]}))]}))}))}function fe({showTapMode:e=!0,showBuyAmount:s=!0}){const{settings:t}=V(),[a,r]=(0,i.useState)(t.tapMode),[l,o]=(0,i.useState)(t.buyAmount);function c(e){e.preventDefault(),t.buyAmount=e.target.value,o(t.buyAmount)}function u(e,s,a){return(0,n.jsxs)("button",Object.assign({type:"button",value:e,className:(i=e,i===t.buyAmount?"selected":"unselected"),onClick:c,id:`button-${e.replace(/\W/g,"")}`},{children:[s&&(0,n.jsx)(X,{icon:s,size:"1em"}),a]}));var i}return(0,n.jsxs)("div",Object.assign({className:"panel mode-controls"},{children:[e&&(0,n.jsxs)("div",Object.assign({className:"left"},{children:[(0,n.jsx)("span",{children:"Tap mode:"}),(0,n.jsxs)("button",Object.assign({type:"button",value:t.tapMode,onClick:function(e){e.preventDefault(),t.tapMode="reveal"===t.tapMode?"flag":"reveal",r(t.tapMode)},id:"button-tapmode"},{children:[(0,n.jsx)(X,{state:"reveal"===t.tapMode?"revealed":"flagged",neighbors:9,size:"1em"}),"reveal"===t.tapMode?"Revealing":"Flagging"]}))]})),(0,n.jsx)("div",{className:"spacer"}),s&&(0,n.jsxs)("div",Object.assign({className:"right"},{children:[(0,n.jsx)("span",{children:"Buy amount:"}),u("x1","x","1"),u("x5","arrow-bar-to-right","5"),u("+5","x","5"),u("x10","arrow-bar-to-right","10"),u("+10","x","10"),u("max",void 0,"MAX")]}))]}))}function pe(){const{context:e,board:s,setBoard:t,resources:{rows:a,cols:i,hints:r,resets:l}}=V(),o=s.rows!==a.value()||s.cols!==i.value();return(0,n.jsxs)("div",Object.assign({id:"main",className:"main"},{children:[(0,n.jsx)(ue,{}),(0,n.jsx)(me,{}),(0,n.jsx)(oe,{}),(0,n.jsx)(fe,{}),(0,n.jsxs)("div",Object.assign({className:"game-controls panel"},{children:[(0,n.jsx)("div",Object.assign({className:"half"},{children:(0,n.jsx)("button",Object.assign({className:"buy-button",onClick:function(){let n=T(s,0);t(Object.assign({},n)),h(e,"board",n.state,!1)},id:"button-reset"},{children:(0,n.jsx)(ie,{resource:l,value:1,showValue:!1,showChrome:!0,infix:"",suffix:"the Game"})}))})),(0,n.jsx)("div",Object.assign({className:"half"},{children:(0,n.jsx)(re,{resource:r,count:0,maxCount:u(e),onPurchase:function(n,a,i=0){(function(e,s,t=0,n=8,a=0){if(s=Math.floor(w(s,0,100)),t=Math.floor(w(t,0,8)),n=Math.floor(w(n,0,8)),a=w(a,0,1),0===s)return 0;const i=e.cells.flat().filter((e=>"hidden"===e.state&&"clear"===e.contents&&e.neighbors>=t&&e.neighbors<=n)).sort(((e,s)=>e.neighbors-s.neighbors));if(i.length<=s)return i.forEach((s=>{S(s,"hint"),e.cellCounts.hinted++,e.cellCounts.hidden--})),i.length;for(let t=0;t<s;t++){let s=0;const t=a,n=Math.random();s=.5===t?n:(Math.sqrt(t*t+n-2*t*n)-t)/(1-2*t),s=Math.floor(s*i.length),i.splice(s,1).map((s=>{S(s,"hint"),e.cellCounts.hinted++,e.cellCounts.hidden--}))}return s})(s,i,0,8,function({resourceManager:{resources:{hintQuality:e}}}){return e.value()/100}(e))>0&&(r.extra.manual++,t(Object.assign({},s)))}})})),o&&(0,n.jsxs)("div",Object.assign({className:"left full",id:"reset-info"},{children:["On reset, game board will change to size to",` ${a.value()}x${i.value()}`]}))]}))]}))}const ve={0:{title:"Progressive Mine Sweep",body:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",Object.assign({className:"full"},{children:"Hi! Welcome to progressive mine sweeper."})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"This is my special take on the classic minesweeper game with progressive / incremental aspects built into it."})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"The first part of this tutorial will walk you through how to play minesweeper. At any point in tutorial you can move to the next or previous pages. Feel free to skip to the next chapter if you already know how to play!"}))]}),greyOut:!0}},je={10:{title:"What is minesweeper",body:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",Object.assign({className:"full"},{children:"The game board consists of a playing field shaped like a grid of squares. There are a certain number of mines buried under this field. The objective of each game is to successfully clear all the empty cells, and flag the cells containing mines without triggering (exploding) them."})),(0,n.jsx)("div",Object.assign({className:"full center"},{children:"Sample 3x3 board:"})),(0,n.jsx)("div",Object.assign({className:"full center"},{children:(0,n.jsx)(ce,{rows:3,cols:3,randomMines:1,size:200})}))]}),greyOut:!0},15:{title:"Revealing a square",body:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",Object.assign({className:"full"},{children:"Clicking or tapping on an empty square will reveal its contents. The contents of a square is either clear or a mine. When revealing a clear square, you are given a clue to the number of mines surrounding it — in all directions, including diagonals. Revealing a mine, however, would trigger it and explode!"})),(0,n.jsx)("div",Object.assign({className:"full center"},{children:"Try clicking (or tapping) the hinted square below:"})),(0,n.jsx)("div",Object.assign({className:"full center"},{children:(0,n.jsx)(ce,{rows:3,cols:3,size:200,mines:[[2,2]],hints:[[0,0]],unlocks:[[0,0]]})}))]}),greyOut:!0},20:{title:"Revealing squares",body:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",Object.assign({className:"full"},{children:(0,n.jsxs)("span",{children:["The revealed contents of  ",(0,n.jsx)(X,{state:"revealed",neighbors:0,size:"1em"}),"  tells us there are no mines in the squares surrounding it, so it's safe to go ahead and reveal the 3 surrounding squars as well!"]})})),(0,n.jsx)("div",Object.assign({className:"full center"},{children:"Try clicking (or tapping) the hinted squares below:"})),(0,n.jsx)("div",Object.assign({className:"full center"},{children:(0,n.jsx)(ce,{rows:3,cols:3,size:200,mines:[[2,2]],reveals:[[0,0]],hints:[[0,1],[1,0],[1,1]],unlocks:[[0,1],[1,0],[1,1]]})}))]}),greyOut:!0},25:{title:"Reasoning about squares",body:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",Object.assign({className:"full"},{children:(0,n.jsxs)("span",{children:["Uh oh! The  ",(0,n.jsx)(X,{state:"revealed",neighbors:1,size:"1em"}),"  in the middle means there's one mine hidden under one of the remaining squares around the centerpiece! Better be careful with this one..."]})})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"However, we know from the other 2 squares we just revealed that there are no mines in the 2 squares immediately surrounding those places."})),(0,n.jsx)("div",Object.assign({className:"full center"},{children:(0,n.jsx)(ce,{rows:3,cols:3,size:200,mines:[[2,2]],reveals:[[0,0],[0,1],[1,0],[1,1]],hints:[[0,2],[1,2],[2,0],[2,1]],unlocks:[[0,2],[1,2],[2,0],[2,1]]})}))]}),greyOut:!0},30:{title:"Flagging squares",body:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",Object.assign({className:"full"},{children:"This brings us to the final square in the corner which is obviously a mine! You won't want to set this off!"})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"Be careful with this one. Right (or meta) click on the square to flag it, or simply toggle the tapping mode to flag squares instead of revealing:"})),(0,n.jsx)("div",Object.assign({className:"full center"},{children:(0,n.jsx)(ce,{rows:3,cols:3,size:200,mines:[[2,2]],reveals:[[0,0],[0,1],[1,0],[1,1],[0,2],[1,2],[2,0],[2,1]]})})),(0,n.jsx)("div",Object.assign({className:"full center"},{children:(0,n.jsx)(fe,{showBuyAmount:!1})}))]}),greyOut:!0,onMount:(e,s)=>()=>{xe=s.settings.tapMode},onUnmount:(e,s)=>()=>{s.settings.tapMode=xe}},35:{title:"Winning a game",body:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",Object.assign({className:"full"},{children:"No sweating if you accidentally set off the mine in the previous step."})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"Once you reveal all the squares and flag all the mines correctly, you win the playing field, and the game announces it to you."})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"Similarly, if you set off a mine, you lose the playing field and need to reset the board."})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"In either case, you will be represented with an option to reset the board and receive a brand new game to play. We can upgrade this box and its functions later on."}))]}),greyOut:!0}};let xe="reveal";const be={100:{title:"Scoring",body:(e,s)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",Object.assign({className:"full"},{children:"Scores are awarded to the player based on how many cells have been successfully marked and how many playing fields have been cleared. These rewards can be used to purchase upgrades to the game to make it more engaging or challenging."})),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)(ie,{resource:s.resourceManager.get("wins"),showChrome:!0})})),(0,n.jsx)("div",Object.assign({className:"half left"},{children:"Shows how many fields you have successfully cleared"})),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)(ie,{resource:s.resourceManager.get("cells"),showChrome:!0})})),(0,n.jsx)("div",Object.assign({className:"half left"},{children:"Shows how many cells you have cleared without exploding"}))]}),enabled:(e,s)=>s.resourceManager.resources.resets.extra.manual>0,highlightSelector:"div.panel#resource-bar",bounds:{top:"6rem + 50px",height:"400px"}},105:{title:"Other scores",body:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",Object.assign({className:"full"},{children:"There are many other scores and resources tracked in the game that you can access via the STATISTICS tab above"}))}),highlightSelector:"div#tab-stats",bounds:{left:"100% - 300px - 2rem",width:"300px",height:"200px"}},110:{title:"Upgrades",body:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",Object.assign({className:"full"},{children:"An UPGRADES tab just opened up that allows you to upgrade various aspects of the game to make it more interesting."})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"Side note: this is what makes the game progressive — sometimes also called incremenetal."})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"Head over to this tab to check out the different upgrade options available."}))]}),highlightSelector:"div#tab-upgrades",enabled:(e,s)=>s.resourceManager.resources.resets.extra.manual>0,nextStep:e=>document.location.href.includes("upgrades")?null:null==e?void 0:e.step},115:{title:"Upgrades",body:(e,s)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",Object.assign({className:"full"},{children:"You can increase the playing field size and difficulty of the game in Upgrades section. The cost of these upgrades increases over time, but you will eventually gain enough scores to upgrade them all!"})),(0,n.jsx)("div",Object.assign({className:"half left"},{children:"Game Width:"})),(0,n.jsx)("div",Object.assign({className:"half left"},{children:(0,n.jsx)(ie,{resource:s.resourceManager.get("cols"),showChrome:!0,infix:"",className:"value-first"})})),(0,n.jsx)("div",Object.assign({className:"half left"},{children:"Game Height:"})),(0,n.jsx)("div",Object.assign({className:"half left"},{children:(0,n.jsx)(ie,{resource:s.resourceManager.get("rows"),showChrome:!0,infix:"",className:"value-first"})})),(0,n.jsx)("div",Object.assign({className:"half left"},{children:"Game Difficulty:"})),(0,n.jsx)("div",Object.assign({className:"half left"},{children:(0,n.jsx)(ie,{resource:s.resourceManager.get("difficulty"),showChrome:!0,showName:!1,infix:"",className:"value-first"})}))]}),highlightSelector:"div.game-controls",bounds:{top:"26rem",height:"200px"}}},ye=Object.assign(Object.assign(Object.assign({},ve),je),be);function Oe(e,s,t){const n=s[e];if(!n)return;const a=Object.keys(s).map((e=>parseInt(e))).sort(((e,s)=>e-s)),i=a.indexOf(e),r=a[i-1],l=a[i+1],o=te(e+100,-2,"floor");return function(e,s,...t){const n=Object.assign({},s);if(e){let s;for(s in e){let a=e[s];N(n,s,"function"==typeof a?a(n,...t):a)}}return n}(n,{step:e,enabled:!0,title:`Tutorial step #${e}`,body:"...",prevStep:r,prevStepTitle:"< back",nextStep:l>=0?l:o,nextStepTitle:l>=0?"next >":"done",skipToStep:o,skipToStepTitle:"skip >>>",highlightSelector:"",greyOut:!1,bounds:{left:"50% - 200px",top:"6rem",width:"400px",height:"450px"}},t)}function we(){const e=V(),s=function(e,s,t){const n={};for(const t in e){const a=t,i=e[t],r=s?s(0,t):i;n[a]=r}return n}(ye,((s,t)=>Oe(null!=t?t:0,ye,e))),t=Object.keys(ye).map((e=>parseInt(e))).sort(((e,s)=>e-s));return(0,n.jsx)("div",Object.assign({id:"help"},{children:t.map((e=>function(e){const t=s[e];return t?(0,n.jsx)("div",Object.assign({className:"help"},{children:(0,n.jsxs)("div",Object.assign({className:"panel",id:`help-step-${e}`},{children:[null!=t.title&&""!==t.title&&(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:t.title})),t.body]}))}),`help-panel-${e}`):null}(e)))}))}const Ne=JSON.parse('{"light":"Light Mode","dark":"Dark Mode","cyan":"Chocolate","salmon":"Ocean","gold":"Gold","aqua":"Bloody Hell","jumbo-light":"Jumbo Light","jumbo-dark":"Jumbo Dark"}');function ke(){var e,s;const t=V(),[a,r]=(0,i.useState)(""),[l,c]=(0,i.useState)(!1),u=(0,o.s0)(),d=(0,o.TH)(),h=t.settings,g=Ne,m=`${d.pathname} ${d.search} ${d.hash} ${d.key}`.toLowerCase().indexOf("debug")>=0;function f(e,s){let t=parseInt(s);if(t>=1&&t<=1e3)switch(e){case"tick":h.ticksPerSecond=t;break;case"render":h.framesPerSecond=t;break;case"save":h.saveFrequencySecs=600/t}}function p(e){var s;h.theme=null!==(s=e.target.getAttribute("theme"))&&void 0!==s?s:void 0,Y(h.theme)}return(0,n.jsxs)("div",Object.assign({id:"options"},{children:[(0,n.jsxs)("div",Object.assign({className:"panel options",id:"options-theme"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Theme Options"})),(0,n.jsxs)("div",Object.assign({className:"full"},{children:["Current theme is: ",null!==(s=g[null!==(e=h.theme)&&void 0!==e?e:""])&&void 0!==s?s:"default"]})),Object.keys(g).map((e=>(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("div",Object.assign({className:"themed",id:`theme-${e}`,theme:e},{children:(0,n.jsx)("button",Object.assign({id:`button-theme-${e}`,theme:e,onClick:p},{children:g[e]}))}))}),`theme-${e}`)))]})),(0,n.jsxs)("div",Object.assign({className:"panel options",id:"options-data"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Game Data"})),(0,n.jsx)("div",Object.assign({className:"full"},{children:(0,n.jsx)(ie,{epoch:h.lastReset/1e3,value:h.lastUpdate/1e3,display:"time",precision:0,prefix:"You started this game "})})),(0,n.jsx)("div",Object.assign({className:"full"},{children:(0,n.jsx)(ie,{epoch:h.lastLoaded/1e3,value:h.lastUpdate/1e3,display:"time",precision:0,prefix:"This session started "})})),(0,n.jsx)("div",Object.assign({className:"full"},{children:(0,n.jsx)(ie,{epoch:h.lastSaved/1e3,value:h.lastUpdate/1e3,display:"time",precision:0,prefix:"Game was last saved "})})),(0,n.jsx)("hr",{className:"separator"}),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"button",value:"Load",onClick:function(){t.load()&&u({pathname:"/",search:d.search})},id:"button-load"})})),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"button",value:"Save",onClick:function(){t.save(m)},id:"button-save"})})),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"button",value:"Load from File",onClick:function(){!function(e,s){const t=document.createElement("input");t.type="file",t.addEventListener("change",(function(s){const t=s.target.files;if(!t||0===t.length||!t[0])return;const n=new FileReader;n.onload=function(s){var t;const n=null===(t=s.target)||void 0===t?void 0:t.result;n&&"string"==typeof n&&e&&e(n)},n.readAsText(t[0])}),!1),t.click()}((e=>{t.loadAs(e)&&u({pathname:"/",search:d.search})}))},id:"button-file-load"})})),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"button",value:"Save to File",onClick:function(){!function(e,s){s instanceof Blob||(s=new Blob([s],{type:"text/plain"}));const t=URL.createObjectURL(s),n=document.createElement("a");n.href=t,n.download=e,n.click(),URL.revokeObjectURL(t)}(`progressive-mine-sweep-${(new Date).toISOString().replace(/\D/g," ").trim().replace(/\D/g,"-")}`,t.saveAs(m))},id:"button-file-save"})})),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"button",value:"Import",onClick:function(){t.loadAs(a)&&u({pathname:"/",search:d.search})},id:"button-import"})})),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"button",value:"Export",onClick:function(){r(t.saveAs(m))},id:"button-export"})})),(0,n.jsx)("div",Object.assign({className:"full center",id:"export-text"},{children:(0,n.jsx)("textarea",{value:a,onChange:e=>r(e.target.value)})}))]})),(0,n.jsxs)("div",Object.assign({className:"panel options",id:"options-advanced"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Advanced Settings"})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"If you are having performance issues, increase the time between updates. Faster updating frequncies lead to better game experience but might use a lot of CPU."})),(0,n.jsx)("div",Object.assign({className:"half"},{children:"Updating frequency:"})),(0,n.jsxs)("div",Object.assign({className:"half center"},{children:[Math.floor(1e3/h.ticksPerSecond),"ms"]})),(0,n.jsx)("div",{className:"half"}),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"range",min:1,max:1e3,value:h.ticksPerSecond,onInput:e=>f("tick",e.target.value),id:"input-freq-tick"})})),(0,n.jsx)("div",{className:"full"}),(0,n.jsx)("div",Object.assign({className:"half"},{children:"Rendering frequency:"})),(0,n.jsxs)("div",Object.assign({className:"half center"},{children:[Math.floor(1e3/h.framesPerSecond),"ms"]})),(0,n.jsx)("div",{className:"half"}),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"range",min:1,max:60,value:h.framesPerSecond,onInput:e=>f("render",e.target.value),id:"input-freq-render"})})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"Change how often the game is saved in the background. More frequent saving leads to faster backups, but increases CPU and I/O usage"})),(0,n.jsx)("div",Object.assign({className:"half"},{children:"Saving frequency:"})),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)(ie,{value:h.saveFrequencySecs,display:"time",precision:0})})),(0,n.jsx)("div",{className:"half"}),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"range",min:1,max:60,value:600/h.saveFrequencySecs,onInput:e=>f("save",e.target.value),id:"input-freq-save"})}))]})),(0,n.jsxs)("div",Object.assign({className:"panel options reset",id:"options-reset"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar warning"},{children:"Game Reset"})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"WARNING: this will completely reset your game and delete all saved progress and setting. Only use this if you want to restart the game from beginning, or if something in the settings is so messed up that the game is now unplayable."})),(0,n.jsx)("div",Object.assign({className:"full"},{children:(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"checkbox",checked:l,onChange:()=>c(!l),id:"acknowledge-box"}),"I understand what this means and still want to reset the game"]})})),(0,n.jsx)("div",Object.assign({className:"full right"},{children:(0,n.jsx)("input",{type:"button",value:"Reset everything",disabled:!l,onClick:function(){l&&(confirm("Are you sure you want to reset? This cannot be undone.")?(t.reset(),u({pathname:"/",search:d.search})):c(!1))},id:"button-wipeall"})}))]})),m&&(0,n.jsxs)("div",Object.assign({className:"panel options debug",id:"options-debug"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Debug Context"})),(0,n.jsx)("div",Object.assign({className:"half"},{children:"Settings:"})),(0,n.jsx)("div",Object.assign({className:"full",id:"debug-settings"},{children:JSON.stringify(h,null,2)})),(0,n.jsx)("hr",{className:"separator"}),(0,n.jsx)("div",Object.assign({className:"half"},{children:"Resources:"})),(0,n.jsx)("div",Object.assign({className:"full",id:"debug-resources"},{children:JSON.stringify(t.resourceManager,null,2)})),(0,n.jsx)("hr",{className:"separator"}),(0,n.jsx)("div",Object.assign({className:"half"},{children:"Board:"})),(0,n.jsx)("div",Object.assign({className:"full",id:"debug-board"},{children:JSON.stringify(t.board,null,2)}))]}))]}))}function Se(e){if(null!=e.condition&&!e.condition)return null;const s=(0,o.TH)();let t=e.to.replace(/\W/g,"");return""===t&&(t="main"),(0,n.jsx)("div",Object.assign({id:`tab-${t}`},{children:(0,n.jsx)(l.OL,Object.assign({className:({isActive:e})=>e?"active":"",to:{pathname:e.to,search:s.search}},{children:e.children}))}))}function Ce(){const{resource:e}=V();function s(s){const t=e(s);return(0,n.jsx)(ie,{resource:t,length:"percentage"===t.display?"tiny":"compact",precision:"percentage"===t.display?1:void 0,showMaxValue:!0,showRate:!0,showExtras:!0,showZeroRates:!0,showRateColors:!0})}return(0,n.jsxs)("div",Object.assign({id:"stats"},{children:[(0,n.jsxs)("div",Object.assign({className:"panel stats",id:"stats-time"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Time Info"})),s("totalTime"),s("activeTime"),s("offlineTime")]})),(0,n.jsxs)("div",Object.assign({className:"panel stats",id:"stats-board"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Board Info"})),s("rows"),s("cols"),s("difficulty"),s("resetSpeed"),s("hintQuality")]})),(0,n.jsxs)("div",Object.assign({className:"panel stats",id:"stats-game"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Game Info"})),s("wins"),s("losses"),s("resets")]})),(0,n.jsxs)("div",Object.assign({className:"panel stats",id:"stats-cell"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Cell Info"})),s("cells"),s("flags"),s("hints"),s("explosions"),s("clicks")]}))]}))}function Me(){const{context:e,resources:{rows:s,cols:t,difficulty:a,hintQuality:i,resetSpeed:r}}=V();return(0,n.jsxs)("div",Object.assign({id:"upgrades"},{children:[(0,n.jsx)(ue,{}),(0,n.jsx)(fe,{}),(0,n.jsxs)("div",Object.assign({className:"game-controls panel"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Upgrades"})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:"Game Width:"})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)(ie,{resource:t,showChrome:!0,infix:"",className:"value-first"})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(re,{resource:t,prefix:"Expand",maxCount:50})})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:"Game Height:"})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)(ie,{resource:s,showChrome:!0,infix:"",className:"value-first"})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(re,{resource:s,prefix:"Expand",maxCount:50})})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:"Game Difficulty:"})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)(ie,{resource:a,showChrome:!0,showName:!1,infix:"",className:"value-first"})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(re,{resource:a,prefix:"Increase",maxCount:100})})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)("span",Object.assign({className:"computed"},{children:"Score Multiplier:"}))})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)(ie,{value:100*d(e),display:"percentage",showChrome:!0,className:"computed"})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(re,{resource:a,prefix:"Decrease",gainMultiplier:-1,enabled:a.count>0,minNum:1,maxNum:1,increment:1})})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:"Reset Speed:"})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)(ie,{resource:r,showChrome:!0,showName:!1,infix:"",className:"value-first"})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(re,{resource:r,prefix:"Speed up",maxCount:100})})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:"Hint Quality:"})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)(ie,{resource:i,showChrome:!0,showName:!1,infix:"",className:"value-first"})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(re,{resource:i,prefix:"Improve",maxCount:100})}))]}))]}))}function Te(){const{context:e,settings:s}=V(),t=Oe(s.tutorialStep,ye,e);if((0,i.useEffect)((()=>{var e;const s=null==t?void 0:t.onMount,n=null==t?void 0:t.onUnmount;let a;try{a=document.querySelectorAll(null!==(e=null==t?void 0:t.highlightSelector)&&void 0!==e?e:"")}catch(e){}return(null==t?void 0:t.enabled)&&(null==a||a.forEach((e=>e.classList.add("highlight"))),s&&s()),()=>{null==a||a.forEach((e=>e.classList.remove("highlight"))),n&&n()}}),[null==t?void 0:t.step,null==t?void 0:t.enabled]),!t||!t.enabled||t.step!==s.tutorialStep||t.step<0)return null;function a(e){return null!=e&&null!=e&&e>=0&&e!==s.tutorialStep&&e!==(null==t?void 0:t.step)}function r(e,t){t.preventDefault(),a(e)&&(s.tutorialStep=e)}function l(e){return`max(5%, 1em, min(90%, calc(100% - 2em), calc(${e})))`}const o={left:l(t.bounds.left),top:l(t.bounds.top),width:l(t.bounds.width),minHeight:l(t.bounds.height)},c=(0,n.jsx)("div",Object.assign({className:"tutorial",style:o,id:`tutorial-step-${t.step}`},{children:(0,n.jsxs)("div",Object.assign({className:"panel shadow",style:{minHeight:t.bounds.height}},{children:[null!=t.title&&""!==t.title&&(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:t.title})),t.body,a(t.prevStep)&&(0,n.jsx)("div",Object.assign({className:"prev"},{children:(0,n.jsx)("a",Object.assign({href:"",onClick:O(r,t.prevStep)},{children:t.prevStepTitle}))})),a(t.nextStep)&&(0,n.jsx)("div",Object.assign({className:"next"},{children:(0,n.jsx)("a",Object.assign({href:"",onClick:O(r,t.nextStep)},{children:t.nextStepTitle}))})),a(t.skipToStep)&&(0,n.jsx)("div",Object.assign({className:"skip"},{children:(0,n.jsx)("a",Object.assign({href:"",onClick:O(r,t.skipToStep)},{children:t.skipToStepTitle}))}))]}))}));return t.greyOut?(0,n.jsx)("div",Object.assign({className:"greyout"},{children:c})):c}function Re(){const{settings:e,resourceManager:s,save:t,resources:{resets:a}}=V(),[r,c]=(0,i.useState)(),[u,d]=(0,i.useState)(0),h=a.extra.auto+a.extra.manual>1;function g(){s.update(void 0,e,"tick"),e.lastUpdate-e.lastSaved>=1e3*e.saveFrequencySecs&&e.lastUpdate-e.lastLoaded>=1e3*e.saveFrequencySecs&&t(),d((s=>e.lastUpdate-s>=1e3/e.framesPerSecond?e.lastUpdate:s))}return(0,i.useEffect)((()=>(r&&clearInterval(r),c(setInterval(g,1e3/e.ticksPerSecond)),Y(e.theme),()=>{r&&(clearInterval(r),c(void 0))})),[e,e.ticksPerSecond,e.theme]),(0,n.jsxs)(l.UT,{children:[(0,n.jsxs)("nav",Object.assign({className:"navbar"},{children:[(0,n.jsxs)("div",Object.assign({className:"left"},{children:[(0,n.jsx)(Se,Object.assign({to:"/"},{children:"Minefield"})),(0,n.jsx)(Se,Object.assign({to:"/upgrades",condition:h},{children:"Upgrades"}))]})),(0,n.jsx)("div",{className:"spacer"}),(0,n.jsxs)("div",Object.assign({className:"right"},{children:[(0,n.jsx)(Se,Object.assign({to:"/stats"},{children:"Statistics"})),(0,n.jsx)(Se,Object.assign({to:"/help"},{children:"Help"})),(0,n.jsx)(Se,Object.assign({to:"/options"},{children:"Settings"}))]}))]})),(0,n.jsx)(Te,{}),(0,n.jsxs)(o.Z5,{children:[(0,n.jsx)(o.AW,{path:"/",element:(0,n.jsx)(pe,{})}),(0,n.jsx)(o.AW,{path:"/upgrades",element:(0,n.jsx)(Me,{})}),(0,n.jsx)(o.AW,{path:"/stats",element:(0,n.jsx)(Ce,{})}),(0,n.jsx)(o.AW,{path:"/help",element:(0,n.jsx)(we,{})}),(0,n.jsx)(o.AW,{path:"/options",element:(0,n.jsx)(ke,{})})]})]})}function qe(){const e=V(),s=(0,i.useMemo)((()=>e.saveAs(!0)),[]);return(0,n.jsxs)("div",Object.assign({id:"reset"},{children:[(0,n.jsxs)("div",Object.assign({className:"panel options"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Load Failure!"})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"Looks like something went very wrong in loading the game. It's possible that the game version is out of date, or that the save data is corrupt."})),(0,n.jsx)("hr",{className:"separator"}),(0,n.jsx)("div",Object.assign({className:"full"},{children:"For your records, here is the current contents of the save state. Keep this somewhere before resetting the game:"})),(0,n.jsx)("div",Object.assign({className:"full center"},{children:(0,n.jsx)("textarea",{value:s,readOnly:!0})}))]})),(0,n.jsxs)("div",Object.assign({className:"panel options reset"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar warning"},{children:"Game Reset"})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"WARNING: this will completely reset your game and delete all saved progress and settings. This will hard reset the game from beginning."})),(0,n.jsx)("div",Object.assign({className:"full right"},{children:(0,n.jsx)("input",{type:"button",value:"Hard Reset Everything",onClick:function(){confirm("Are you sure you want to reset? This cannot be undone.")&&(e.reset(),window.location.reload())}})}))]}))]}))}function Ae(){const{load:e}=V(),[s,t]=(0,i.useState)(!1),[a,l]=(0,i.useState)(!1);function o(){try{e(),t(!0)}catch(e){throw l(!0),e}}return(0,i.useEffect)((()=>{s||a||setTimeout(o,1)}),[s,a]),s?(0,n.jsx)(Re,{}):a?(0,n.jsx)(qe,{}):(0,n.jsx)(r,{})}window.addEventListener("load",(()=>(0,a.s)(Q("app")).render((0,n.jsx)(J,{children:(0,n.jsx)(Ae,{})}))),!1)}},e=>{e.O(0,[216,840],(()=>(449,e(e.s=449)))),e.O()}]);