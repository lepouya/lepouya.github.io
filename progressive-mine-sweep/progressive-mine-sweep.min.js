!function e(t,a,n){function s(i,o){if(!a[i]){if(!t[i]){var l="function"==typeof require&&require;if(!o&&l)return l(i,!0);if(r)return r(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var u=a[i]={exports:{}};t[i][0].call(u.exports,(function(e){return s(t[i][1][e]||e)}),u,u.exports,e,t,a,n)}return a[i].exports}for(var r="function"==typeof require&&require,i=0;i<n.length;i++)s(n[i]);return s}({1:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib"),s=e("react/jsx-runtime"),r=e("../model/GameFormulas"),i=e("../model/Resource"),o=n.__importDefault(e("../utils/clamp")),l=n.__importDefault(e("./GameContext")),c=n.__importDefault(e("./ResourceRender"));a.default=function(e){var t=e.resource,a=e.kind,n=e.enabled,u=void 0===n||n,d=e.count,m=e.maxCount,f=void 0===m?1/0:m,v=e.maxNum,h=e.minNum,g=e.increment,p=e.gainMultiplier,x=void 0===p?1:p,j=e.costMultiplier,b=void 0===j?1:j,y=e.prefix,O=void 0===y?"Buy":y,_=e.suffix,w=void 0===_?"":_,N=e.infix,C=void 0===N?"for":N,M=e.and,k=void 0===M?"&":M,R=e.className,S=e.style,D=e.onPurchase,P=(0,l.default)(),G=P.resourceManager,B=P.settings.buyAmount,F=G.get(t),T=(0,r.getBuyAmount)(B);function q(e,t,a,n){return e.map((function(e,r){return(0,s.jsx)(c.default,{resource:"string"==typeof e.resource?{name:e.resource}:e.resource,value:e.count*t,kind:e.kind,display:"string"!=typeof e.resource?e.resource.display:"number",infix:"",prefix:r>0?k:"",showLocked:!0,showColors:!0,showChrome:!0,showPlusSign:a,className:"value-first",reversedDirection:n},"string"==typeof e.resource?e.resource:e.resource.name)}))}function A(e,t){void 0===e&&(e=0),void 0===t&&(t=1);var a=null!=d?d:F.count;return(0,o.default)(Math.floor((a+e)/t)*t-a,0,f-a)}null!=h||(h=T.min),null!=v||(v=T.max),null!=g||(g=T.inc);var E=!0,I=F.buy(A(v,g),"dry-partial",a);I.count%g!=0&&(I=F.buy(A(I.count,g),"dry-partial",a)),(I.count<h||I.count<=0)&&(I=F.buy(Math.max(1,A((0,o.default)(g,h,v))),"dry-full",a),E=!1),u||(I.cost=[]);var U=I.cost.reduce((function(e,t){return e+t.count}),0),L=["buy-button","buy-button-"+(E?"":"un")+"affordable",R].filter((function(e){return!!e}));return(0,s.jsxs)("button",Object.assign({onClick:function(){return function(e){if(void 0===e&&(e=0),u&&!(e<1)){var t=F.buy(e,"partial",a),n=t.count;1!=x&&(n+=G.purchase((0,i.scaleResources)(t.gain,x-1),"free").count),1!=b&&G.purchase((0,i.scaleResources)(t.cost,1-b),"free"),D&&D(F,a,n)}}(E&&u?I.count:0)},disabled:!E||!u,className:L.join(" "),style:S},{children:[O&&(0,s.jsx)("div",Object.assign({className:"prefix"},{children:O})),q(I.gain,x,!0,!1),U>0&&C&&(0,s.jsx)("div",Object.assign({className:"infix"},{children:C})),U>0&&q(I.cost,b,!1,!0),w&&(0,s.jsx)("div",Object.assign({className:"suffix"},{children:w}))]}))}},{"../model/GameFormulas":25,"../model/Resource":27,"../utils/clamp":37,"./GameContext":3,"./ResourceRender":13,"react/jsx-runtime":"react/jsx-runtime",tslib:"tslib"}],2:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib"),s=e("react/jsx-runtime"),r=e("react"),i=e("react-router-dom"),o=n.__importDefault(e("../pages/Main")),l=n.__importDefault(e("../pages/Help")),c=n.__importDefault(e("../pages/Options")),u=n.__importDefault(e("./GameContext")),d=n.__importDefault(e("./Link")),m=n.__importDefault(e("../pages/Stats")),f=n.__importDefault(e("../pages/Upgrades"));a.default=function(){var e=(0,u.default)(),t=e.settings,a=e.resourceManager,n=e.save,v=e.resources.resets,h=(0,r.useState)(),g=h[0],p=h[1],x=(0,r.useState)(0),j=(x[0],x[1]),b=v.extra.auto+v.extra.manual>1;function y(){a.update(void 0,t,"tick"),t.lastUpdate-t.lastSaved>=1e3*t.saveFrequencySecs&&t.lastUpdate-t.lastLoaded>=1e3*t.saveFrequencySecs&&n(),j((function(e){return t.lastUpdate-e>=1e3/t.framesPerSecond?t.lastUpdate:e}))}return(0,r.useEffect)((function(){return g&&clearInterval(g),p(setInterval(y,1e3/t.ticksPerSecond)),function(){g&&(clearInterval(g),p(void 0))}}),[t,t.ticksPerSecond]),(0,s.jsxs)(i.HashRouter,{children:[(0,s.jsxs)("nav",Object.assign({className:"navbar"},{children:[(0,s.jsxs)("div",Object.assign({className:"left"},{children:[(0,s.jsx)(d.default,Object.assign({to:"/"},{children:"Minefield"})),(0,s.jsx)(d.default,Object.assign({to:"/upgrades",condition:b},{children:"Upgrades"}))]})),(0,s.jsx)("div",{className:"spacer"}),(0,s.jsxs)("div",Object.assign({className:"right"},{children:[(0,s.jsx)(d.default,Object.assign({to:"/stats"},{children:"Statistics"})),(0,s.jsx)(d.default,Object.assign({to:"/help"},{children:"Help"})),(0,s.jsx)(d.default,Object.assign({to:"/options"},{children:"Settings"}))]}))]})),(0,s.jsx)("div",Object.assign({className:"main"},{children:(0,s.jsxs)(i.Routes,{children:[(0,s.jsx)(i.Route,{path:"/",element:(0,s.jsx)(o.default,{})}),(0,s.jsx)(i.Route,{path:"/upgrades",element:(0,s.jsx)(f.default,{})}),(0,s.jsx)(i.Route,{path:"/stats",element:(0,s.jsx)(m.default,{})}),(0,s.jsx)(i.Route,{path:"/help",element:(0,s.jsx)(l.default,{})}),(0,s.jsx)(i.Route,{path:"/options",element:(0,s.jsx)(c.default,{})})]})}))]})}},{"../pages/Help":30,"../pages/Main":31,"../pages/Options":32,"../pages/Stats":34,"../pages/Upgrades":35,"./GameContext":3,"./Link":5,react:"react","react-router-dom":"react-router-dom","react/jsx-runtime":"react/jsx-runtime",tslib:"tslib"}],3:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.GameContextProvider=void 0;var n=e("react/jsx-runtime"),s=e("react"),r=e("../model/Context"),i=(0,s.createContext)((0,r.emptyContext)());a.GameContextProvider=function(e){return(0,n.jsx)(i.Provider,Object.assign({value:(0,r.emptyContext)()},{children:e.children}))},a.default=function(){return(0,r.wrapContext)((0,s.useContext)(i))}},{"../model/Context":24,react:"react","react/jsx-runtime":"react/jsx-runtime"}],4:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib"),s=e("react/jsx-runtime"),r=n.__importDefault(e("../data/cell_icons.json"));a.default=function(e){var t,a,n,i,o,l,c,u,d,m,f=e.icon;if(!f){var v=r.default[null!==(n=null!==(a=null===(t=e.cell)||void 0===t?void 0:t.state)&&void 0!==a?a:e.state)&&void 0!==n?n:"hidden"];if(v instanceof Array)f=v[null!==(l=null!==(o=null===(i=e.cell)||void 0===i?void 0:i.neighbors)&&void 0!==o?o:e.neighbors)&&void 0!==l?l:0];else{if(null==v)return null;f=v}}var h=f.split(/\s+/).filter((function(e){return e.trim().length>0}));f=null!==(c=h.pop())&&void 0!==c?c:f;var g=null!==(u=h.pop())&&void 0!==u?u:e.color,p=null!==(d=e.size)&&void 0!==d?d:24,x=null!==(m=e.stroke)&&void 0!==m?m:2;return(0,s.jsx)("svg",Object.assign({className:"icon icon-"+f,width:p,height:p,color:g,strokeWidth:x},{children:(0,s.jsx)("use",{xlinkHref:"assets/tabler-sprite-nostroke.svg#tabler-"+f})}))}},{"../data/cell_icons.json":15,"react/jsx-runtime":"react/jsx-runtime",tslib:"tslib"}],5:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("react/jsx-runtime"),s=e("react-router"),r=e("react-router-dom");a.default=function(e){if(null!=e.condition&&!e.condition)return null;var t=(0,s.useLocation)();return(0,n.jsx)("div",{children:(0,n.jsx)(r.NavLink,Object.assign({className:function(e){return e.isActive?"active":""},to:{pathname:e.to,search:t.search}},{children:e.children}))})}},{"react-router":"react-router","react-router-dom":"react-router-dom","react/jsx-runtime":"react/jsx-runtime"}],6:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib"),s=e("react/jsx-runtime"),r=e("react"),i=n.__importDefault(e("./Spinner")),o=n.__importDefault(e("./Game")),l=n.__importDefault(e("./GameContext")),c=n.__importDefault(e("../pages/Reset"));a.default=function(){var e=(0,l.default)().load,t=(0,r.useState)(!1),a=t[0],n=t[1],u=(0,r.useState)(!1),d=u[0],m=u[1];function f(){try{e(),n(!0)}catch(e){throw m(!0),e}}return(0,r.useEffect)((function(){a||d||setTimeout(f,1)}),[a,d]),a?(0,s.jsx)(o.default,{}):d?(0,s.jsx)(c.default,{}):(0,s.jsx)(i.default,{})}},{"../pages/Reset":33,"./Game":2,"./GameContext":3,"./Spinner":14,react:"react","react/jsx-runtime":"react/jsx-runtime",tslib:"tslib"}],7:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib"),s=e("react/jsx-runtime"),r=e("react"),i=e("../model/Board"),o=e("../model/Cell"),l=e("../model/GameFormulas"),c=n.__importDefault(e("./GameContext")),u=n.__importDefault(e("./Icon"));a.default=function(e){var t=e.cell,a=e.size,n=e.enabled,d=e.tapMode,m=(0,c.default)(),f=m.context,v=m.board,h=m.setBoard,g=m.resources,p=m.settings,x=(0,r.useCallback)((function(e){e.preventDefault();var a=g.clicks;if(a.count++,n){var s=t.state;if(2===e.button||0===e.button&&(e.altKey||e.ctrlKey||e.metaKey||"flag"===d)?(a.extra.right++,(0,o.actOnCell)(t,"flag")):0===e.button&&"reveal"===d&&(a.extra.left++,(0,o.actOnCell)(t,"reveal")),s===t.state)a.extra.useless++;else if((0,l.stateChanged)(f,"cell",t.state,!1),"hidden"===t.state&&(0,l.stateChanged)(f,"cell","un"+s,!1),"active"===v.state){var r=(0,i.genBoardState)(v,p.maxErrors);h(Object.assign({},r)),"active"!==r.state&&(0,l.stateChanged)(f,"board",r.state,!1)}}else a.extra.useless++}),[t,n,d]),j="min("+a+"vmin, "+Math.floor(640*a/100)+"px)";return(0,s.jsx)("td",Object.assign({className:"cell cell-"+t.state,onClick:x,onContextMenu:x},{children:(0,s.jsx)("div",Object.assign({style:{width:j,height:j}},{children:(0,s.jsx)(u.default,{cell:t,size:"80%"})}))}))}},{"../model/Board":22,"../model/Cell":23,"../model/GameFormulas":25,"./GameContext":3,"./Icon":4,react:"react","react/jsx-runtime":"react/jsx-runtime",tslib:"tslib"}],8:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib"),s=e("react/jsx-runtime"),r=e("react"),i=n.__importDefault(e("./MineCell")),o=n.__importDefault(e("../utils/clamp")),l=n.__importDefault(e("./GameContext"));a.default=function(){var e=(0,l.default)(),t=e.board,a=e.settings.tapMode,n=(0,r.useMemo)((function(){var e=Math.floor(95/Math.max(t.rows,t.cols)),n=(0,o.default)(e,2,30);return(0,s.jsx)("table",{children:(0,s.jsx)("tbody",{children:t.cells.flatMap((function(e,r){return(0,s.jsx)("tr",{children:e.map((function(e,o){return(0,s.jsx)(i.default,{cell:e,size:n,enabled:"active"===t.state,tapMode:a},"cell:"+r+":"+o)}))},"row:"+r+":*")}))})})}),[t,a]);return(0,s.jsx)("div",Object.assign({className:"minefield"},{children:n}))}},{"../utils/clamp":37,"./GameContext":3,"./MineCell":7,react:"react","react/jsx-runtime":"react/jsx-runtime",tslib:"tslib"}],9:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib"),s=e("react/jsx-runtime"),r=n.__importDefault(e("./GameContext")),i=n.__importDefault(e("./Icon"));a.default=function(e){var t=e.showTapMode,a=void 0===t||t,n=e.showBuyAmount,o=void 0===n||n,l=(0,r.default)().settings;function c(e){l.buyAmount=e.target.value}function u(e){return e===l.buyAmount?"selected":"unselected"}return(0,s.jsxs)("div",Object.assign({className:"panel mode-controls"},{children:[a&&(0,s.jsxs)("div",Object.assign({className:"left"},{children:[(0,s.jsx)("span",{children:"Tap mode:"}),(0,s.jsxs)("button",Object.assign({type:"button",value:l.tapMode,onClick:function(){l.tapMode="reveal"===l.tapMode?"flag":"reveal"}},{children:[(0,s.jsx)(i.default,{state:"reveal"===l.tapMode?"revealed":"flagged",neighbors:9,size:"1em"}),"reveal"===l.tapMode?"Revealing":"Flagging"]}))]})),(0,s.jsx)("div",{className:"spacer"}),o&&(0,s.jsxs)("div",Object.assign({className:"right"},{children:[(0,s.jsx)("span",{children:"Buy amount:"}),(0,s.jsxs)("button",Object.assign({type:"button",value:"x1",className:u("x1"),onClick:c},{children:[(0,s.jsx)(i.default,{icon:"x",size:"1em"}),"1"]})),(0,s.jsxs)("button",Object.assign({type:"button",value:"x5",className:u("x5"),onClick:c},{children:[(0,s.jsx)(i.default,{icon:"arrow-bar-to-right",size:"1em"}),"5"]})),(0,s.jsxs)("button",Object.assign({type:"button",value:"+5",className:u("+5"),onClick:c},{children:[(0,s.jsx)(i.default,{icon:"x",size:"1em"}),"5"]})),(0,s.jsxs)("button",Object.assign({type:"button",value:"x10",className:u("x10"),onClick:c},{children:[(0,s.jsx)(i.default,{icon:"arrow-bar-to-right",size:"1em"}),"10"]})),(0,s.jsxs)("button",Object.assign({type:"button",value:"+10",className:u("+10"),onClick:c},{children:[(0,s.jsx)(i.default,{icon:"x",size:"1em"}),"10"]})),(0,s.jsx)("button",Object.assign({type:"button",value:"max",className:u("max"),onClick:c},{children:"MAX"}))]}))]}))}},{"./GameContext":3,"./Icon":4,"react/jsx-runtime":"react/jsx-runtime",tslib:"tslib"}],10:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("react/jsx-runtime");a.default=function(e){var t=e.value,a=e.minValue,s=void 0===a?0:a,r=e.maxValue,i=void 0===r?1:r,o=e.width,l=void 0===o?"100px":o,c=e.height,u=void 0===c?l:c,d=e.showPercent,m=void 0!==d&&d,f=e.className,v=e.children,h=(t-s)/(i-s);return(0,n.jsxs)("div",Object.assign({className:"progress-circle "+(null!=f?f:""),style:{minWidth:l,minHeight:u}},{children:[(0,n.jsxs)("div",Object.assign({className:"children"},{children:[m&&(0,n.jsxs)("span",{children:[Math.floor(100*h),"%"]}),v]})),(0,n.jsxs)("svg",Object.assign({viewBox:"-55 -55 110 110",width:l,height:u},{children:[(0,n.jsx)("circle",{className:"secondary",r:50}),(0,n.jsx)("circle",{className:"primary",r:50,transform:"rotate(-90)",strokeDasharray:100*Math.PI,strokeDashoffset:100*Math.PI*(1-h)})]}))]}))}},{"react/jsx-runtime":"react/jsx-runtime"}],11:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib"),s=e("react/jsx-runtime"),r=e("react"),i=n.__importDefault(e("./GameContext")),o=n.__importDefault(e("../utils/message")),l=n.__importDefault(e("./ProgressCircle")),c=e("../model/Board"),u=e("../model/GameFormulas");a.default=function(){var e=(0,i.default)(),t=e.context,a=e.board,n=e.setBoard,d=e.resources,m=d.rows,f=d.cols,v=d.resetSpeed,h=(0,r.useState)(a.state),g=h[0],p=h[1],x=(0,r.useState)(!1),j=x[0],b=x[1],y=(0,r.useState)(""),O=y[0],_=y[1],w=(0,r.useState)(0),N=w[0],C=w[1];if((0,r.useEffect)((function(){p((0,o.default)(a.state))}),[a,a.state]),0===a.rows||0===a.cols||"inactive"===a.state)return R(),null;if("active"===a.state)return null;var M=(0,u.resetTimeFormula)(t),k=v.extra.remainingTime;function R(){(0,u.stateChanged)(t,"board","active",0===a.rows||0===a.cols);var e=(0,u.numMinesFormula)(t);n((0,c.genBoard)(m.value(),f.value(),Math.floor(e),Math.ceil(e)))}return j&&(!O||M-k>=N)&&(_((0,o.default)("resetting")),C(N+2)),j&&0===k&&(b(!1),R()),(0,s.jsx)("div",Object.assign({className:"reset-box board-state-"+a.state},{children:(0,s.jsxs)("div",Object.assign({className:"panel"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:g})),(0,s.jsx)("div",Object.assign({className:"full center"},{children:"Game over!"})),(0,s.jsx)("div",Object.assign({className:"full center"},{children:"You may reset the board to receive a brand new game to play:"})),(0,s.jsxs)(l.default,Object.assign({value:j?(M-k)/M:0,showPercent:j,width:"100%",height:"50%"},{children:[!j&&(0,s.jsx)("input",{type:"button",value:"Reset!",disabled:j,onClick:function(){j||(b(!0),C(0),v.extra.remainingTime=M)}}),j&&(0,s.jsx)("span",{children:O})]}))]}))}))}},{"../model/Board":22,"../model/GameFormulas":25,"../utils/message":42,"./GameContext":3,"./ProgressCircle":10,react:"react","react/jsx-runtime":"react/jsx-runtime",tslib:"tslib"}],12:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib"),s=e("react/jsx-runtime"),r=e("../model/GameFormulas"),i=n.__importDefault(e("./GameContext")),o=n.__importDefault(e("./ResourceRender"));a.default=function(){var e=(0,i.default)(),t=e.context,a=e.board,n=e.resources,l=n.wins,c=n.cells;return(0,s.jsxs)("div",Object.assign({className:"panel board-state-"+a.state},{children:[(0,s.jsx)(o.default,{resource:l,precision:0,showRate:!0,showZeroRates:!0,showRatePercentages:!1,showChrome:!0}),(0,s.jsx)(o.default,{resource:c,precision:0,showRate:!0,showZeroRates:!0,showRatePercentages:!1,showChrome:!0}),(0,s.jsx)("hr",{className:"separator"}),(0,s.jsx)(o.default,{name:"Board",suffix:a.rows+"x"+a.cols,showChrome:!0}),(0,s.jsx)(o.default,{name:"progress",value:(0,r.boardProgressFormula)(t),display:"percentage",showChrome:!0}),(0,s.jsx)(o.default,{resource:{name:"Mines",count:a.cellCounts.flagged,maxCount:a.numMines},showMaxValue:!0,showChrome:!0})]}))}},{"../model/GameFormulas":25,"./GameContext":3,"./ResourceRender":13,"react/jsx-runtime":"react/jsx-runtime",tslib:"tslib"}],13:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib"),s=e("react/jsx-runtime"),r=n.__importDefault(e("./Icon")),i=e("../utils/format"),o=n.__importDefault(e("../utils/round")),l={tiny:4,compact:9,expanded:21},c={number:1,percentage:1,time:1e3};a.default=function(e){var t,a,n,u,d,m=e.value,f=e.epoch,v=e.name,h=e.resource,g=void 0===h?{name:v,count:m}:h,p=e.kind,x=void 0===p?void 0:p,j=e.display,b=void 0===j?null!==(t=g.display)&&void 0!==t?t:"number":j,y=e.length,O=void 0===y?"expanded":y,_=e.rounding,w=void 0===_?"number"===b?"floor":"round":_,N=e.showLocked,C=void 0!==N&&N,M=e.showIcon,k=void 0===M||M,R=e.showName,S=void 0===R||R,D=e.showValue,P=void 0===D||D,G=e.showMaxValue,B=void 0!==G&&G,F=e.showRawValue,T=void 0!==F&&F,q=e.showRate,A=void 0!==q&&q,E=e.showExtras,I=void 0!==E&&E,U=e.showRawExtras,L=void 0===U?I&&T:U,z=e.showColors,H=void 0!==z&&z,W=e.showRateColors,V=void 0===W||W,Q=e.showNegatives,J=void 0===Q||Q,Y=e.showZeros,Z=void 0===Y||Y,K=e.showPlusSign,X=void 0!==K&&K,$=e.showGrouping,ee=void 0===$?"number"===b:$,te=e.showZeroRates,ae=void 0!==te&&te,ne=e.showRatePercentages,se=void 0===ne?"number"===b:ne,re=e.showCapitalized,ie=void 0===re||re,oe=e.showChrome,le=void 0!==oe&&oe,ce=e.precision,ue=void 0===ce?"time"===b?3:"number"===b?2:0:ce,de=e.valuePrecision,me=void 0===de?ue:de,fe=e.rawValuePrecision,ve=void 0===fe?me:fe,he=e.ratePrecision,ge=void 0===he?"time"===b?0:ue:he,pe=e.extrasPrecision,xe=void 0===pe?ue:pe,je=e.rawExtrasPrecision,be=void 0===je?xe:je,ye=e.reversedDirection,Oe=void 0!==ye&&ye,_e=e.prefix,we=void 0===_e?"":_e,Ne=e.suffix,Ce=void 0===Ne?"":Ne,Me=e.infix,ke=void 0===Me?":":Me,Re=e.placeholder,Se=void 0===Re?"-":Re,De=e.timeSeparator,Pe=void 0===De?"expanded"===O?", ":":":De,Ge=e.ago,Be=void 0===Ge?"ago":Ge,Fe=e.now,Te=void 0===Fe?"now":Fe,qe=e.never,Ae=void 0===qe?"never":qe,Ee=e.className,Ie=void 0===Ee?"":Ee,Ue=e.style,Le=[];function ze(e,t,a){void 0===e&&(e=NaN),void 0===t&&(t="");var n=a.prec,r=void 0===n?ue:n,u=a.rnd,d=void 0===u?w:u,m=a.cls,v=void 0===m?"":m,h=a.disp,g=void 0===h?b:h,p=a.len,x=void 0===p?O:p,j=a.neg,y=void 0===j?J:j,_=a.zero,N=void 0===_?Z:_,C=a.plus,M=void 0===C?X:C,k=a.grp,R=void 0===k?ee:k,S=a.color,D=void 0===S?H:S,P=a.paren,G=void 0!==P&&P,B=a.sep,F=void 0===B?Pe:B,T=a.pre,q=void 0===T?"":T,A=a.post,E=void 0===A?"":A,I=a.ref,U=void 0!==I&&I,L=a.dry,z=void 0!==L&&L,W=(0,o.default)((e-(U&&f?f:0))*c[g],r,d);if(isNaN(W)||!y&&W<0||!N&&0===W)return"";var V=[g.toString()];if(v&&V.push(v),D){var Q=Oe?-W:+W;V.push(Q>0?"positive":Q<0?"negative":"zero")}var Y=Se;return"number"===g||"percentage"===g?(Y=(0,i.formatNumber)(W,l[x],r,M,R),"percentage"===g&&(Y+="%")):"time"===g&&(Y=U&&Ae.length>0&&(e<=0||(null!=f?f:-1/0)<=0)?Ae:U&&null!=f?(0,i.formatTime)(W,x,r>0,F,Te,Ae,Be):(0,i.formatTime)(W,x,r>0),M&&W>=0&&"expanded"!==x&&(Y="+"+Y)),Y=q+Y+E,G&&(Y="("+Y+")"),z||Le.push((0,s.jsx)("div",Object.assign({className:V.join(" ")},{children:Y}),t)),Y}function He(e,t){var a=void 0===t?{}:t,n=a.condition,s=void 0===n||n,r=a.empties,i=void 0!==r&&r,o=a.caps,l=void 0===o?ie:o;return s&&(i||null!=e&&e.length>0)?l?(null!=e?e:"").replace(/([a-z])([A-Z]|_\S)/g,(function(e,t,a){return t+" "+a.slice(-1)})).replace(/(?:^|\s)\S/g,(function(e){return e.toUpperCase()})):e:null}function We(){var e,t,a;return null!==(a=null!==(e=null!=m?m:g.value?g.value(x):void 0)&&void 0!==e?e:(null!==(t=g.extra)&&void 0!==t?t:{})[null!=x?x:""])&&void 0!==a?a:g.count}var Ve=["resource"];if((k&&g.icon||S&&g.name)&&Le.push((0,s.jsxs)("div",Object.assign({className:"name"},{children:[k&&g.icon&&g.icon.length>0?(0,s.jsx)(r.default,{icon:g.icon,size:"1em"}):null,He(function(){var e,t;if(v)return v;var a=(0,o.default)((null!==(e=We())&&void 0!==e?e:0)*c[b],me,w);return null!==(t=1===Math.abs(a)?g.singularName:g.pluralName)&&void 0!==t?t:g.name}(),{condition:S}),ke]}),"name")),P){var Qe=B?ze(g.maxCount,"denominator",{prec:me,pre:" / ",dry:!0}):"";ze(We(),"value",{prec:me,ref:null!=f&&!isNaN(f),post:Qe,cls:"value"})}if(T&&ze(null!=m?m:x&&g.extra?g.extra[x]:g.count,"raw-value",{disp:"number",prec:ve,paren:P,cls:"raw-value"}),A&&!x&&null!=g.rate&&(null!==(a=g.rate.lastCheck)&&void 0!==a?a:0)>0&&(ae||0!==g.rate.value)&&ze(g.rate.value/(se&&g.rate.value>0?null!==(n=null!=m?m:g.value?g.value():g.count)&&void 0!==n?n:0:1),"rate",{disp:se&&g.rate.value>0?"percentage":b,prec:ge,paren:P||T,color:V,len:se||"expanded"!==O?"tiny":"compact",cls:"rate",neg:!0,zero:!0,plus:!0,grp:!1,post:"/s"}),(I||L)&&!x&&g.extra&&Object.keys(g.extra).length>0)for(var Je in g.extra)Je.length>0&&(Le.length>0&&Le.push((0,s.jsx)("div",{className:"break"},"break-"+Je)),Le.push((0,s.jsxs)("div",Object.assign({className:"extra-name"},{children:[He(Je),ke]}),"extra-name-"+Je))),I&&ze(g.value?g.value(Je):g.extra[Je],"extra-value-"+Je,{disp:Je.toLowerCase().indexOf("time")>=0?"time":b,prec:xe,cls:"extra-value"}),L&&ze(g.extra[Je],"extra-raw-"+Je,{disp:"number",prec:be,paren:I,cls:"raw-extra-value"}),A&&null!=g.rate&&(null!==(u=g.rate.lastCheck)&&void 0!==u?u:0)>0&&(ae||0!==g.rate.value)&&Le.push((0,s.jsx)("div",Object.assign({className:"rate"},{children:Se}),"extra-rate-"+Je));C||null===(d=g.unlocked)||void 0===d||d||(Ve.push("locked"),Le.splice(0,Le.length,(0,s.jsx)("div",Object.assign({className:"placeholder"},{children:Se}),"lock")));var Ye=le?void 0:Ue;Ie&&!le&&Ve.push(Ie);var Ze=(0,s.jsxs)("div",Object.assign({className:Ve.join(" "),style:Ye},{children:[we&&(0,s.jsx)("div",Object.assign({className:"prefix"},{children:we})),Le,Ce&&(0,s.jsx)("div",Object.assign({className:"suffix"},{children:Ce}))]}));return le?(0,s.jsx)("div",Object.assign({className:Ie||void 0,style:Ue},{children:Ze})):Ze}},{"../utils/format":40,"../utils/round":43,"./Icon":4,"react/jsx-runtime":"react/jsx-runtime",tslib:"tslib"}],14:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("react/jsx-runtime");a.default=function(e){var t=e.frames,a=void 0===t?12:t,s=e.duration,r=void 0===s?1:s;return(0,n.jsx)("svg",Object.assign({className:"spinner",width:"128px",height:"128px",viewBox:"0 0 100 100"},{children:Array.from(Array(a).keys()).map((function(e){return(0,n.jsx)("g",Object.assign({transform:"rotate("+360*e/a+" 50 50)"},{children:(0,n.jsx)("rect",Object.assign({x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#32a0da"},{children:(0,n.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:r+"s",begin:r/a*(e-a)+"s",repeatCount:"indefinite"})}))}),"g-"+e)}))}))}},{"react/jsx-runtime":"react/jsx-runtime"}],15:[function(e,t,a){t.exports={hidden:"transparent question-mark",hinted:"green eye",flagged:"darkblue flag-2",blown:"red alert-triangle",revealed:["darkgreen square-dot","darkgreen square-1","darkgreen square-2","darkgreen square-3","darkgreen square-4","darkgreen square-5","darkgreen square-6","darkgreen square-7","darkgreen square-8","darkgreen square"]}},{}],16:[function(e,t,a){t.exports={active:["Game in progress..."],inavtive:["There's no game yet...?","Hmm... seems like you should reset the board.","Game is inactive :("],won:["Hooray!!!","Minefield cleared!!","You win!","Game won!","Success!","Amazing job!!!","WIN!","#winning"],lost:["Oh no! :(","KABOOOM!!!!!","Minefield blown :/","TOTAL CATASTROPHIC LOSS OF EVERYTHING!!!!","Game lost!","You lost this one :(","#fail","What a tragedy...","It wasn't your fault!"],resetting:["Un-de-mining the playing field...","Resetting the board...","Ordering new landmines...","Contemplating modern warfare...","Bulldozing the ground...","Wasting time for no reason...","Treating shellshock...","Rasterizing cell graphics...","Writing new reset messages...","Pre-computing game features...","Calculating total land area...","Integrating the area under board...","Un-defusing the mines...","Calling technical support..."]}},{}],17:[function(e,t,a){t.exports=[{name:"rows",singularName:"row",icon:"arrows-vertical",count:3},{name:"cols",singularName:"col",icon:"arrows-horizontal",count:3},{name:"difficulty",icon:"adjustments-horizontal",display:"percentage",count:15},{name:"hintQuality",icon:"bulb",display:"percentage",count:0},{name:"resetSpeed",icon:"refresh-alert",display:"percentage",count:0,extra:{remainingTime:0}}]},{}],18:[function(e,t,a){t.exports=[{name:"clicks",singularName:"click",icon:"hand-click",extra:{left:0,right:0,useless:0}},{name:"cells",singularName:"cell",icon:"darkgreen square",extra:{auto:0,manual:0,hidden:0}},{name:"hints",singularName:"hint",icon:"green eye",extra:{auto:0,manual:0}},{name:"flags",singularName:"flag",icon:"darkblue flag-2",extra:{auto:0,manual:0,unflags:0}},{name:"explosions",singularName:"explosion",icon:"red alert-triangle",extra:{auto:0,manual:0}}]},{}],19:[function(e,t,a){t.exports=[{name:"wins",singularName:"win",icon:"darkgreen square-check",extra:{auto:0,manual:0}},{name:"losses",singularName:"lose",icon:"darkred square-x",extra:{auto:0,manual:0}},{name:"resets",singularName:"reset",icon:"refresh",extra:{auto:0,manual:0}}]},{}],20:[function(e,t,a){t.exports=[{name:"totalTime",icon:"clock",display:"time"},{name:"activeTime",icon:"alarm",display:"time",extra:{current:0,max:0}},{name:"offlineTime",icon:"user-off",display:"time",extra:{current:0,max:0}}]},{}],21:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib"),s=e("react/jsx-runtime"),r=e("react-dom/client"),i=n.__importDefault(e("./components/Loader")),o=e("./components/GameContext");window.onload=function(){var e=document.getElementById("app");(0,r.createRoot)(e).render((0,s.jsx)(o.GameContextProvider,{children:(0,s.jsx)(i.default,{})}))}},{"./components/GameContext":3,"./components/Loader":6,"react-dom/client":"react-dom/client","react/jsx-runtime":"react/jsx-runtime",tslib:"tslib"}],22:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.genHints=a.genBoard=a.genBoardState=a.populateNeighboringCells=a.populateRandomMines=a.makeClearBoard=a.emptyBoard=a.emptyCellCounts=void 0;var n=e("tslib").__importDefault(e("../utils/clamp")),s=e("../utils/store"),r=e("./Cell");function i(e,t){for(var n=[],s=0;s<e;s++){n[s]=[];for(var r=0;r<t;r++)n[s][r]={row:s,col:r,contents:"clear",state:"hidden",neighbors:0}}return{rows:e,cols:t,cells:n,numMines:0,state:"active",cellCounts:Object.assign(Object.assign({},a.emptyCellCounts),{hidden:e*t})}}function o(e,t,a){var s,r;t=null!==(s=null!=t?t:a)&&void 0!==s?s:0,a=null!==(r=null!=a?a:t)&&void 0!==r?r:0;for(var i=(0,n.default)(Math.floor(t+Math.random()*(1+a-t)),0,e.rows*e.cols-e.numMines-1);i>0;){var o=Math.floor(Math.random()*e.rows),l=Math.floor(Math.random()*e.cols);"clear"===e.cells[o][l].contents&&(e.cells[o][l].contents="mine",e.numMines++,i--)}return e}function l(e){e.cells.forEach((function(e){return e.forEach((function(e){return e.neighbors=0}))}));for(var t=0;t<e.rows;t++)for(var a=0;a<e.cols;a++)if(e.cells[t][a].row=t,e.cells[t][a].col=a,"mine"===e.cells[t][a].contents)for(var n=t-1;n<=t+1;n++)for(var s=a-1;s<=a+1;s++)n>=0&&s>=0&&n<e.rows&&s<e.cols&&(n!==t||s!==a)&&e.cells[n][s].neighbors++;return e}function c(e,t){return void 0===t&&(t=1),e.cellCounts=Object.assign({},a.emptyCellCounts),e.numMines=0,e.cells.forEach((function(t){return t.forEach((function(t){e.cellCounts[t.state]++,e.numMines+="mine"===t.contents?1:0,(0,s.setSaveProperties)(t,["contents","state"])}))})),"lost"===e.state||e.cellCounts.blown>=t?(e.state="lost",e.cells.forEach((function(t){return t.forEach((function(t){e.cellCounts[t.state]--,(0,r.actOnCell)(t,"reveal"),e.cellCounts[t.state]++}))}))):e.cols*e.rows==0?e.state="inactive":e.cellCounts.blown+e.cellCounts.flagged===e.numMines&&0===e.cellCounts.hidden&&e.cellCounts.revealed===e.cols*e.rows-e.numMines?e.state="won":e.state="active",l(e),(0,s.setSaveProperties)(e,["rows","cols","cells"]),e}a.emptyCellCounts={hidden:0,hinted:0,flagged:0,revealed:0,blown:0},a.emptyBoard={rows:0,cols:0,cells:[],numMines:0,state:"inactive",cellCounts:Object.assign({},a.emptyCellCounts)},a.makeClearBoard=i,a.populateRandomMines=o,a.populateNeighboringCells=l,a.genBoardState=c,a.genBoard=function(e,t,a,n){var s=i(e,t);return c(s=o(s,a,n))},a.genHints=function(e,t,a,s,i){if(void 0===a&&(a=0),void 0===s&&(s=8),void 0===i&&(i=0),t=Math.floor((0,n.default)(t,0,100)),a=Math.floor((0,n.default)(a,0,8)),s=Math.floor((0,n.default)(s,0,8)),i=(0,n.default)(i,0,1),0===t)return 0;var o=e.cells.flat().filter((function(e){return"hidden"===e.state&&"clear"===e.contents&&e.neighbors>=a&&e.neighbors<=s})).sort((function(e,t){return e.neighbors-t.neighbors}));if(o.length<=t)return o.forEach((function(t){(0,r.actOnCell)(t,"hint"),e.cellCounts.hinted++,e.cellCounts.hidden--})),o.length;for(var l=0;l<t;l++){var c=0,u=i,d=Math.random();c=.5===u?d:(Math.sqrt(u*u+d-2*u*d)-u)/(1-2*u),c=Math.floor(c*o.length),o.splice(c,1).map((function(t){(0,r.actOnCell)(t,"hint"),e.cellCounts.hinted++,e.cellCounts.hidden--}))}return t}},{"../utils/clamp":37,"../utils/store":44,"./Cell":23,tslib:"tslib"}],23:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.actOnCell=void 0,a.actOnCell=function(e,t){switch(t){case"flag":"hidden"===e.state||"hinted"===e.state?e.state="flagged":"flagged"===e.state&&(e.state="hidden");break;case"reveal":"hidden"!==e.state&&"hinted"!==e.state||("clear"===e.contents?e.state="revealed":"mine"===e.contents&&(e.state="blown"));break;case"hint":"hidden"===e.state&&(e.state="hinted");break;case"hide":"flagged"!==e.state&&"revealed"!==e.state||(e.state="hidden")}return e}},{}],24:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.wrapContext=a.emptyContext=void 0;var n=e("tslib"),s=n.__importDefault(e("../utils/assign")),r=n.__importStar(e("../utils/store")),i=e("./Settings"),o=e("./Board"),l=e("./ResourceManager"),c=e("./GameResources"),u=e("../utils/localStorage");function d(){return{settings:Object.assign(Object.assign({},i.defaultSettings),{lastReset:Date.now(),lastUpdate:Date.now(),lastLoaded:Date.now()}),board:Object.assign({},o.emptyBoard),resourceManager:(0,c.initGameResources)((0,l.genResourceManager)())}}a.emptyContext=d,a.wrapContext=function(e){return Object.assign(Object.assign(Object.assign({context:e},e),e.resourceManager),{setBoard:function(t){return e.board=t},resource:function(t){return e.resourceManager.get(t)},load:function(){return f(e,(0,u.loadFromBrowser)(m))},loadAs:function(t){return f(e,t)},save:function(t){return(0,u.saveToBrowser)(m,v(e,t))},saveAs:function(t){return v(e,t)},reset:function(){return function(e){(0,u.resetOnBrowser)(m);var t,a=d();for(t in a)(0,s.default)(e,t,a[t])}(e)}})};var m="Context";function f(e,t){var a,n=Object.assign({},e),i=!!t&&r.loadAs(e,t);if(i)e.settings=Object.assign(Object.assign(Object.assign({},n.settings),e.settings),{lastLoaded:Date.now()}),e.board=(0,o.genBoardState)(Object.assign(Object.assign({},n.board),e.board)),e.resourceManager=(0,l.mergeResourceManagers)(n.resourceManager,e.resourceManager),e.resourceManager.update(e.settings.lastLoaded,e.settings,"load");else for(a in n)(0,s.default)(e,a,n[a]);return i}function v(e,t){return e.settings.lastSaved=Date.now(),r.saveAs(e,t)}},{"../utils/assign":36,"../utils/localStorage":41,"../utils/store":44,"./Board":22,"./GameResources":26,"./ResourceManager":28,"./Settings":29,tslib:"tslib"}],25:[function(e,t,a){"use strict";function n(e){return(e.resourceManager.resources.difficulty.value()+10)/25}Object.defineProperty(a,"__esModule",{value:!0}),a.stateChanged=a.scoreMultiplier=a.getBuyAmount=a.resetTimeFormula=a.remainingHintsFormula=a.hintFormula=a.numMinesFormula=a.boardProgressFormula=void 0,a.boardProgressFormula=function(e){var t=e.board;return 100*(t.cellCounts.revealed+t.cellCounts.flagged)/(t.rows*t.cols)},a.numMinesFormula=function(e){var t=e.resourceManager.resources,a=t.rows,n=t.cols,s=t.difficulty;return a.value()*n.value()*(s.value()/100)},a.hintFormula=function(e){return e.resourceManager.resources.hintQuality.value()/100},a.remainingHintsFormula=function(e){var t=e.board;return t.rows*t.cols-t.numMines-t.cellCounts.revealed},a.resetTimeFormula=function(e){var t=e.resourceManager.resources,a=t.rows,n=t.cols,s=t.difficulty;return(1-t.resetSpeed.value()/100)*Math.sqrt(a.value()*n.value()*(s.value()/100)*10)},a.getBuyAmount=function(e){var t;return null!==(t=r[null!=e?e:""])&&void 0!==t?t:r[""]},a.scoreMultiplier=n,a.stateChanged=function(e,t,a,r){var i=n(e),o=s[t+":"+a],l=e.resourceManager.resources[null!=o?o:""];if(o&&l)l.count+=1*i,r?l.extra.auto+=1:l.extra.manual+=1;else switch(t+":"+a){case"cell:unflagged":(l=e.resourceManager.resources.flags).count-=1*i,l.extra.unflags+=1;break;case"cell:unrevealed":(l=e.resourceManager.resources.cells).count-=1*i,l.extra.hidden+=1}};var s={"board:active":"resets","board:lost":"losses","board:won":"wins","cell:blown":"explosions","cell:hinted":"hints","cell:flagged":"flags","cell:revealed":"cells"},r={"":{min:1,max:1,inc:1},x1:{min:1,max:1,inc:1},x5:{min:1,max:5,inc:5},x10:{min:1,max:10,inc:10},"+5":{min:5,max:5,inc:1},"+10":{min:10,max:10,inc:1},max:{min:1,max:100,inc:1}}},{}],26:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.initGameResources=void 0;var n=e("tslib"),s=n.__importDefault(e("../utils/clamp")),r=e("./ResourceManager"),i=n.__importDefault(e("../utils/tickTimer")),o=n.__importDefault(e("../data/resources_time.json")),l=n.__importDefault(e("../data/resources_board.json")),c=n.__importDefault(e("../data/resources_game.json")),u=n.__importDefault(e("../data/resources_cell.json")),d=[o.default,l.default,c.default,u.default];function m(e,t){e.value=function(a){var n;return t(null!==(n=a?e.extra[a]:e.count)&&void 0!==n?n:0,a)}}function f(e,t,a){e.tick=function(n,s){s===t?(e.count+=n,e.extra.current+=n,e.extra.current>e.extra.max&&(e.extra.max=e.extra.current)):s===a&&(e.extra.current=0)}}a.initGameResources=function(e){var t=null!=e?e:(0,r.genResourceManager)();return d.flat().forEach((function(e){return t.upsert(e)})),m(t.get("rows"),(function(e){return(0,s.default)(e,3,100)})),m(t.get("cols"),(function(e){return(0,s.default)(e,3,100)})),m(t.get("difficulty"),(function(e){return(0,s.default)(e,0,100)})),m(t.get("hintQuality"),(function(e){return(0,s.default)(e,0,100)})),m(t.get("resetSpeed"),(function(e,t){return t?e:(0,s.default)(e,0,100)})),t.get("rows").cost=function(e){return[{resource:"cells",count:Math.pow(e,2)}]},t.get("cols").cost=function(e){return[{resource:"cells",count:Math.pow(e,2)}]},t.get("hints").cost=function(){return[{resource:"wins",count:1}]},t.get("difficulty").cost=function(e){return[{resource:"flags",count:Math.floor(e/2)}]},t.get("hintQuality").cost=function(e){return[{resource:"wins",count:1},{resource:"cells",count:e-1}]},t.get("resetSpeed").cost=function(e){return[{resource:"resets",count:1},{resource:"cells",count:e}]},(0,i.default)(t.get("resetSpeed"),{kind:"remainingTime"}),(0,i.default)(t.get("totalTime"),{direction:1}),f(t.get("activeTime"),"tick","load"),f(t.get("offlineTime"),"load","tick"),t}},{"../data/resources_board.json":17,"../data/resources_cell.json":18,"../data/resources_game.json":19,"../data/resources_time.json":20,"../utils/clamp":37,"../utils/tickTimer":45,"./ResourceManager":28,tslib:"tslib"}],27:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.applyToResource=a.checkHasResources=a.getResourceCounts=a.subtractResources=a.scaleResources=a.combineResources=a.genEmptyResource=void 0;var n=e("../utils/store");function s(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return[e].concat(a).flat().reduce((function(e,t){var a=e.find((function(e){var a,n;return(e.resource===t.resource||("string"==typeof e.resource?e.resource:e.resource.name)===("string"==typeof t.resource?t.resource:t.resource.name))&&(null!==(a=e.kind)&&void 0!==a?a:"")===(null!==(n=t.kind)&&void 0!==n?n:"")}));return a?(a.count+=t.count,e):[].concat(e,[t])}),[]).filter((function(e){return 0!==e.count}))}function r(e,t){return e.map((function(e){var a=e.resource,n=e.count,s=e.kind;return{resource:a,count:t*n,kind:s}}))}function i(e,t){return s(e,r(t,-1))}function o(e){return[{resource:e,count:e.count}].concat(Object.entries(e.extra).map((function(t){var a=t[0],n=t[1];return{resource:e,count:n,kind:a}}))).filter((function(e){return 0!==e.count}))}a.genEmptyResource=function(e){var t={name:e,count:0,extra:{},value:function(e){var a;return e?null!==(a=t.extra[e])&&void 0!==a?a:0:t.count},cost:function(){return[]},rate:{value:0}};return(0,n.setSaveProperties)(t,["name","unlocked","count","maxCount","extra"]),t},a.combineResources=s,a.scaleResources=r,a.subtractResources=i,a.getResourceCounts=o,a.checkHasResources=function(e,t){var a;return(null===(a=e.unlocked)||void 0===a||a)&&0===i(o(e),t.filter((function(t){var a=t.resource;return e.name===("string"==typeof a?a:a.name)}))).filter((function(e){return e.count<0})).length},a.applyToResource=function(e,t){return s(t.filter((function(t){var a,n=t.resource;return(null===(a=e.unlocked)||void 0===a||a)&&e.name===("string"==typeof n?n:n.name)})).map((function(t){var a,n=t.count,s=t.kind,r=s?null!==(a=e.extra[s])&&void 0!==a?a:0:e.count,i=Math.max(0,r+n);return!s&&e.maxCount&&i>e.maxCount&&(i=e.maxCount),s?e.extra[s]=i:e.count=i,[{resource:e,count:i-r,kind:s}]})).flat())}},{"../utils/store":44}],28:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.mergeResourceManagers=a.genResourceManager=void 0;var n=e("tslib"),s=n.__importDefault(e("../utils/assign")),r=n.__importDefault(e("../utils/clamp")),i=e("./Resource");function o(e,t){return e.resources["string"==typeof t?t:t.name]}function l(e,t,a){var n=c(e,t).map((function(t){var n=function(e,t,a,n,s){var r,o;if(!t||0===a||null!==(r=t.unlocked)&&void 0!==r&&!r)return{count:0,gain:[],cost:[]};var l=n?null!==(o=t.extra[n])&&void 0!==o?o:0:t.count,u=Math.max(0,l+a);if(!n&&t.maxCount&&u>t.maxCount&&(u=t.maxCount),"free"===s)return{count:u-l,gain:[{resource:t,count:u-l,kind:n}],cost:[]};for(var m=[],f=m,v=0,h=l;h<u&&("partial"!==s&&"dry-partial"!==s||d(e,f=(0,i.combineResources)(f,c(e,t.cost(h+1,n)))));h++)v++,m=(0,i.combineResources)(m,c(e,t.cost(h+1,n)));var g=[{resource:t,count:v,kind:n}];return"dry-full"!==s&&!d(e,m)||"full"===s&&l+v!==u?{count:0,gain:[],cost:[]}:{count:v,gain:g,cost:m}}(e,t.resource,t.count,t.kind,null!=a?a:"partial");if("dry-partial"===a||"dry-full"===a)return n;var s=(0,i.applyToResource)(t.resource,n.gain);return{count:u(s,t.resource.name,t.kind),gain:s,cost:n.cost.map((function(t){var a=t.resource,n=t.count,s=t.kind;return(0,i.applyToResource)(o(e,a),[{resource:a,count:-n,kind:s}])})).flat()}}));return{count:n.reduce((function(e,t){return e+t.count}),0),gain:(0,i.combineResources)(n.map((function(e){return e.gain})).flat()),cost:(0,i.combineResources)(n.map((function(e){return e.cost})).flat())}}function c(e,t){return t.map((function(t){var a=t.resource,n=t.count,s=t.kind;return{resource:o(e,a),count:n,kind:null!=s?s:""}})).filter((function(e){var t=e.resource,a=e.count;return t&&a}))}function u(e,t,a){var n;return null!==(n=e.filter((function(e){var n=e.resource,s=e.kind;return(null!=a?a:"")===(null!=s?s:"")&&t===("string"==typeof n?n:n.name)})).map((function(e){return e.count})).pop())&&void 0!==n?n:0}function d(e,t){return c(e,(0,i.combineResources)(t)).every((function(e){return(0,i.checkHasResources)(e.resource,[e])}))}a.genResourceManager=function(){var e={resources:{},upsert:function(t){return function(e,t){var a,n,r,o="string"==typeof t?t:null!==(a=t.name)&&void 0!==a?a:"",c=null!==(n=e.resources[o])&&void 0!==n?n:(0,i.genEmptyResource)(o);if("string"!=typeof t)for(r in t)(0,s.default)(c,r,t[r]);return c.buy=function(t,a,n){return void 0===t&&(t=1),void 0===a&&(a="partial"),void 0===n&&(n=""),l(e,[{resource:c,count:t,kind:n}],a)},c.add=function(e,t){return c.buy(e,"free",t)},c.canBuy=function(e,t){return c.buy(e,"dry-partial",t)},c.name&&(e.resources[c.name]=c),c}(e,t)},get:function(t){return o(e,t)},purchase:function(t,a){return l(e,t,a)},canAfford:function(t){return d(e,t)},update:function(t,a,n){return function(e,t,a,n){var s,i=a.rateUpdateSecs,o=void 0===i?1:i,l=a.minResourceUpdateSecs,c=void 0===l?.001:l,u=a.maxResourceUpdateSecs,d=void 0===u?86400:u,m=a.maxResourceTickSecs,f=void 0===m?1:m,v=a.timeDilation,h=void 0===v?1:v;t||(t=Date.now());var g=(0,r.default)((t-(null!==(s=a.lastUpdate)&&void 0!==s?s:t))/1e3,0,d);if(!(g<c)){a.lastUpdate=t;for(var p=function(){var t=(0,r.default)(g,c,f);Object.values(e.resources).forEach((function(e){return e.tick&&e.tick(t/h,n)})),g-=t};g>0;)p();Object.values(e.resources).forEach((function(e){var t,n,s=((null!==(t=a.lastUpdate)&&void 0!==t?t:0)-(null!==(n=e.rate.lastCheck)&&void 0!==n?n:0))/1e3;s>=o&&(void 0!==e.rate.lastCount?e.rate.value=(e.count-e.rate.lastCount)/s:e.rate.value=0),(void 0===e.rate.lastCheck||void 0===e.rate.lastCount||s>=o)&&(e.rate.lastCheck=a.lastUpdate,e.rate.lastCount=e.count)}))}}(e,t,null!=a?a:{},null!=n?n:"unknown")}};return e},a.mergeResourceManagers=function(e,t){var a,n;for(n in t)"resources"===n?Object.values(null!==(a=t[n])&&void 0!==a?a:{}).forEach((function(t){return e.upsert(t)})):(0,s.default)(e,n,t[n]);return e}},{"../utils/assign":36,"../utils/clamp":37,"./Resource":27,tslib:"tslib"}],29:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.defaultSettings=void 0,a.defaultSettings={ticksPerSecond:60,framesPerSecond:10,saveFrequencySecs:60,rateUpdateSecs:1,minResourceUpdateSecs:.001,maxResourceUpdateSecs:86400,maxResourceTickSecs:1,lastReset:Date.now(),lastUpdate:Date.now(),lastSaved:0,lastLoaded:Date.now(),maxErrors:1,timeDilation:1,tapMode:"reveal",buyAmount:"x1"}},{}],30:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("react/jsx-runtime");a.default=function(){return(0,n.jsx)("div",{children:(0,n.jsxs)("div",Object.assign({className:"panel help"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Progressive Mine Sweep"})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"This game is my take on the classic Minesweeper puzzle and making incremental aspects to it. The incremental part is not quite ready yet, so this version of the game has a normal playable field with controls at the bottom of the page to change the size and difficulty level."})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"I will put some more info here later about how to play minesweeper, but for now, you need to know that there is a playing field, and there is a number of mines buried under the squares on the field. The size of the field is shown on upper left corner of the scoreboard, and the number of mines is displaying on the upper right corner."})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"You can reveal the squares on the field by tapping on them. Each square is either a mine, or shows a clue of how many squares neighboring it have a mine on them -- from 8-ways, including diagonal neighbors. If a square that was revealed was a mine, the field explodes and you lose the game."})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"When you flag a square, you are marking it as a possible location for a mine. Have in mind that this doesn't necessarily mean it has a mine under it, as you might have made a mistake. Eventually, the number of flagged mines should match the number of mines on the field and the rest of squares should be revealed to win the game."})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"You can flag a square by either right clicking on it, or (when right click is not an option) by holding any of the modifier keys (either ctrl, alt, or meta) and clicking. Additionally, there is a selector at the top of the field to change the tapping style on mobile devices to be either revealing the squares, or flagging them. Tap on this button to toggle the reveal/flag mode."})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"The game is won when all the squares are revealed and all the mines are correctly flagged."}))]}))})}},{"react/jsx-runtime":"react/jsx-runtime"}],31:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib"),s=e("react/jsx-runtime"),r=n.__importDefault(e("../components/BuyButton")),i=n.__importDefault(e("../components/MineField")),o=n.__importDefault(e("../components/ResourceBar")),l=n.__importDefault(e("../components/ResetBox")),c=n.__importDefault(e("../components/ModeControls")),u=n.__importDefault(e("../components/ResourceRender")),d=n.__importDefault(e("../components/GameContext")),m=e("../model/Board"),f=e("../model/GameFormulas");a.default=function(){var e=(0,d.default)(),t=e.context,a=e.board,n=e.setBoard,v=e.resources,h=v.rows,g=v.cols,p=v.hints,x=v.resets,j=a.rows!==h.value()||a.cols!==g.value();return(0,s.jsxs)("div",Object.assign({className:"main"},{children:[(0,s.jsx)(o.default,{}),(0,s.jsx)(l.default,{}),(0,s.jsx)(i.default,{}),(0,s.jsx)(c.default,{}),(0,s.jsxs)("div",Object.assign({className:"game-controls panel"},{children:[(0,s.jsx)("div",Object.assign({className:"half"},{children:(0,s.jsx)("button",Object.assign({className:"buy-button",onClick:function(){var e=(0,m.genBoardState)(a,0);n(Object.assign({},e)),(0,f.stateChanged)(t,"board",e.state,!1)}},{children:(0,s.jsx)(u.default,{resource:x,value:1,showValue:!1,showChrome:!0,infix:"",suffix:"the Game"})}))})),(0,s.jsx)("div",Object.assign({className:"half"},{children:(0,s.jsx)(r.default,{resource:p,count:0,maxCount:(0,f.remainingHintsFormula)(t),onPurchase:function(e,s,r){void 0===r&&(r=0),(0,m.genHints)(a,r,0,8,(0,f.hintFormula)(t))>0&&(p.extra.manual++,n(Object.assign({},a)))}})})),j&&(0,s.jsxs)("div",Object.assign({className:"left full"},{children:["On reset, game board will change to size to"," "+h.value()+"x"+g.value()]}))]}))]}))}},{"../components/BuyButton":1,"../components/GameContext":3,"../components/MineField":8,"../components/ModeControls":9,"../components/ResetBox":11,"../components/ResourceBar":12,"../components/ResourceRender":13,"../model/Board":22,"../model/GameFormulas":25,"react/jsx-runtime":"react/jsx-runtime",tslib:"tslib"}],32:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib"),s=e("react/jsx-runtime"),r=e("react"),i=e("react-router"),o=n.__importDefault(e("../components/GameContext")),l=n.__importDefault(e("../components/ResourceRender")),c=e("../utils/fileStorage");a.default=function(){var e=(0,o.default)(),t=(0,r.useState)(""),a=t[0],n=t[1],u=(0,r.useState)(!1),d=u[0],m=u[1],f=(0,i.useNavigate)(),v=(0,i.useLocation)(),h=e.settings,g=(v.pathname+" "+v.search+" "+v.hash+" "+v.key).toLowerCase().indexOf("debug")>=0;function p(e,t){var a=parseInt(t);if(a>=1&&a<=1e3)switch(e){case"tick":h.ticksPerSecond=a;break;case"render":h.framesPerSecond=a;break;case"save":h.saveFrequencySecs=600/a}}return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",Object.assign({className:"panel options"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:"Game Data"})),(0,s.jsx)("div",Object.assign({className:"full"},{children:(0,s.jsx)(l.default,{epoch:h.lastReset/1e3,value:h.lastUpdate/1e3,display:"time",precision:0,prefix:"You started this game "})})),(0,s.jsx)("div",Object.assign({className:"full"},{children:(0,s.jsx)(l.default,{epoch:h.lastLoaded/1e3,value:h.lastUpdate/1e3,display:"time",precision:0,prefix:"This session started "})})),(0,s.jsx)("div",Object.assign({className:"full"},{children:(0,s.jsx)(l.default,{epoch:h.lastSaved/1e3,value:h.lastUpdate/1e3,display:"time",precision:0,prefix:"Game was last saved "})})),(0,s.jsx)("hr",{className:"separator"}),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"button",value:"Load",onClick:function(){e.load()&&f({pathname:"/",search:v.search})}})})),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"button",value:"Save",onClick:function(){e.save(g)}})})),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"button",value:"Load from File",onClick:function(){(0,c.loadFromFile)((function(t){e.loadAs(t)&&f({pathname:"/",search:v.search})}))}})})),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"button",value:"Save to File",onClick:function(){var t=(new Date).toISOString().replace(/\D/g," ").trim().replace(/\D/g,"-");(0,c.saveToFile)("progressive-mine-sweep-"+t,e.saveAs(g))}})})),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"button",value:"Import",onClick:function(){e.loadAs(a)&&f({pathname:"/",search:v.search})}})})),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"button",value:"Export",onClick:function(){n(e.saveAs(g))}})})),(0,s.jsx)("div",Object.assign({className:"full center"},{children:(0,s.jsx)("textarea",{value:a,onChange:function(e){return n(e.target.value)}})}))]})),(0,s.jsxs)("div",Object.assign({className:"panel options"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:"Advanced Settings"})),(0,s.jsx)("div",Object.assign({className:"full"},{children:"If you are having performance issues, increase the time between updates. Faster updating frequncies lead to better game experience but might use a lot of CPU."})),(0,s.jsx)("div",Object.assign({className:"half"},{children:"Updating frequency:"})),(0,s.jsxs)("div",Object.assign({className:"half center"},{children:[Math.floor(1e3/h.ticksPerSecond),"ms"]})),(0,s.jsx)("div",{className:"half"}),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"range",min:1,max:1e3,value:h.ticksPerSecond,onInput:function(e){return p("tick",e.target.value)}})})),(0,s.jsx)("div",{className:"full"}),(0,s.jsx)("div",Object.assign({className:"half"},{children:"Rendering frequency:"})),(0,s.jsxs)("div",Object.assign({className:"half center"},{children:[Math.floor(1e3/h.framesPerSecond),"ms"]})),(0,s.jsx)("div",{className:"half"}),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"range",min:1,max:60,value:h.framesPerSecond,onInput:function(e){return p("render",e.target.value)}})})),(0,s.jsx)("div",Object.assign({className:"full"},{children:"Change how often the game is saved in the background. More frequent saving leads to faster backups, but increases CPU and I/O usage"})),(0,s.jsx)("div",Object.assign({className:"half"},{children:"Saving frequency:"})),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)(l.default,{value:h.saveFrequencySecs,display:"time",precision:0})})),(0,s.jsx)("div",{className:"half"}),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"range",min:1,max:60,value:600/h.saveFrequencySecs,onInput:function(e){return p("save",e.target.value)}})}))]})),(0,s.jsxs)("div",Object.assign({className:"panel options reset"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar warning"},{children:"Game Reset"})),(0,s.jsx)("div",Object.assign({className:"full"},{children:"WARNING: this will completely reset your game and delete all saved progress and setting. Only use this if you want to restart the game from beginning, or if something in the settings is so messed up that the game is now unplayable."})),(0,s.jsx)("div",Object.assign({className:"full"},{children:(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:d,onChange:function(){return m(!d)}}),"I understand what this means and still want to reset the game"]})})),(0,s.jsx)("div",Object.assign({className:"full right"},{children:(0,s.jsx)("input",{type:"button",value:"Reset everything",disabled:!d,onClick:function(){d&&(confirm("Are you sure you want to reset? This cannot be undone.")?(e.reset(),f({pathname:"/",search:v.search})):m(!1))}})}))]})),g&&(0,s.jsxs)("div",Object.assign({className:"panel options debug"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:"Debug Context"})),(0,s.jsx)("div",Object.assign({className:"half"},{children:"Settings:"})),(0,s.jsx)("div",Object.assign({className:"full"},{children:JSON.stringify(h,null,2)})),(0,s.jsx)("hr",{className:"separator"}),(0,s.jsx)("div",Object.assign({className:"half"},{children:"Resources:"})),(0,s.jsx)("div",Object.assign({className:"full"},{children:JSON.stringify(e.resourceManager,null,2)})),(0,s.jsx)("hr",{className:"separator"}),(0,s.jsx)("div",Object.assign({className:"half"},{children:"Board:"})),(0,s.jsx)("div",Object.assign({className:"full"},{children:JSON.stringify(e.board,null,2)}))]}))]})}},{"../components/GameContext":3,"../components/ResourceRender":13,"../utils/fileStorage":39,react:"react","react-router":"react-router","react/jsx-runtime":"react/jsx-runtime",tslib:"tslib"}],33:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib"),s=e("react/jsx-runtime"),r=e("react"),i=n.__importDefault(e("../components/GameContext"));a.default=function(){var e=(0,i.default)(),t=(0,r.useMemo)((function(){return e.saveAs(!0)}),[]);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",Object.assign({className:"panel options"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:"Load Failure!"})),(0,s.jsx)("div",Object.assign({className:"full"},{children:"Looks like something went very wrong in loading the game. It's possible that the game version is out of date, or that the save data is corrupt."})),(0,s.jsx)("hr",{className:"separator"}),(0,s.jsx)("div",Object.assign({className:"full"},{children:"For your records, here is the current contents of the save state. Keep this somewhere before resetting the game:"})),(0,s.jsx)("div",Object.assign({className:"full center"},{children:(0,s.jsx)("textarea",{value:t,readOnly:!0})}))]})),(0,s.jsxs)("div",Object.assign({className:"panel options reset"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar warning"},{children:"Game Reset"})),(0,s.jsx)("div",Object.assign({className:"full"},{children:"WARNING: this will completely reset your game and delete all saved progress and settings. This will hard reset the game from beginning."})),(0,s.jsx)("div",Object.assign({className:"full right"},{children:(0,s.jsx)("input",{type:"button",value:"Hard Reset Everything",onClick:function(){confirm("Are you sure you want to reset? This cannot be undone.")&&(e.reset(),window.location.reload())}})}))]}))]})}},{"../components/GameContext":3,react:"react","react/jsx-runtime":"react/jsx-runtime",tslib:"tslib"}],34:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib"),s=e("react/jsx-runtime"),r=n.__importDefault(e("../components/GameContext")),i=n.__importDefault(e("../components/ResourceRender"));a.default=function(){var e=(0,r.default)().resource;function t(t){var a=e(t);return(0,s.jsx)(i.default,{resource:a,length:"percentage"===a.display?"tiny":"compact",precision:"percentage"===a.display?1:void 0,showMaxValue:!0,showRate:!0,showExtras:!0,showZeroRates:!0,showRateColors:!0})}return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",Object.assign({className:"panel stats"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:"Time Info"})),t("totalTime"),t("activeTime"),t("offlineTime")]})),(0,s.jsxs)("div",Object.assign({className:"panel stats"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:"Board Info"})),t("rows"),t("cols"),t("difficulty"),t("resetSpeed"),t("hintQuality")]})),(0,s.jsxs)("div",Object.assign({className:"panel stats"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:"Game Info"})),t("wins"),t("losses"),t("resets")]})),(0,s.jsxs)("div",Object.assign({className:"panel stats"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:"Cell Info"})),t("cells"),t("flags"),t("hints"),t("explosions"),t("clicks")]}))]})}},{"../components/GameContext":3,"../components/ResourceRender":13,"react/jsx-runtime":"react/jsx-runtime",tslib:"tslib"}],35:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib"),s=e("react/jsx-runtime"),r=n.__importDefault(e("../components/BuyButton")),i=n.__importDefault(e("../components/GameContext")),o=n.__importDefault(e("../components/ModeControls")),l=n.__importDefault(e("../components/ResourceBar")),c=n.__importDefault(e("../components/ResourceRender")),u=e("../model/GameFormulas");a.default=function(){var e=(0,i.default)(),t=e.context,a=e.resources,n=a.rows,d=a.cols,m=a.difficulty,f=a.hintQuality,v=a.resetSpeed;return(0,s.jsxs)("div",{children:[(0,s.jsx)(l.default,{}),(0,s.jsx)(o.default,{}),(0,s.jsxs)("div",Object.assign({className:"game-controls panel"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:"Upgrades"})),(0,s.jsx)("div",Object.assign({className:"quarter"},{children:"Game Width:"})),(0,s.jsx)("div",Object.assign({className:"quarter"},{children:(0,s.jsx)(c.default,{resource:d,showChrome:!0,infix:"",className:"value-first"})})),(0,s.jsx)("div",Object.assign({className:"right half"},{children:(0,s.jsx)(r.default,{resource:d,prefix:"Expand",maxCount:50})})),(0,s.jsx)("div",Object.assign({className:"quarter"},{children:"Game Height:"})),(0,s.jsx)("div",Object.assign({className:"quarter"},{children:(0,s.jsx)(c.default,{resource:n,showChrome:!0,infix:"",className:"value-first"})})),(0,s.jsx)("div",Object.assign({className:"right half"},{children:(0,s.jsx)(r.default,{resource:n,prefix:"Expand",maxCount:50})})),(0,s.jsx)("div",Object.assign({className:"quarter"},{children:"Game Difficulty:"})),(0,s.jsx)("div",Object.assign({className:"quarter"},{children:(0,s.jsx)(c.default,{resource:m,showChrome:!0,showName:!1,infix:"",className:"value-first"})})),(0,s.jsx)("div",Object.assign({className:"right half"},{children:(0,s.jsx)(r.default,{resource:m,prefix:"Increase",maxCount:100})})),(0,s.jsx)("div",Object.assign({className:"quarter"},{children:(0,s.jsx)("span",Object.assign({className:"computed"},{children:"Score Multiplier:"}))})),(0,s.jsx)("div",Object.assign({className:"quarter"},{children:(0,s.jsx)(c.default,{value:100*(0,u.scoreMultiplier)(t),display:"percentage",showChrome:!0,className:"computed"})})),(0,s.jsx)("div",Object.assign({className:"right half"},{children:(0,s.jsx)(r.default,{resource:m,prefix:"Decrease",gainMultiplier:-1,enabled:m.count>0,minNum:1,maxNum:1,increment:1})})),(0,s.jsx)("div",Object.assign({className:"quarter"},{children:"Reset Speed:"})),(0,s.jsx)("div",Object.assign({className:"quarter"},{children:(0,s.jsx)(c.default,{resource:v,showChrome:!0,showName:!1,infix:"",className:"value-first"})})),(0,s.jsx)("div",Object.assign({className:"right half"},{children:(0,s.jsx)(r.default,{resource:v,prefix:"Speed up",maxCount:100})})),(0,s.jsx)("div",Object.assign({className:"quarter"},{children:"Hint Quality:"})),(0,s.jsx)("div",Object.assign({className:"quarter"},{children:(0,s.jsx)(c.default,{resource:f,showChrome:!0,showName:!1,infix:"",className:"value-first"})})),(0,s.jsx)("div",Object.assign({className:"right half"},{children:(0,s.jsx)(r.default,{resource:f,prefix:"Improve",maxCount:100})}))]}))]})}},{"../components/BuyButton":1,"../components/GameContext":3,"../components/ModeControls":9,"../components/ResourceBar":12,"../components/ResourceRender":13,"../model/GameFormulas":25,"react/jsx-runtime":"react/jsx-runtime",tslib:"tslib"}],36:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e,t,a){e[t]&&a&&"object"==typeof a?e[t]=Object.assign(Object.assign({},e[t]),a):null!=a&&(e[t]=a)}},{}],37:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e,t,a){return void 0===t&&(t=0),void 0===a&&(a=1),isNaN(e)||e<t?t:e>a?a:e}},{}],38:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){return e.filter((function(e,t,a){return a.indexOf(e)===t}))}},{}],39:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.loadFromFile=a.saveToFile=void 0,a.saveToFile=function(e,t){t instanceof Blob||(t=new Blob([t],{type:"text/plain"}));var a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=e,n.click(),URL.revokeObjectURL(a)},a.loadFromFile=function(e,t){var a=document.createElement("input");a.type="file",a.addEventListener("change",(function(a){var n=a.target.files;if(n&&0!==n.length&&n[0]){var s=new FileReader;s.onload=function(a){var n,s=null===(n=a.target)||void 0===n?void 0:n.result;s&&"string"==typeof s?e&&e(s):t&&t()},s.readAsText(n[0])}else t&&t()}),!1),a.click()}},{}],40:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.formatTime=a.formatNumber=void 0;var n=e("tslib").__importDefault(e("./clamp"));a.formatNumber=function(e,t,a,s,r){void 0===t&&(t=21),void 0===a&&(a=3),void 0===s&&(s=!1),void 0===r&&(r=!1);var i={style:"decimal",notation:"standard",signDisplay:s?"always":"auto",useGrouping:r,minimumIntegerDigits:1,minimumFractionDigits:0,maximumFractionDigits:(0,n.default)(a,0,t-1),minimumSignificantDigits:1,maximumSignificantDigits:t},o=e.toLocaleString(void 0,i);return o.length>t?(i.notation="scientific",e.toLocaleString(void 0,i)):o},a.formatTime=function(e,t,a,n,s,r,i){if(void 0===t&&(t="expanded"),void 0===a&&(a=!1),void 0===n&&(n="expanded"===t?", ":":"),void 0===s&&(s=""),void 0===r&&(r=""),void 0===i&&(i=""),r.length>0&&e<0)return r;if(s.length>0&&0===e)return s;var o=Math.floor(e/1e3),l=Math.floor(e-1e3*o),c=Math.floor(o/60);o-=60*c;var u=Math.floor(c/60);c-=60*u;var d=Math.floor(u/24);u-=24*d;var m=Math.floor(d/365);return d-=365*m,a||(l=0),s.length>0&&d+u+c+o+l===0?s:("expanded"!==t?[m>0?m.toFixed(0):"",d>0?d.toFixed(0):"",u>0||"compact"===t?u.toFixed(0):"",c>0||"compact"===t?c.toFixed(0):"",(o+l/1e3).toFixed(!a||"tiny"===t&&0===l?0:3)].map((function(e){return"compact"!==t||1!==e.length&&1!==e.indexOf(".")?e:"0"+e})):[[m,"year"],[d,"day"],[u,"hour"],[c,"minute"],[o,"second",m+d+u+c===0,l]].map((function(e){var t=e[0],a=e[1],n=e[2],s=void 0!==n&&n,r=e[3],i=void 0===r?0:r;return t>0||i>0||s&&0===t?t.toString()+(i>0?"."+i.toString():"")+" "+a+(1===t?"":"s"):""}))).filter((function(e){return e.length>0})).join(n)+(i.length>0?" "+i:"")}},{"./clamp":37,tslib:"tslib"}],41:[function(e,t,a){"use strict";function n(){var e=window.localStorage,t="__storage_test__";if(!e)return!1;try{return e.setItem(t,t),e.removeItem(t),!0}catch(t){return t instanceof DOMException&&0!==e.length&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)}}Object.defineProperty(a,"__esModule",{value:!0}),a.loadFromBrowser=a.saveToBrowser=a.resetOnBrowser=void 0,a.resetOnBrowser=function(e){n()&&window.localStorage.removeItem(e)},a.saveToBrowser=function(e,t){n()&&t&&window.localStorage.setItem(e,t)},a.loadFromBrowser=function(e){return n()?window.localStorage.getItem(e):null}},{}],42:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib").__importStar(e("../data/messages.json"));a.default=function(e,t){var a,s,r=n[e];return r&&0!==r.length?"string"==typeof r?r:(null!=t||(t=Math.floor(Math.random()*r.length)),null!==(s=null!==(a=r[t])&&void 0!==a?a:r[0])&&void 0!==s?s:e):e}},{"../data/messages.json":16,tslib:"tslib"}],43:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.roundMethods=void 0,a.roundMethods={floor:Math.floor,round:Math.round,ceil:Math.ceil},a.default=function(e,t,n){var s=Math.pow(10,t);return a.roundMethods[n](e*s)/s}},{}],44:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.setSaveProperties=a.loadAs=a.saveAs=a.skipEncoding=void 0;var n=e("tslib").__importDefault(e("./dedupe")),s=!1;function r(e){if(s)return e;var t=e.startsWith(".."),a=(t?e:Math.random().toString(36)).substring(2,10);return(t?"":".."+a)+(t?e.slice(10):e).split("").map((function(e){return e.charCodeAt(0)})).map((function(e,t){return String.fromCharCode(e^a.charCodeAt(t%8))})).join("")}function i(e){var t=[],a=e._save_properties;return null!=a&&"object"==typeof a&&Array.isArray(a)&&t.push.apply(t,a),t}function o(e){if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map((function(e){return o(e)}));if(0===Object.keys(e).length)return null;var t,a={},n=i(e);for(t in e)if(!t.startsWith("_")&&null!=e[t]&&(0===n.length||n.includes(t))){var s=e[t];if("object"==typeof s){var r=o(s);null!=r&&(a[t.toString()]=r)}else"function"!=typeof s&&(a[t.toString()]=s)}return a}a.skipEncoding=function(){s=!0},a.saveAs=function(e,t){return void 0===t&&(t=!1),t?JSON.stringify(o(e),null,2):window.btoa(r(JSON.stringify(o(e))))},a.loadAs=function(e,t){var a=null;if(!a)try{a=JSON.parse(r(window.atob(t)))}catch(e){a=null}if(!a)try{a=JSON.parse(window.atob(t))}catch(e){a=null}if(!a)try{a=JSON.parse(t)}catch(e){a=null}return!!a&&function(e,t){if(!t||"object"!=typeof t||"object"!=typeof e)return!1;var a;for(a in e)typeof t[a]==typeof e[a]&&(e[a]=t[a]);return!0}(e,a)},a.setSaveProperties=function(e,t){var a=i(e);return a.push.apply(a,t),Object.assign(e,{_save_properties:(0,n.default)(a)}),e}},{"./dedupe":38,tslib:"tslib"}],45:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("tslib").__importDefault(e("./clamp"));a.default=function(e,t,a){var s=void 0===t?{}:t,r=s.kind,i=void 0===r?"":r,o=s.source,l=void 0===o?"":o,c=s.min,u=void 0===c?0:c,d=s.max,m=void 0===d?1/0:d,f=s.direction,v=void 0===f?-1:f,h=s.combineWithCurrentTick,g=void 0!==h&&h,p=s.assignToResourceTick,x=void 0===p||p,j=e.tick,b=function(t,s){var r;if(!l||s===l){var o=null!==(r=i?e.extra[i]:e.count)&&void 0!==r?r:0;(o>u||v>0)&&(o<m||v<0)&&(o=(0,n.default)(o+v*t,u,m),i?e.extra[i]=o:e.count=o,!a||o!==u&&o!==m||a(e,o,i,s))}},y=j&&g?function(e,t){j(e,t),b(e,t)}:b;return x&&(e.tick=y),y}},{"./clamp":37,tslib:"tslib"}]},{},[21]);