(()=>{"use strict";var __webpack_modules__={181:(e,t,s)=>{var n=s(893),a=s(745),r=s(294);function i(){const e=window.localStorage,t="__storage_test__";if(!e)return!1;try{return e.setItem(t,t),e.removeItem(t),!0}catch(t){return t instanceof DOMException&&0!==e.length&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)}}function o(...e){return Object.assign({},e)}o.assign=function(e,t,s){const n=e||{};return null!=t&&n[t]&&null!=s&&"object"==typeof s?n[t]=Object.assign(Object.assign({},n[t]),s):null!=t&&null!=s&&(n[t]=s),n},o.copy=function(e,t){e||(e={}),t||(t={});for(let s in e)o.assign(t,s,e[s]);return t},o.map=function(e,t,s){const n={};for(const a in e){const r=s?s(a):a,i=e[a],o=t?t(i,a):i;n[r]=o}return n},o.filter=function(e,t,s){const n={};for(const a in e){const r=!s||s(a),i=!t||t(e[a],a);r&&i&&(n[a]=e[a])}return n};var l=s(243);function c(e=0,t=0,s=1){return isNaN(e)||e<t?t:e>s?s:e}function u(...e){return[...e]}u.dedupe=function(e){return e.filter(((e,t,s)=>s.indexOf(e)===t))},u.shuffle=function(e){for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e},u.className=function(e,...t){return[...Array.isArray(e)?e:[e],...t].map((e=>e?String(e):void 0)).filter((e=>!!e)).join(" ")||void 0},u.pickWeightedSamples=function(e,t=1,s=0,n,a){const r=[];if(t=Math.floor(c(t,0,e.length)),s=c(s,0,1),0===t)return r;let i=[...e];n&&i.sort(!0===n?void 0:n),a&&(i=i.filter(a));for(let e=0;e<t&&0!==i.length;e++){let e=0;const t=s,n=Math.random();e=.5===t?n:(Math.sqrt(t*t+n-2*t*n)-t)/(1-2*t),e=Math.floor(e*i.length),i.splice(e,1).forEach((e=>r.push(e)))}return r};let d=!1;function m(e){if(d)return e;const t=e.startsWith(".."),s=(t?e:Math.random().toString(36)).substring(2,10);return(t?"":".."+s)+(t?e.slice(10):e).split("").map((e=>e.charCodeAt(0))).map(((e,t)=>String.fromCharCode(e^s.charCodeAt(t%8)))).join("")}function h(e){const t=[],s=e._save_properties;return null!=s&&"object"==typeof s&&Array.isArray(s)&&t.push(...s),t}function g(e){if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map((e=>g(e)));if(e instanceof l.Z)return e.toJSON();if(0===Object.keys(e).length)return null;const t={},s=h(e);let n;for(n in e)if(!n.startsWith("_")&&null!=e[n]&&(0===s.length||s.includes(n))){const s=e[n];if("object"==typeof s){const e=g(s);null!=e&&(t[n.toString()]=e)}else"function"!=typeof s&&(t[n.toString()]=s)}return t}function f(e,t){if(null!=e){const s=h(e);s.push(...t),Object.assign(e,{_save_properties:u.dedupe(s)})}return e}function v(e,t,...s){const n=Object.assign({},t);if(e){let t;for(t in e){let a=e[t];o.assign(n,t,"function"==typeof a?a(n,...s):a)}}return n}function p({kind:e="",tickSource:t="",minValue:s=0,maxValue:n=1/0,direction:a=1,streakKind:r="current",maxStreakKind:i="max",minStreakKind:o="min",resetStreakSource:u=""}={}){return function(d,m){var h,g;if(t&&m!==t)u&&m!==u||r&&this.extra&&(this.extra[r]=a>0?s:a<0?n:0);else{let t=null!==(g=e&&this.extra?this.extra[e]:null===(h=this.count)||void 0===h?void 0:h.toNumber())&&void 0!==g?g:0;(t>s||a>0)&&(t<n||a<0)&&(t=c(t+a*d,s,n),e&&this.extra?this.extra[e]=t:this.count=l.Z.fromNumber(t),r&&this.extra&&null!=this.extra[r]&&(this.extra[r]=c(this.extra[r]+a*d,s,n),i&&null!=this.extra[i]&&this.extra[i]<this.extra[r]&&(this.extra[i]=this.extra[r]),o&&null!=this.extra[o]&&this.extra[o]>this.extra[r]&&(this.extra[o]=this.extra[r])))}return null}}const b=[{name:"totalTime",icon:"ti:clock",display:"time",tick:p()},{name:"activeTime",icon:"ti:alarm",display:"time",extra:{current:0,max:0},tick:p({tickSource:"tick"})},{name:"offlineTime",icon:"ti:user-off",display:"time",extra:{current:0,max:0},tick:p({tickSource:"load"})}];function x(e,t){var s,n;return null!==(n=e.resources["string"==typeof t?t:null!==(s=t.name)&&void 0!==s?s:""])&&void 0!==n?n:N(e,t)}function j(e,t){return t.map((({resource:t,count:s})=>({resource:x(e,t),count:s}))).filter((({resource:e,count:t})=>e&&l.Z.neq(t,0)))}function N(e,t){var s,n;const a="string"==typeof t?t:null!==(s=t.name)&&void 0!==s?s:"",r=null!==(n=e.resources[a])&&void 0!==n?n:function(e,t){const s={manager:e,name:t,priority:1/0,count:l.Z.dZero,extra:{},value(){var e,t;return s.count.clamp(null!==(e=s.minCount)&&void 0!==e?e:0,null!==(t=s.maxCount)&&void 0!==t?t:1/0)},cost:()=>[],buy:(e=1,t="partial",n=1,a=1,r)=>O(s,e,t,n,a,r),sell:(e=1,t="full",n=1,a=1,r)=>s.buy("object"!=typeof e||e instanceof l.Z?l.Z.neg(e):o.map(e,(e=>-(null!=e?e:0))),t,n,a,r),add:(e,t)=>s.buy(e,"free",t),canBuy:(e,t,n)=>s.buy(e,"dry-partial",1,t,n),execution:{},rate:{count:l.Z.dZero,ticks:0,pastCounts:[],pastTicks:[]}};return f(s,["name","unlocked","disabled","count","extra"])}(e,a);if("string"!=typeof t){let e;for(e in t)"extra"===e?o.assign(r,e,t[e]):"count"===e||"maxCount"===e||"minCount"===e?null!=t[e]&&(r[e]=l.Z.fromValue(t[e])):"manager"!==e&&"name"!==e&&null!=t[e]&&(r[e]=t[e])}return r.name&&(e.resources[r.name]=r),r}function y(e,t=!0){return _(e).every((({resource:e,count:s})=>{var n,a;return(null===(n=e.unlocked)||void 0===n||n)&&e.count.minus(s).gte(t&&null!==(a=e.minCount)&&void 0!==a?a:0)}))}function O(e,t,s,n,a,r){var i,o,u,d;if("object"!=typeof t||t instanceof l.Z)return k(e.manager,[{resource:e,count:t}],s,n,a,r);const m=w(e,r).toNumber();if(!isFinite(m)||Math.abs(t.minAmount)>Math.abs(t.maxAmount)||Math.abs(t.maxAmount)>1e3||0===t.increments)return{count:0,style:s,gain:[],cost:[]};const h=null!==(o=null===(i=e.minCount)||void 0===i?void 0:i.toNumber())&&void 0!==o?o:0,g=null!==(d=null===(u=e.maxCount)||void 0===u?void 0:u.toNumber())&&void 0!==d?d:1/0,f=t.increments;function v(e){return c(Math.floor((m+e)/f)*f,h,g)-m}let p=k(e.manager,[{resource:e,count:v(t.maxAmount)}],"dry-partial",n,a,r),b=p.count.toNumber();if(b%f!=0&&(p=k(e.manager,[{resource:e,count:v(b)}],"dry-partial",n,a,r),b=p.count.toNumber()),0===b||t.minAmount>=0&&b<t.minAmount||t.minAmount<0&&b>t.minAmount){if(!s.includes("dry"))return{count:0,style:s,gain:[],cost:[]};const i=v(c(f,Math.min(t.minAmount,t.maxAmount),Math.max(t.minAmount,t.maxAmount)));p=k(e.manager,[{resource:e,count:0===i?Math.sign(f):i}],"dry-full",n,a,r),b=p.count.toNumber()}return s.includes("dry")?p:k(e.manager,[{resource:e,count:b}],s,n,a,r)}function k(e,t,s,n,a,r){n=e.gainFactor?e.gainFactor(n):n,a=e.costFactor?e.costFactor(a):a;const i=j(e,t).map((({resource:t,count:i})=>{var o;const c=function(e,t,s,n,a,r,i){var o,c,u,d;if(!t||l.Z.eq(s,0))return{count:0,style:n,gain:[],cost:[]};let m=w(t,i),h=m.plus(s).clamp(null!==(o=t.minCount)&&void 0!==o?o:0,null!==(c=t.maxCount)&&void 0!==c?c:1/0);if("free"===n){const e=h.minus(m);return{count:e,style:n,gain:[{resource:t,count:e.mul(a)}],cost:[]}}m.gt(h)&&([m,h]=[h,m],[a,r]=[l.Z.neg(a),l.Z.neg(r).mul(null!==(u=e.settings.sellRatio)&&void 0!==u?u:1)]);let g=[];null!==(d=t.unlocked)&&void 0!==d&&!d&&t.unlockCost&&(g=j(e,t.unlockCost()));const f=m.floor().toNumber(),v=h.floor().toNumber();if(!isFinite(f)||!isFinite(v)||Math.abs(v-f)>1e3)return{count:0,style:n,gain:[],cost:[]};let p=0;for(let s=f;s<v;s++){const a=j(e,t.cost(s+1));a.forEach((e=>e.count=l.Z.mul(e.count,r)));const i=_([...g,...a]);if(n.includes("partial")&&!y(i))break;p++,g=i}return!n.includes("dry")&&!y(g)||"full"===n&&p!==v-f?{count:0,style:n,gain:[],cost:[]}:{count:p*l.Z.sign(a),style:n,gain:[{resource:t,count:l.Z.mul(a,p)}],cost:g}}(e,t,i,s,t.gainFactor?t.gainFactor(n):n,t.costFactor?t.costFactor(a):a,r);if(s.includes("dry")||l.Z.eq(c.count,0))return c;{if(null!==(o=t.unlocked)&&void 0!==o&&!o){if(!t.unlockCost)return{count:0,style:s,gain:[],cost:[]};t.unlocked=!0}const e=C(t,c.gain),n=c.cost.map((({resource:e,count:t})=>C(e,[{resource:e,count:l.Z.neg(t)}]))).flat(),a=Object.assign(Object.assign({},c),{gain:e,cost:n});return t.onPurchase&&t.onPurchase(a),a}}));return{count:i.reduce(((e,t)=>e.plus(t.count)),l.Z.dZero),style:s,gain:_(i.map((e=>e.gain)).flat()),cost:_(i.map((e=>e.cost)).flat())}}function w(e,t){return null!=t?null!=e&&"string"==typeof t&&null!=e.extra[t]?l.Z.fromValue_noAlloc(e.extra[t]):l.Z.fromValue_noAlloc(t):null!=e?e.count:l.Z.dNaN}function _(e){const t={};return e.forEach((({resource:e,count:s})=>{var n,a;null!==(n=t[a=e.name])&&void 0!==n||(t[a]={resource:e,count:0}),t[e.name].count=l.Z.add(t[e.name].count,s)})),Object.values(t).filter((({count:e})=>l.Z.neq(e,0)))}function C(e,t){return _(t.filter((({resource:t})=>e.name===t.name)).map((({count:t})=>{var s,n;const a=e.count;return e.count=e.count.plus(t).clamp(null!==(s=e.minCount)&&void 0!==s?s:0,null!==(n=e.maxCount)&&void 0!==n?n:1/0),[{resource:e,count:e.count.minus(a)}]})).flat())}const S={ticksPerSecond:50,framesPerSecond:10,saveFrequencySecs:60,lastReset:Date.now(),lastUpdate:Date.now(),lastSaved:0,lastLoaded:Date.now(),rateUpdateSecs:.1,rateHistoryWindow:10,minResourceUpdateSecs:.001,maxResourceUpdateSecs:86400,maxResourceTickSecs:1,offlineSummaryMinSecs:60,offlineSummaryMaxUpdates:12,sellRatio:.8,timeDilation:1,buyAmount:"+1",numberFormat:"Standard",theme:"light"},M=[];const Z=globalThis.gamePackage.name;function A(e,t){const s=Object.assign({},e),n=!!t&&function(e,t){let s=null;if(!s)try{s=JSON.parse(m(window.atob(t)))}catch(e){s=null}if(!s)try{s=JSON.parse(window.atob(t))}catch(e){s=null}if(!s)try{s=JSON.parse(t)}catch(e){s=null}return!!s&&function(e,t){if(null==e||null==t||"object"!=typeof t||"object"!=typeof e)return!1;let s;for(s in e)typeof t[s]==typeof e[s]&&(e[s]=t[s]);return!0}(e,s)}(s,t);return e.init(),M.forEach((t=>t(e))),n&&(o.copy(s.settings,e.settings),Object.values(s.resourceManager.resources||{}).forEach((t=>e.resourceManager.upsert(t)))),e.settings.lastLoaded=Date.now(),e.resourceManager.update(void 0,"load"),n}function $(e,t){return e.settings.lastSaved=Date.now(),function(e,t=!1){return t?JSON.stringify(g(e),null,2):window.btoa(m(JSON.stringify(g(e))))}(e,t)}const q=function e(t){var s,n;const a=t||{};return null!==(s=a.init)&&void 0!==s||(a.init=()=>{}),a.load=()=>{return A(a,(e=Z,i()?window.localStorage.getItem(e):null));var e},a.loadAs=e=>A(a,e),a.save=e=>{return t=Z,s=$(a,e),void(i()&&s&&window.localStorage.setItem(t,s));var t,s},a.saveAs=e=>$(a,e),a.reset=()=>function(t){var s;s=Z,i()&&window.localStorage.removeItem(s),e(t)}(a),a.settings=Object.assign(Object.assign({},S),{lastReset:Date.now(),lastUpdate:Date.now(),lastLoaded:Date.now()}),a.resourceManager=function(e,t){const s={context:e,settings:t,resources:{},upsert:e=>N(s,e),get:e=>x(s,e),canAfford:e=>y(j(s,e)),purchase:(e,t="partial",n=1,a=1,r)=>k(s,e,t,n,a,r),purchaseAll:(e={},t=1,n,a=1,r=1,i)=>function(e,t,s,n,a,r,i){let o=Object.values(e.resources).filter((e=>{var t;return(null===(t=e.unlocked)||void 0===t||t)&&!e.disabled}));const c=Object.keys(t);c.length>0&&(o=o.filter((e=>c.includes(e.name))));const u=o.map((e=>{var o;return O(e,s,n,a,r,null!==(o=t[e.name])&&void 0!==o?o:i)}));return{count:u.reduce(((e,t)=>e.plus(t.count)),l.Z.dZero),style:n,gain:_(u.map((e=>e.gain)).flat()),cost:_(u.map((e=>e.cost)).flat())}}(s,e,t,null!=n?n:"partial",a,r,i),update:(e,t)=>function(e,t,s){var n;const{rateUpdateSecs:a=.1,rateHistoryWindow:r=10,minResourceUpdateSecs:i=.001,maxResourceUpdateSecs:o=86400,maxResourceTickSecs:l=1,timeDilation:d=1}=e.settings;let m=c((t-(null!==(n=e.settings.lastUpdate)&&void 0!==n?n:t))/1e3,0,o);if(m<i&&null!=e.settings.lastUpdate)return[];e.settings.lastUpdate=t;const h=t-1e3*m,g={};Object.values(e.resources).forEach((t=>{var s,n;!t.autoUnlock||t.disabled||null===(s=t.unlocked)||void 0===s||s||y(j(e,(null!==(n=t.unlockCost)&&void 0!==n?n:t.cost)(1)),!1)&&(t.unlocked=!0)}));const f=Object.values(e.resources).filter((e=>{var t;return(null===(t=e.unlocked)||void 0===t||t)&&!e.disabled})).sort(((e,t)=>e.priority-t.priority));f.forEach((e=>{var s,n,a,r,i;g[e.name]=e.count,null!==(s=(r=e.rate).lastCountUpdate)&&void 0!==s||(r.lastCountUpdate=h),null!==(n=(i=e.rate).lastCount)&&void 0!==n||(i.lastCount=e.count),e.execution.lastTick=c(null!==(a=e.execution.lastTick)&&void 0!==a?a:h,t-1e3*o,t),e.execution.lastAttempt=t}));const v={},p=f.filter((e=>e.tick)),b=.001/d;for(;m>0;){m-=c(m,i,l);const e=t-1e3*m;p.forEach((t=>{var n,a,r;const i=(e-t.execution.lastTick)*b;i>0&&(!t.shouldTick||t.shouldTick(i,s))&&(t.execution.lastResult=t.tick(i,s),t.execution.lastTick=e,t.rate.deltaTicks=(null!==(n=t.rate.deltaTicks)&&void 0!==n?n:0)+1,null!==(a=(r=t.rate).lastTickUpdate)&&void 0!==a||(r.lastTickUpdate=e),t.execution.lastResult&&(v[t.name]||(v[t.name]=[]),v[t.name].includes(t.execution.lastResult)||v[t.name].push(t.execution.lastResult)))}))}if(f.forEach((t=>{var s;if(t.autoAward&&!t.disabled&&t.count.lt(null!==(s=t.maxCount)&&void 0!==s?s:0)){const s=t.cost(t.count.add(1));y(j(e,s),!1)&&(t.count=t.count.add(1),t.onPurchase&&t.onPurchase({count:1,style:"free",gain:[{resource:t,count:1}],cost:[]}))}})),f.forEach((e=>{var s,n,i,o;const l=(t-(null!==(s=e.rate.lastCountUpdate)&&void 0!==s?s:0))/1e3;(null==e.rate.lastCountUpdate||null==e.rate.lastCount||l>=a)&&(e.rate.count=e.count.minus(null!==(n=e.rate.lastCount)&&void 0!==n?n:0).div(l),e.rate.lastCount=e.count,e.rate.lastCountUpdate=t,e.rate.pastCounts.unshift(e.rate.count),e.rate.pastCounts.splice(r));const c=(t-(null!==(i=e.rate.lastTickUpdate)&&void 0!==i?i:0))/1e3;(null==e.rate.lastTickUpdate||null==e.rate.deltaTicks||c>=a)&&(e.rate.ticks=(null!==(o=e.rate.deltaTicks)&&void 0!==o?o:0)/c,e.rate.deltaTicks=0,e.rate.lastTickUpdate=t,e.rate.pastTicks.unshift(e.rate.ticks),e.rate.pastTicks.splice(r))})),f.forEach((e=>{var t;if(g[e.name]=e.count.minus(null!==(t=g[e.name])&&void 0!==t?t:0),g[e.name].eq(0)&&delete g[e.name],e.onChange&&g[e.name]){const t=e.onChange(e.count,s);t&&!v[e.name].includes(t)&&v[e.name].push(t)}})),e.execution[s]={lastTick:t,lastDelta:(t-h)/1e3,lastResult:u.dedupe(Object.values(v).flat()),lastChanges:g},e.onUpdateComplete){const n=e.onUpdateComplete(g,(t-h)/1e3,s);n&&(v.__ResourceManager_onUpdateComplete=[n])}return e.execution[s].lastResult}(s,null!=e?e:Date.now(),null!=t?t:"unknown"),execution:{}};return b.forEach((e=>N(s,e))),f(s,["resources"])}(a,a.settings),null!==(n=a.popupManager)&&void 0!==n||(a.popupManager=function(e,t){const s=t.get("popup:states"),n={context:e,currentStates:s,popups:{},register(...e){e.forEach((e=>{var t,s,a,r;n.popups[null!==(t=e.name)&&void 0!==t?t:""]||(n.popups[null!==(s=e.name)&&void 0!==s?s:""]={}),o.assign(n.popups[null!==(a=e.name)&&void 0!==a?a:""],null!==(r=e.step)&&void 0!==r?r:0,e)}))},resolve(e="",t=0){var s;const a=(null!==(s=n.popups[e])&&void 0!==s?s:{})[t];if(!a)return;const r=Object.keys(n.popups[e]).map((e=>parseInt(e))).sort(((e,t)=>e-t)),i=r.indexOf(t),o=r[i-1],l=r[i+1],c=100*(1+Math.floor(t/100));return v(a,{name:e,step:t,enabled:!0,title:`${e} #${t}`,body:"...",prev:{name:e,step:null!=o?o:t,title:"< back"},next:{name:e,step:null!=l?l:c,title:l?"next >":"done"},skip:{name:e,step:c,title:"skip >>>"},highlightSelector:"",greyOut:!1,bounds:{left:"50% - 14rem",top:"6rem",width:"28rem",height:"28rem"}},n)},getPopupState(e){var t;const n="string"==typeof e?e:null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"",a=s.extra[n];return Object.assign({name:n,step:"object"==typeof e&&(null==e?void 0:e.step)||0,priority:1/0},a)},setPopupState(e,t){const a=n.getPopupState(e);s.extra[a.name]=Object.assign(Object.assign({},a),t)},delPopupState(e){const t=n.getPopupState(e).name;delete s.extra[t]},getCurrentPopup:()=>Object.keys(n.currentStates.extra).map(n.getPopupState).sort(((e,t)=>e.priority-t.priority)).reduce((function(e,t){if(e)return e;const s=n.resolve(t.name,t.step);return s&&s.enabled?s:void 0}),void 0)};return n}(a,a.resourceManager)),a.init(),M.forEach((e=>e(a))),f(a,["settings","resourceManager"])}(),T=(0,r.createContext)(q);function P(e){return(0,n.jsx)(T.Provider,Object.assign({value:q},{children:e.children}))}function R(){return function(e){return Object.assign(Object.assign(Object.assign({},e.resourceManager),e),{context:e})}((0,r.useContext)(T))}var U=s(655),B=s(250);function F(e){var t,s;const n="string"==typeof e?{id:e}:e;let a,r=document.getElementById(null!==(t=n.id)&&void 0!==t?t:"");for(a in r||(r=document.createElement(null!==(s=n.tagName)&&void 0!==s?s:"div"),document.body.appendChild(r)),n)o.assign(r,a,n[a]);return r}function E(e){e?document.documentElement.setAttribute("theme",e):document.documentElement.removeAttribute("theme")}function D(e){if(e.icon.includes(";")){const[t,...s]=e.icon.split(";");e=Object.assign(Object.assign({},e),{icon:t,children:(0,n.jsxs)(n.Fragment,{children:[s.map(((e,t)=>(0,n.jsx)(I,{icon:e},`badge-${t}`))),e.children]})})}return(0,n.jsxs)("div",Object.assign({className:"icon-wrapper"},{children:[z(e),e.children]}))}function I(e){return z(e,"icon-badge")}function z({icon:e,pack:t,color:s,size:a,position:r,className:i,style:o},l=""){const c=e.split(/\s+/).filter((e=>e.trim().length>0)).filter((s=>!s.includes(":")||!([t,e]=s.split(":",2)))).filter((e=>!/^#[0-9a-f]+$/i.test(e)||!(s=e))).filter((e=>!/^[-.0-9]+(%|px|em|vh|vw)$/i.test(e)||!(a=e))).filter((e=>"top-left"!==e&&"top-right"!==e&&"bottom-left"!==e&&"bottom-right"!==e||!(r=e)));return e=c.pop()||e,s=c.pop()||s,a=c.pop()||a,i=["icon",t&&`icon-${t}`,e&&`icon-${e}`,(r=r||(l?"top-right":void 0))&&`icon-${r}`,s&&!s.startsWith("#")&&s,i,l].filter(Boolean).join(" "),(0,n.jsx)("svg",Object.assign({className:i,width:a,height:a,color:(null==s?void 0:s.startsWith("#"))?s:void 0,style:o},{children:(0,n.jsx)("use",{href:`${t?`sprites/${t}.svg`:""}#${e}`})}))}const L={light:"Light Mode",dark:"Dark Mode","jumbo-light":"Jumbo Light","jumbo-dark":"Jumbo Dark"};function G(e,t,s=0,n=s,a=0){var r;const i=l.Z.fromValue_noAlloc(e);return t=null!==(r="string"==typeof t?H[t]:t)&&void 0!==r?r:V,i.isFinite()?i.exponent<-300?i.sign<0?t.negativeVerySmall(i.abs(),a):t.verySmall(i,a):i.exponent<3?i.sign<0?t.negativeSmall(i.abs().toNumber(),a):t.small(i.toNumber(),a):i.sign<0?t.negativeDecimal(i.abs(),s,n):t.decimal(i,s,n):i.sign<0?t.negativeInfinite():t.infinite()}const H={},W={prec:3,commas:{show:!0,min:1e6,max:1e9}};G.all=H,G.exponentSettings=W,G.register=e=>{var t;return H[null!==(t=e.name)&&void 0!==t?t:""]=Object.assign(Object.assign({},V),e)};const V={name:"System",infinite:()=>(1/0).toString(),negativeInfinite(){return`-${this.infinite()}`},decimal(e,t,s){var n;return e.toStringWithDecimalPlaces(null!==(n=null!=t?t:s)&&void 0!==n?n:0)},negativeDecimal(e,t,s){return`-${this.decimal(e,t,s)}`},verySmall(e,t){return this.small(e.toNumber(),t)},negativeVerySmall(e,t){return`-${this.verySmall(e,t)}`},small:(e,t)=>e.toFixed(t),negativeSmall(e,t){return`-${this.small(e,t)}`}};G.register(V);const Q=G.register({name:"Standard",decimal(e,t,s){var n;return null!==(n=this.exponent)&&void 0!==n||(this.exponent=ee(Y,1,1e3)),this.exponent(e,t,s)}}),K=(e,t=Q)=>G.register({name:`Mixed ${e.name}`,decimal:(s,n,a)=>(s.exponent<33?t:e).decimal(s,n,a)});K(G.register({name:"Scientific",decimal(e,t,s){var n;return null!==(n=this.exponent)&&void 0!==n||(this.exponent=ee(X(this),1)),this.exponent(e,t,s)}})),K(G.register({name:"Engineering",decimal(e,t,s){var n;return null!==(n=this.exponent)&&void 0!==n||(this.exponent=ee(X(this),3)),this.exponent(e,t,s)}})),K(G.register({name:"Logarithmic",decimal(e,t,s){var n;return null!==(n=this.exponent)&&void 0!==n||(this.exponent=X(this,((e,t)=>e.toFixed(t)))),`e${this.exponent(e.log10(),t,s)}`}}));const J={abbreviations:["K","M","B","T","Qa","Qt","Sx","Sp","Oc","No"],prefixes:[["","U","D","T","Qa","Qt","Sx","Sp","O","N"],["","Dc","Vg","Tg","Qd","Qi","Se","St","Og","Nn"],["","Ce","Dn","Tc","Qe","Qu","Sc","Si","Oe","Ne"]],prefixes_2:["","MI-","MC-","NA-","PC-","FM-","AT-","ZP-"]};function Y(e){const t=e.toNumber()-1;if(-1===t)return"";if(t>W.commas.min)return(1/0).toString();if(t<J.abbreviations.length)return J.abbreviations[t];const s=[];for(let e=t;e>0;e=Math.floor(e/10))s.push(J.prefixes[s.length%3][e%10]);for(;s.length%3!=0;)s.push("");let n="";for(let e=s.length/3-1;e>=0;e--)n+=s.slice(3*e,3*e+3).join("")+J.prefixes_2[e];return n.replace(/-[A-Z]{2}-/g,"-").replace(/U([A-Z]{2}-)/g,"$1").replace(/-$/,"")}function X(e,t=(e=>e.toString())){return function(s,n=W.prec,a=Math.max(2,n)){if(s.lt(W.commas.min))return t(s.toNumber(),Math.max(n,1));if(W.commas.show&&s.lt(W.commas.max)){const e=t(s.toNumber(),0).split(".");return e[0]=e[0].replace(/\w+$/g,(e=>Array.from(Array(Math.ceil(e.length/3))).map(((t,s)=>s?e.slice(-3*(s+1),-3*s):e.slice(-3))).reverse().join(","))),e.join(".")}return e.decimal(s,a,a)}}function ee(e,t,s=10){return function(n,a=0,r=0){const i=Math.pow(s,t);let o=n.log(i).floor().mul(t);s>=100&&(o=o.max(l.Z.dZero));let c=n.div(o.pow_base(s)).toFixed(a);return c===i.toFixed(a)&&(c=1..toFixed(a),o=o.add(t)),o.eq(l.Z.dZero)?c:`${c}${10===s?"e":" "}${e(o,r)}`}}function te(e,t){return null==e||null==e||"string"==typeof e?te.word(null!=e?e:void 0,t):e instanceof Date?te.time(e.getTime(),t):e instanceof l.Z||"number"==typeof e?te.number(e,t):""}te.number=function(e,t){var s,n,a;const r=null!==(s=null==t?void 0:t.prec)&&void 0!==s?s:0,i=null!==(n=null==t?void 0:t.smallPrec)&&void 0!==n?n:r,o=null!==(a=null==t?void 0:t.expPrec)&&void 0!==a?a:Math.max(r,"tiny"===(null==t?void 0:t.len)?0:"short"===(null==t?void 0:t.len)?2:3);let c=G(e,null==t?void 0:t.notation,r,o,i);return c&&(null==t?void 0:t.alwaysShowSign)&&!"+-".includes(c[0])&&l.Z.gte(e,0)&&(c="+"+c),c},te.time=function(e,t){var s,n,a,r,i,o;const l=null!==(s=null==t?void 0:t.len)&&void 0!==s?s:"long",c=(null!==(n=null==t?void 0:t.sep)&&void 0!==n?n:"long"===l)?", ":":",u=((null==t?void 0:t.oxfordComma)?c:"")+((null!==(a=null==t?void 0:t.lastSep)&&void 0!==a?a:"long"===l)?" and ":c),d=(null!==(r=null==t?void 0:t.now)&&void 0!==r?r:"long"===l)?"now":"",m=(null!==(i=null==t?void 0:t.never)&&void 0!==i?i:"long"===l)?"never":"",h=(null!==(o=null==t?void 0:t.ago)&&void 0!==o?o:"long"===l)?"ago":"";if(m&&(e<0||null!=(null==t?void 0:t.epoch)&&(t.epoch<=0||e-t.epoch<0)))return m;if(d&&(0===e||null!=(null==t?void 0:t.epoch)&&e===t.epoch))return d;null!=(null==t?void 0:t.epoch)&&(e-=t.epoch);let g=Math.floor(e/1e3),f=Math.floor(e-1e3*g),v=Math.floor(g/60);g-=60*v;let p=Math.floor(v/60);v-=60*p;let b=Math.floor(p/24);p-=24*b;let x=Math.floor(b/365);if(b-=365*x,(null==t?void 0:t.millis)||(f=0),null!=d&&b+p+v+g+f===0)return d;let j=[];if(j="long"!==l?[x>0?x.toFixed(0):"",b>0?b.toFixed(0):"",p>0||"short"===l?p.toFixed(0):"",v>0||"short"===l?v.toFixed(0):"",(g+f/1e3).toFixed(!(null==t?void 0:t.millis)||"tiny"===l&&0===f?0:3)].map((e=>"short"!==l||1!==e.length&&1!==e.indexOf(".")?e:"0"+e)):[[x,"year"],[b,"day"],[p,"hour"],[v,"minute"],[g,"second",x+b+p+v===0,f]].map((([e,t,s=!1,n=0])=>e>0||n>0||s&&0===e?e.toString()+(n>0?"."+n.toString():"")+" "+t+(1===e?"":"s"):"")),j=j.filter((e=>!!e)),j.length>2){const e=j.pop();j=[j.join(c),e]}let N=j.join(u)+(h?" "+h:"");return N&&(null==t?void 0:t.alwaysShowSign)&&e>=0&&"long"!==l&&!"+-".includes(N[0])&&(N="+"+N),N},te.word=function(e,t){var s,n,a,r,i,o;return e||(e=null!==(a=Math.abs(Math.abs(null!==(s=null==t?void 0:t.count)&&void 0!==s?s:0)-1)<=(null!==(n=null==t?void 0:t.tolerance)&&void 0!==n?n:.001)?null==t?void 0:t.singularName:null==t?void 0:t.pluralName)&&void 0!==a?a:null==t?void 0:t.name),(null===(r=null==t?void 0:t.condition)||void 0===r||r)&&(e||null!==(i=null==t?void 0:t.allowEmpties)&&void 0!==i&&i)?null===(o=null==t?void 0:t.capitalize)||void 0===o||o?(null!=e?e:"").replace(/([a-z])([A-Z]|_\S)/g,((e,t,s)=>`${t} ${s.slice(-1)}`)).replace(/(?:^|\s)\w(?=\w)/g,(e=>e.toUpperCase())):null!=e?e:"":""},te.resource=function(e,t){var s,n,a,r,i,c,u,d,m,h,g,f,v,p,b,x,j,N,y,O,k,w,_,C,S;t||(t={});let M=null!==(s=(e=t.override?Object.assign(Object.assign({},e),t.override):e).display)&&void 0!==s?s:"number";null!==(n=t.len)&&void 0!==n||(t.len="long"),null!==(a=t.now)&&void 0!==a||(t.now=""),null!==(r=t.never)&&void 0!==r||(t.never=""),null!==(i=t.ago)&&void 0!==i||(t.ago=""),null!==(c=t.prec)&&void 0!==c||(t.prec="time"===M?3:"number"===M?2:1),null!==(u=t.smallPrec)&&void 0!==u||(t.smallPrec="number"===M?0:t.prec),null!==(d=t.round)&&void 0!==d||(t.round="number"===M?l.Z.floor:l.Z.round),null!==(m=t.millis)&&void 0!==m||(t.millis=t.prec>0),t.notation||(t.notation=(null===(h=e.manager)||void 0===h?void 0:h.settings.numberFormat)||"Standard"),null!==(g=t.tolerance)&&void 0!==g||(t.tolerance=Math.pow(10,-t.prec-("percentage"===M?2:0)));const Z=null===(f=e.unlocked)||void 0===f||f?e.disabled?"disabled":"active":"locked";let A,$,q=null!==(b=(null===(v=t.override)||void 0===v?void 0:v.value)?t.override.value():null===(p=t.override)||void 0===p?void 0:p.count)&&void 0!==b?b:e.value?e.value():e.count;q&&(q=t.round(q.div(t.tolerance)).mul(t.tolerance)),q&&"none"!==M&&(A="time"===M?te.time(1e3*q.toNumber(),t):"percentage"===M?te(q,t)+"%":te(q,t),$=se[q.cmp_tolerance(l.Z.dZero,t.tolerance)]),null!==(x=t.count)&&void 0!==x||(t.count=q?q.toNumber():void 0),null!==(j=t.name)&&void 0!==j||(t.name=e.name),null!==(N=t.singularName)&&void 0!==N||(t.singularName=null!==(y=e.singularName)&&void 0!==y?y:e.pluralName),null!==(O=t.pluralName)&&void 0!==O||(t.pluralName=null!==(k=e.pluralName)&&void 0!==k?k:e.singularName);const T=te(null===(w=t.override)||void 0===w?void 0:w.name,t)||void 0,P=e.icon;let R;e.maxCount&&(R=te(e.maxCount,t));const U=o.map(e.extra||{},(e=>te(e,t)||void 0),(e=>te(e,t)));let B,F;if((null===(_=e.rate)||void 0===_?void 0:_.lastCountUpdate)&&e.rate.count&&"none"!==M){let s=e.rate.count;null!==(C=t.useRatePercent)&&void 0!==C||(t.useRatePercent=q&&q.gte(1e3)&&s.gte(1e3)),"number"===M&&t.useRatePercent&&q&&(M="percentage",s=s.div(q)),t.len="long"!==t.len?"tiny":"short",t.alwaysShowSign=!0,t.smallPrec=(null!==(S=t.smallPrec)&&void 0!==S?S:t.prec)+2,t.prec+=2,B="time"===M?te.time(1e3*e.rate.count.toNumber(),t):"percentage"===M?te(s.mul(100),t)+"%":te(s,t),B&&(B+="/s"),F=se[l.Z.cmp_tolerance(s,0,t.tolerance)]}return{active:Z,name:T,icon:P,value:A,valueSign:$,max:R,rate:B,rateSign:F,extras:U}};const se={[-1]:"negative",0:"zero",1:"positive"};function ne(e){return ue("string"==typeof e?{message:e}:null!=e?e:{})}ne.info=(e,t)=>ue(Object.assign(Object.assign({},t),{message:e,type:"info"})),ne.success=(e,t)=>ue(Object.assign(Object.assign({},t),{message:e,type:"success"})),ne.fail=(e,t)=>ue(Object.assign(Object.assign({},t),{message:e,type:"fail"}));const ae={top:"top",bottom:"bottom"},re={left:"left",center:"center",right:"right"},ie={info:"ti:info-circle",success:"ti:circle-check",fail:"ti:alert-circle"};let oe,le,ce=0;function ue(e){var t,s,n;(e=Object.assign({},e)).id=null!==(t=e.id)&&void 0!==t?t:ce++;const a=null!==(s=e.position)&&void 0!==s?s:"top-right";oe=null!=oe?oe:{},oe[a]=null!==(n=oe[a])&&void 0!==n?n:[],a.includes("bottom")?oe[a].unshift(e):oe[a].push(e);const r=e.onHide;return e.onHide=e=>{var t;const s=null!==(t=e.position)&&void 0!==t?t:"top-right";oe[s]=oe[s].filter((t=>t.id!==e.id)),de(),r&&r(e)},de(),Object.assign(Object.assign({},new Promise((t=>{var s;return setTimeout(t,1e3*(null!==(s=e.duration)&&void 0!==s?s:3))}))),{hide:()=>e.onHide(e)})}function de(){le.render(Object.keys(ae).map((e=>(0,n.jsx)("div",Object.assign({className:u.className("row",e)},{children:Object.keys(re).map((t=>{var s;const a=`${e}-${t}`;return(0,n.jsx)("div",Object.assign({className:u.className("group",t)},{children:(null!==(s=oe[a])&&void 0!==s?s:[]).map((e=>(0,n.jsx)(me,Object.assign({},e),`toast_${a}_${e.id}`)))}),a)}))}),e))))}function me(e){var t;const[s,a]=(0,r.useState)("hidden");function i(){a("hidden"),setTimeout((()=>{e.onHide&&e.onHide(e)}),300)}(0,r.useEffect)((()=>{var t;const s=setTimeout((()=>a("shown")),50),n=setTimeout((()=>{0!==e.duration&&i()}),1e3*(null!==(t=e.duration)&&void 0!==t?t:3));return()=>{clearTimeout(s),clearTimeout(n)}}),[]);const o="object"==typeof e.icon?e.icon:e.icon?{icon:e.icon}:e.type?{icon:ie[e.type]}:void 0;return(0,n.jsxs)("div",Object.assign({className:u.className("toast",s,e.type,e.className),onClick:null!==(t=e.onClick)&&void 0!==t?t:i,style:e.style},{children:[o&&(0,n.jsx)(D,Object.assign({},o)),(0,n.jsxs)("div",{children:[e.heading&&(0,n.jsx)("h4",{children:e.heading}),e.message&&(0,n.jsx)("div",Object.assign({className:"message"},{children:e.message})),e.children&&(0,n.jsx)("div",Object.assign({className:"children"},{children:e.children}))]})]}))}window.addEventListener("load",(()=>le=(0,a.s)(F("toasts-root"))),!1);const he=["context","manager","resourceManager"];var ge=s(877);function fe({resource:e,override:t,epoch:s,length:a,precision:r,showLocked:i,showIcon:o=!0,showName:l=!0,showValue:c=!0,showMaxValue:d,showRate:m,showExtras:h,showColors:g,showRateColors:f=!0,showNegatives:v=!0,showZeros:p=!0,showPlusSign:b,showZeroRates:x,showRatePercentages:j,showCapitalized:N,showChrome:y,prefix:O,suffix:k,infix:w,placeholder:_,className:C,style:S}){var M;const{resourceManager:Z}=R();e="string"==typeof e?Z.get(e):null!=e?e:{};const A=te.resource(e,{override:t,useRatePercent:j,len:a,prec:r,alwaysShowSign:b,epoch:s,capitalize:N});let $=[];function q(e="",t="",s="",a=!1,r=!1){!e||!v&&"negative"==t||!p&&"zero"==t||$.push((0,n.jsx)("div",Object.assign({className:u.className(s,a&&t)},{children:r?`(${e})`:e}),`${s}-${$.length+1}`))}if((o&&e.icon||l&&A.name)&&$.push((0,n.jsxs)("div",Object.assign({className:"name"},{children:[o&&e.icon&&(0,n.jsx)(D,{icon:e.icon,size:"1em"}),l&&A.name,(c||m)&&(null!=w?w:":")]}),"name")),c&&A.value){const e=d&&A.max?" / "+A.max:"";q(A.value+e,A.valueSign,"value",g)}if(m&&A.rate&&(x||"zero"!==A.rateSign)&&q(A.rate,A.rateSign,"rate",f,c),h&&A.extras&&Object.keys(A.extras).length>0)for(let e in A.extras)e&&A.extras[e]&&($.length>0&&$.push((0,n.jsx)("div",{className:"break"},`break-${e}`)),$.push((0,n.jsxs)("div",Object.assign({className:"extra-name"},{children:[e,null!=w?w:":"]}),`extra-name-${e}`)),q(A.extras[e],void 0,"extra-value"));const T=["resource",e.display,y&&C];i||null===(M=e.unlocked)||void 0===M||M||(T.push("locked"),$=[(0,n.jsx)("div",Object.assign({className:"placeholder"},{children:_}),"lock")]);const P=(0,n.jsxs)("div",Object.assign({className:u.className(T),style:y?S:void 0},{children:[O&&(0,n.jsx)("div",Object.assign({className:"prefix"},{children:O})),$,k&&(0,n.jsx)("div",Object.assign({className:"suffix"},{children:k}))]}));return y?(0,n.jsx)("div",Object.assign({className:u.className(C),style:S},{children:P})):P}function ve(){var e,t,s,a,i,o,l,c,u,d,m,h,g,f,v;const{popupManager:p}=R(),b=p.getCurrentPopup();if((0,r.useEffect)((()=>{var e;const t=null==b?void 0:b.onMount,s=null==b?void 0:b.onUnmount;let n;try{n=document.querySelectorAll(null!==(e=null==b?void 0:b.highlightSelector)&&void 0!==e?e:"")}catch(e){}return(null==b?void 0:b.enabled)&&(null==n||n.forEach((e=>e.classList.add("highlight"))),t&&t()),()=>{null==n||n.forEach((e=>e.classList.remove("highlight"))),s&&s()}}),[null==b?void 0:b.name,null==b?void 0:b.step,null==b?void 0:b.enabled]),!b)return null;function x(e){return null!=(null==e?void 0:e.name)&&null!=(null==e?void 0:e.step)&&""!=(null==e?void 0:e.name)&&!isNaN(null==e?void 0:e.step)&&isFinite(null==e?void 0:e.step)&&!((null==e?void 0:e.name)==(null==b?void 0:b.name)&&(null==e?void 0:e.step)==(null==b?void 0:b.step))}function j(e,t){null==t||t.preventDefault();const s=p.getPopupState(b);p.delPopupState(b),e&&x(e)&&p.setPopupState(e,{priority:s.priority})}function N(e,t="%"){return`max(5${t}, 1em, min(90${t}, calc(100${t} - 2em), calc(${e})))`}const y={left:N(b.bounds.left,"vw"),bottom:N(`100vh - ${b.bounds.top} - ${b.bounds.height}`,"vh"),width:N(b.bounds.width,"vw"),minHeight:N(b.bounds.height,"vh"),maxHeight:N("100vh","vh")},O=(0,n.jsx)("div",Object.assign({id:"popup-root",style:y},{children:(0,n.jsxs)("div",Object.assign({className:"panel shadow",style:{minHeight:b.bounds.height}},{children:[b.title&&(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:b.title})),b.body,x(b.prev)&&!((null===(e=b.prev)||void 0===e?void 0:e.name)===(null===(t=b.next)||void 0===t?void 0:t.name)&&(null===(s=b.prev)||void 0===s?void 0:s.step)===(null===(a=b.next)||void 0===a?void 0:a.step))&&(0,n.jsx)("div",Object.assign({className:"prev"},{children:(0,n.jsx)("a",Object.assign({href:"",onClick:ge.Z.apply(j,b.prev)},{children:null!==(o=null===(i=b.prev)||void 0===i?void 0:i.title)&&void 0!==o?o:"< back"}))})),(0,n.jsx)("div",Object.assign({className:"next"},{children:(0,n.jsx)("a",Object.assign({href:"",onClick:ge.Z.apply(j,b.next)},{children:null!==(c=null===(l=b.next)||void 0===l?void 0:l.title)&&void 0!==c?c:(null===(u=b.next)||void 0===u?void 0:u.step)?"next >":"done"}))})),x(b.skip)&&!((null===(d=b.skip)||void 0===d?void 0:d.name)===(null===(m=b.next)||void 0===m?void 0:m.name)&&(null===(h=b.skip)||void 0===h?void 0:h.step)===(null===(g=b.next)||void 0===g?void 0:g.step))&&(0,n.jsx)("div",Object.assign({className:"skip"},{children:(0,n.jsx)("a",Object.assign({href:"",onClick:ge.Z.apply(j,b.skip)},{children:null!==(v=null===(f=b.skip)||void 0===f?void 0:f.title)&&void 0!==v?v:"skip >>>"}))}))]}))}));return b.greyOut?(0,n.jsx)("div",Object.assign({className:"greyout"},{children:O})):O}function pe(){var e,t,s,a;const{context:i,settings:o,save:l}=R(),[c,u]=(0,r.useState)(),[d,m]=(0,r.useState)(0),h=(0,r.useCallback)((e=>function(e,t){if(t.target&&je.includes(t.target.tagName.toUpperCase()))return;const s=Ne[t.key.toLowerCase()];s&&s.length>0&&s.forEach((s=>{s(e,t)&&(t.preventDefault(),t.stopPropagation())}))}(i,e)),[i]);(0,r.useEffect)((()=>(document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h))),[h]);const g=(0,r.useCallback)((()=>{i.resourceManager.update(void 0,"tick").includes(!0),o.lastUpdate-o.lastSaved>=1e3*o.saveFrequencySecs&&o.lastUpdate-o.lastLoaded>=1e3*o.saveFrequencySecs&&(l(),ne.info("Game saved!")),m((e=>o.lastUpdate-e>=1e3/o.framesPerSecond?o.lastUpdate:e))}),[i,o,l,m]);(0,r.useEffect)((function(){return c&&clearInterval(c),u(setInterval(g,1e3/o.ticksPerSecond)),E(o.theme),()=>{c&&(clearInterval(c),u(void 0))}}),[o,o.ticksPerSecond,o.theme]);const f=be.left.map((e=>v(e,{},i))),p=be.right.map((e=>v(e,{},i))),b=null!==(a=null!==(s=null!==(t=null!==(e=f.filter((e=>"/"===e.path))[0])&&void 0!==e?e:p.filter((e=>"/"===e.path))[0])&&void 0!==t?t:f[0])&&void 0!==s?s:p[0])&&void 0!==a?a:{body:""};return(0,n.jsxs)(U.UT,{children:[(0,n.jsxs)("nav",Object.assign({id:"navbar"},{children:[(0,n.jsx)("div",Object.assign({className:"left"},{children:f.map((e=>(0,n.jsx)(xe,{tab:e},e.path)))})),(0,n.jsx)("div",{className:"spacer"}),(0,n.jsx)("div",Object.assign({className:"right"},{children:p.map((e=>(0,n.jsx)(xe,{tab:e},e.path)))}))]})),(0,n.jsx)(ve,{}),(0,n.jsxs)(B.Z5,{children:["/"!==b.path&&(0,n.jsx)(B.AW,{path:"/",element:b.body}),[...f,...p].map((e=>(0,n.jsx)(B.AW,{path:e.path,element:e.body},e.path)))]})]})}M.push((function({settings:e,resourceManager:t,popupManager:s}){s.register({name:"OfflineSummary",title:"While you were offline...",bounds:{height:"32em"},body(){var s;const a=t.execution.load,r=Object.keys(null!==(s=null==a?void 0:a.lastChanges)&&void 0!==s?s:{}).filter((e=>isFinite(t.resources[e].priority))).sort(((e,s)=>t.resources[e].priority-t.resources[s].priority));let i=0;return a?0===r.length?(0,n.jsx)("div",Object.assign({className:"full"},{children:"Nothing happened!"})):(r.length>e.offlineSummaryMaxUpdates&&(i=r.splice(e.offlineSummaryMaxUpdates-1).length),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",Object.assign({className:"full"},{children:["You were offline for"," ",te.time(1e3*a.lastDelta,{now:"",ago:"",never:""}),". During this time, you gained:"]})),r.map((e=>(0,n.jsx)("div",Object.assign({className:"full"},{children:(0,n.jsx)(fe,{resource:e,showColors:!0,showPlusSign:!0,override:{count:a.lastChanges[e]}})}),e))),i>0&&(0,n.jsxs)("div",Object.assign({className:"full center"},{children:["... and ",i," more ..."]}))]})):null}}),t.onUpdateComplete=function(t,n,a){"load"===a&&n>=e.offlineSummaryMinSecs&&Object.keys(t).length>0&&s.setPopupState("OfflineSummary",{step:0})}}));const be={left:[],right:[{path:"/settings",placement:"right",order:0,enabled:!0,icon:"ti:settings",body:(0,n.jsx)((function(){const e=R(),[t,s]=(0,r.useState)(""),[a,i]=(0,r.useState)(!1),l=(0,B.s0)(),c=(0,B.TH)(),u=e.settings,d=c.search.toLowerCase().includes("debug");function m(e,t){let s=parseInt(t);if(s>=1&&s<=1e3)switch(e){case"tick":u.ticksPerSecond=s;break;case"render":u.framesPerSecond=s;break;case"save":u.saveFrequencySecs=600/s}}function h(e){const t=e.target.getAttribute("theme");t&&(u.theme=t,E(t))}function g(e){u.numberFormat=e.target.name}return(0,n.jsxs)("div",Object.assign({id:"options"},{children:[(0,n.jsxs)("div",Object.assign({className:"panel options",id:"options-theme"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Theme Options"})),(0,n.jsxs)("div",Object.assign({className:"full"},{children:["Current theme is:  ",L[u.theme]]})),Object.keys(L).map((e=>(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("div",Object.assign({className:"themed",id:`theme-${e}`,theme:e},{children:(0,n.jsx)("button",Object.assign({id:`button-theme-${e}`,theme:e,onClick:h},{children:L[e]}))}))}),`theme-${e}`))),(0,n.jsx)("hr",{className:"dashed"}),(0,n.jsxs)("div",Object.assign({className:"full"},{children:["Current number format is:  ",G.all[u.numberFormat].name]})),Object.values(G.all).map((e=>(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("div",Object.assign({className:"themed"},{children:(0,n.jsxs)("button",Object.assign({id:`button-notation-${e.name}`,name:e.name,onClick:g},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:e.name})),["123456.789","123.456e789.012"].map(((t,s)=>(0,n.jsx)("div",Object.assign({className:"full center"},{children:G(t,e,3)}),`sample-${e.name}-${s}`)))]}))}))}),`notation-${e.name}`)))]})),(0,n.jsxs)("div",Object.assign({className:"panel options",id:"options-data"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Game Data"})),(0,n.jsxs)("div",Object.assign({className:"full"},{children:["You started this game"," ",te.time(u.lastUpdate,{epoch:u.lastReset})]})),(0,n.jsxs)("div",Object.assign({className:"full"},{children:["This session started"," ",te.time(u.lastUpdate,{epoch:u.lastLoaded})]})),(0,n.jsxs)("div",Object.assign({className:"full"},{children:["Game was last saved"," ",te.time(u.lastUpdate,{epoch:u.lastSaved})]})),(0,n.jsx)("hr",{className:"dashed"}),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"button",value:"Load",onClick:function(){e.load()?(l({pathname:"/",search:c.search}),ne.success("Game loaded!")):ne.fail("Load failed!")},id:"button-load"})})),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"button",value:"Save",onClick:function(){e.save(d),ne.success("Game saved!")},id:"button-save"})})),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"button",value:"Load from File",onClick:function(){!function(e,t){const s=document.createElement("input");s.type="file",s.addEventListener("change",(function(t){const s=t.target.files;if(!s||0===s.length||!s[0])return;const n=new FileReader;n.onload=function(t){var s;const n=null===(s=t.target)||void 0===s?void 0:s.result;n&&"string"==typeof n&&e&&e(n)},n.readAsText(s[0])}),!1),s.click()}((t=>{e.loadAs(t)?(l({pathname:"/",search:c.search}),ne.success("Game imported!")):ne.fail("Import failed!")}))},id:"button-file-load"})})),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"button",value:"Save to File",onClick:function(){const t=o.map(globalThis.gamePackage,(e=>null==e?void 0:e.replace(/\W/g,"_"))),s=(new Date).toISOString().replace(/\D/g," ").trim().replace(/\D/g,"-");!function(e,t){t instanceof Blob||(t=new Blob([t],{type:"text/plain"}));const s=URL.createObjectURL(t),n=document.createElement("a");n.href=s,n.download=e,n.click(),URL.revokeObjectURL(s)}(`${t.name}-v${t.version}-${s}`,e.saveAs(d)),ne.success("Game exported!")},id:"button-file-save"})})),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"button",value:"Import",onClick:function(){e.loadAs(t)?(l({pathname:"/",search:c.search}),ne.success("Game imported!")):ne.fail("Import failed!")},id:"button-import"})})),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"button",value:"Export",onClick:function(){s(e.saveAs(d)),ne.success("Game exported!")},id:"button-export"})})),(0,n.jsx)("div",Object.assign({className:"full center",id:"export-text"},{children:(0,n.jsx)("textarea",{value:t,onChange:e=>s(e.target.value)})}))]})),(0,n.jsxs)("div",Object.assign({className:"panel options",id:"options-advanced"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Advanced Settings"})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"If you are having performance issues, increase the time between updates. Faster updating frequncies lead to better game experience but might use a lot of CPU."})),(0,n.jsx)("div",Object.assign({className:"half"},{children:"Updating frequency:"})),(0,n.jsxs)("div",Object.assign({className:"half center"},{children:[Math.floor(1e3/u.ticksPerSecond),"ms"]})),(0,n.jsx)("div",{className:"half"}),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"range",min:1,max:1e3,value:u.ticksPerSecond,onInput:e=>m("tick",e.target.value),id:"input-freq-tick"})})),(0,n.jsx)("div",{className:"full"}),(0,n.jsx)("div",Object.assign({className:"half"},{children:"Rendering frequency:"})),(0,n.jsxs)("div",Object.assign({className:"half center"},{children:[Math.floor(1e3/u.framesPerSecond),"ms"]})),(0,n.jsx)("div",{className:"half"}),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"range",min:1,max:60,value:u.framesPerSecond,onInput:e=>m("render",e.target.value),id:"input-freq-render"})})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"Change how often the game is saved in the background. More frequent saving leads to faster backups, but increases CPU and I/O usage"})),(0,n.jsx)("div",Object.assign({className:"half"},{children:"Saving frequency:"})),(0,n.jsx)("div",Object.assign({className:"half center"},{children:te.time(1e3*u.saveFrequencySecs,{ago:""})})),(0,n.jsx)("div",{className:"half"}),(0,n.jsx)("div",Object.assign({className:"half center"},{children:(0,n.jsx)("input",{type:"range",min:1,max:60,value:600/u.saveFrequencySecs,onInput:e=>m("save",e.target.value),id:"input-freq-save"})}))]})),(0,n.jsxs)("div",Object.assign({className:"panel options reset",id:"options-reset"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar warning"},{children:"Game Reset"})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"WARNING: this will completely reset your game and delete all saved progress and setting. Only use this if you want to restart the game from beginning, or if something in the settings is so messed up that the game is now unplayable."})),(0,n.jsx)("div",Object.assign({className:"full"},{children:(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"checkbox",checked:a,onChange:()=>i(!a),id:"acknowledge-box"}),"I understand what this means and still want to reset the game"]})})),(0,n.jsx)("div",Object.assign({className:"full right"},{children:(0,n.jsx)("input",{type:"button",value:"Reset everything",disabled:!a,onClick:function(){a&&(confirm("Are you sure you want to reset? This cannot be undone.")?(e.reset(),l({pathname:"/",search:c.search})):i(!1))},id:"button-wipeall"})}))]})),d&&(0,n.jsxs)("div",Object.assign({className:"panel options debug",id:"options-debug"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Debug Context"})),(0,n.jsx)("div",Object.assign({className:"full"},{children:JSON.stringify(e,((e,t)=>"string"==typeof e&&e.startsWith("_")||he.includes(e)?void 0:t),2)}))]}))]}))}),{})}]};function xe({tab:e}){var t;if(null!==(t=e.enabled)&&void 0!==t&&!t)return null;const s=(0,B.TH)();return(0,n.jsx)("div",Object.assign({id:`tab-${e.path.replace(/\W/g,"")||"main"}`},{children:(0,n.jsxs)(U.OL,Object.assign({className:e=>e.isActive?"active":void 0,to:{pathname:e.path,search:s.search},end:!0},{children:["string"==typeof e.icon?(0,n.jsx)(D,{icon:e.icon}):e.icon,e.heading&&(0,n.jsx)("span",{children:e.heading})]}))}))}pe.registerTab=e=>{var t;const s=null!==(t=e.placement)&&void 0!==t?t:"left",n=be[s].findIndex((t=>t.path===e.path));n>=0&&be[s].splice(n,1),be[s].push(e),be[s].sort(((e,t)=>{var n,a;return("left"===s?1:-1)*(null!==(n=e.order)&&void 0!==n?n:1/0)-(null!==(a=t.order)&&void 0!==a?a:1/0)}))};const je=["TEXTAREA","INPUT"],Ne={s:[function(e,t){return!(!t.ctrlKey&&!t.metaKey||(e.save(),ne.success("Game saved!"),0))}]};function ye(){const e=R(),t=(0,r.useMemo)((()=>e.saveAs(!0)),[]);return(0,n.jsxs)("div",Object.assign({id:"reset"},{children:[(0,n.jsxs)("div",Object.assign({className:"panel options"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Load Failure!"})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"Looks like something went very wrong in loading the game. It's possible that the game version is out of date, or that the save data is corrupt."})),(0,n.jsx)("hr",{className:"dashed"}),(0,n.jsx)("div",Object.assign({className:"full"},{children:"For your records, here is the current contents of the save state. Keep this somewhere before resetting the game:"})),(0,n.jsx)("div",Object.assign({className:"full center"},{children:(0,n.jsx)("textarea",{value:t,readOnly:!0})}))]})),(0,n.jsxs)("div",Object.assign({className:"panel options reset"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar warning"},{children:"Game Reset"})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"WARNING: this will completely reset your game and delete all saved progress and settings. This will hard reset the game from beginning."})),(0,n.jsx)("div",Object.assign({className:"full right"},{children:(0,n.jsx)("input",{type:"button",value:"Hard Reset Everything",onClick:function(){confirm("Are you sure you want to reset? This cannot be undone.")&&(e.reset(),window.location.reload())}})}))]}))]}))}function Oe({frames:e=12,duration:t=1,className:s,style:a,children:r}){return(0,n.jsxs)("svg",Object.assign({className:u.className(["spinner",s]),style:a,width:"128px",height:"128px",viewBox:"0 0 100 100"},{children:[Array.from(Array(e).keys()).map((s=>(0,n.jsx)("g",Object.assign({transform:`rotate(${360*s/e} 50 50)`},{children:(0,n.jsx)("rect",Object.assign({x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#32a0da"},{children:(0,n.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:`${t}s`,begin:t/e*(s-e)+"s",repeatCount:"indefinite"})}))}),`g-${s}`))),r]}))}function ke(){const e=R(),[t,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!1);function o(){try{e.init(),e.load(),s(!0)}catch(e){throw i(!0),e}}return(0,r.useEffect)((()=>{t||a||setTimeout(o,1e3/e.settings.ticksPerSecond)}),[t,a]),t?(0,n.jsx)(pe,{}):a?(0,n.jsx)(ye,{}):(0,n.jsx)(Oe,{})}function we({resource:e,enabled:t=!0,allowUnlocking:s=!1,maxNum:a,minNum:r,increment:i,precision:o=0,gainFactor:c=1,costFactor:d=1,mode:m="buy",overrideCount:h,overrideBuyAmount:g,prefix:f="Buy",suffix:v="",infix:p="for",and:b="&",className:x,style:j,onPurchase:N}){var y,O,k;const w=(0,B.TH)(),_=R(),C=w.search.toLowerCase().includes("debug"),S=_.resourceManager.get(e),M=null!==(O=_e[null!==(y=null!=g?g:_.settings.buyAmount)&&void 0!==y?y:"+1"])&&void 0!==O?O:_e["+1"],Z={minAmount:null!=r?r:M.min,maxAmount:null!=a?a:M.max,increments:null!=i?i:M.inc};function A(e,t=1){return e.map((({resource:e,count:s},a)=>{e=_.resourceManager.get(e);const r=te.resource(e,{override:{count:l.Z.mul(s,t)},prec:o,alwaysShowSign:!0});return(0,n.jsxs)("div",Object.assign({className:"resource"},{children:[a>0&&(0,n.jsx)("div",Object.assign({className:"prefix"},{children:b})),(0,n.jsx)("div",Object.assign({className:r.valueSign},{children:r.value})),(0,n.jsxs)("div",{children:[e.icon&&(0,n.jsx)(D,{icon:e.icon,size:"1em"}),r.name]})]}),r.name)}))}null===(k=S.unlocked)||void 0===k||k||(s?Z.minAmount=Z.maxAmount=Z.increments=1:(Z.minAmount=Z.maxAmount=Z.increments=0,t=!1));const $="buy"===m?S.buy(Z,"dry-partial",c,d,h):S.sell(Z,"dry-full",1,d,h),q=_.resourceManager.canAfford($.cost),T=$.gain.some((({count:e})=>l.Z.neq(e,0))),P=$.cost.some((({count:e})=>l.Z.neq(e,0))),U=[x,"buy-button",q?null:"inactive"];return T||C?(0,n.jsxs)("button",Object.assign({onClick:e=>function(e,s){if(s.preventDefault(),!t||l.Z.eq(e,0))return;const n=S.buy(e,"partial",c,d,h);N&&n.gain.length>0&&N(S,n.gain[0].count)}(q&&t?$.count:0,e),disabled:!q||!t,className:u.className(U),style:j,id:`button-buy-${S.name}`},{children:[f&&(0,n.jsx)("div",Object.assign({className:"prefix"},{children:f})),A($.gain),P&&t&&p&&(0,n.jsx)("div",Object.assign({className:"infix"},{children:p})),P&&t&&A($.cost,-1),v&&(0,n.jsx)("div",Object.assign({className:"suffix"},{children:v})),C&&(0,n.jsx)("div",Object.assign({className:"full debug"},{children:JSON.stringify($,((e,t)=>"resource"===e?t.name:t),2)}))]})):null}pe.registerShortcut=(e,t)=>{var s;e=e.toLowerCase().replace(/\W/g,""),null!==(s=Ne[e])&&void 0!==s||(Ne[e]=[]),Ne[e].includes(t)||Ne[e].push(t)},we.BuyAmountButtons=()=>{const{settings:e}=R();return(0,n.jsx)(n.Fragment,{children:Object.keys(_e).sort(((e,t)=>e.substring(1).localeCompare(t.substring(1)))).map((t=>(0,n.jsxs)("button",Object.assign({value:t,className:u.className("buy-amount-button",t===e.buyAmount&&"selected"),onClick:t=>e.buyAmount=t.target.value,id:`button-${t.replace(/\W/g,"")}`},{children:[Ce[t[0]]&&(0,n.jsx)(D,{icon:Ce[t[0]]}),t.replace(/^[+x]/,"").toUpperCase()]}),t)))})},we.BuyAllButton=({resources:e={},enabled:t=!0,showNames:s=!0,maxNum:a,minNum:r,increment:i,overrideCount:o,overrideBuyAmount:l,gainFactor:c=1,costFactor:d=1,prefix:m="Buy",suffix:h="",infix:g="of",and:f=" & ",all:v="all",className:p,style:b,onPurchase:x})=>{var j;const N=R(),y=l||N.settings.buyAmount||"+1",O=null!==(j=_e[y])&&void 0!==j?j:_e["+1"],k={minAmount:null!=r?r:O.min,maxAmount:null!=a?a:O.max,increments:null!=i?i:O.inc};let w=v;const _=Array.isArray(e)?e:Object.keys(e);return s&&_.length>0&&(w=_.map((e=>N.resourceManager.get(e))).map((e=>{var t,s;return null!==(s=null!==(t=e.singularName)&&void 0!==t?t:e.pluralName)&&void 0!==s?s:e.name})).filter((e=>!!e)).join(f)),(0,n.jsxs)("button",Object.assign({onClick:function(s){if(s.preventDefault(),!t)return;Array.isArray(e)&&(e=Object.fromEntries(e.map((e=>["string"==typeof e?e:e.name,void 0]))));const n=N.resourceManager.purchaseAll(e,k,"partial",c,d,o);x&&n.gain.length>0&&x(n.gain)},disabled:!t,className:u.className("buy-all-button",p),style:b},{children:[m&&(0,n.jsx)("div",Object.assign({className:"prefix"},{children:m})),Ce[y[0]]&&(0,n.jsx)("div",Object.assign({className:"icon"},{children:(0,n.jsx)(D,{icon:Ce[y[0]]})})),(0,n.jsx)("div",Object.assign({className:"amount"},{children:y.replace(/^[+x]/,"").toUpperCase()})),t&&w&&g&&(0,n.jsx)("div",Object.assign({className:"infix"},{children:g})),t&&w&&(0,n.jsx)("div",Object.assign({className:"names"},{children:w})),h&&(0,n.jsx)("div",Object.assign({className:"suffix"},{children:h}))]}))};const _e={"+1":{min:1,max:1,inc:1},x10:{min:1,max:10,inc:10},x100:{min:1,max:100,inc:100},"+10":{min:10,max:10,inc:1},"+100":{min:100,max:100,inc:1},max:{min:1,max:1e3,inc:1}},Ce={x:"ti:arrow-bar-to-right","+":"ti:x"};function Se(e){return(0,n.jsxs)("div",Object.assign({className:"panel"},{children:[(0,n.jsx)(Me,{resource:e.main,rest:e.rest}),e.rest[0].count.gt(0)&&(0,n.jsx)(Ze,{}),e.rest.map((e=>(0,n.jsx)(Ae,{resource:e},e.name))),e.rest[0].count.gte(10)&&(0,n.jsxs)("div",Object.assign({className:"full right"},{children:["Buy multiples:  ",(0,n.jsx)(we.BuyAmountButtons,{})]}))]}))}function Me(e){var t;const s=te.resource(e.resource);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",Object.assign({className:"full center bold"},{children:[s.icon&&(0,n.jsx)(D,{icon:s.icon,size:"1em"}),null===(t=s.name)||void 0===t?void 0:t.toUpperCase()," :  ",s.value]})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)(we,{resource:e.resource,overrideBuyAmount:"+1",prefix:"Add"})})),(0,n.jsx)("div",Object.assign({className:"half center"},{children:"zero"!==s.rateSign&&(0,n.jsx)("div",Object.assign({className:s.rateSign},{children:`(${s.rate})`}))})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:e.rest[0].count.gt(10)&&(0,n.jsx)(we.BuyAllButton,{resources:e.rest,showNames:!1,overrideCount:"base",all:`all ${s.name}'s`})})),(0,n.jsx)("hr",{className:"underlined"})]})}function Ze(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",Object.assign({className:"quarter"},{children:[(0,n.jsx)("div",Object.assign({className:"full"},{children:"Derivative"})),(0,n.jsx)("div",Object.assign({className:"zero three-quarters right"},{children:"Boost Multi"}))]})),(0,n.jsxs)("div",Object.assign({className:"quarter"},{children:[(0,n.jsx)("div",Object.assign({className:"full"},{children:"Value"})),(0,n.jsx)("div",Object.assign({className:"zero three-quarters right"},{children:"(# Bought)"}))]})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)("div",Object.assign({className:"positive"},{children:"(Gain Rate)"}))})),(0,n.jsx)("div",{className:"quarter right"}),(0,n.jsx)("hr",{className:"dotted"})]})}function Ae(e){var t;if(null!==(t=e.resource.unlocked)&&void 0!==t&&!t||e.resource.disabled)return null;const s=te.resource(e.resource);return"active"!==s.active?(0,n.jsx)("div",Object.assign({className:"full"},{children:s.active})):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",Object.assign({className:"quarter"},{children:[(0,n.jsxs)("div",Object.assign({className:"full"},{children:[s.icon&&(0,n.jsx)(D,{icon:s.icon,size:"1em"}),s.name]})),e.resource.extra.factor>0&&(0,n.jsx)("div",Object.assign({className:"zero three-quarters right"},{children:`x${s.extras.Factor}`}))]})),(0,n.jsxs)("div",Object.assign({className:"quarter"},{children:[(0,n.jsx)("div",Object.assign({className:"full"},{children:s.value})),e.resource.extra.base>0&&(0,n.jsx)("div",Object.assign({className:"zero three-quarters right"},{children:`(${s.extras.Base})`}))]})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:"zero"!==s.rateSign&&(0,n.jsx)("div",Object.assign({className:s.rateSign},{children:`(${s.rate})`}))})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)(we,{resource:e.resource,overrideCount:"base"})})),(0,n.jsx)("hr",{className:"dotted"})]})}function $e({id:e,shape:t=qe.Square,cells:s,cellSize:a,cellGap:i,fixedColumns:o,render:l,onClick:c,className:d,style:m,cellClass:h,cellStyle:g,children:f}){var v;const[p,b]=(0,r.useState)((()=>e||"grid-"+Math.random().toString(36).substring(2,10)));if("string"==typeof t&&(t=null!==(v=qe[null!=t?t:"Square"])&&void 0!==v?v:qe.Square),o||(o=Math.max(1,...s.map((e=>e.length)))),"number"==typeof i?i=`${i}px`:i||(i="0px"),"number"==typeof a)a=`${a}px`;else if(!a){const e=1-2*t.horizontalBevel,n=1/Math.max(1,s.length,o)/(1+e);a=`min(${Math.floor(95*n)}vw, ${Math.floor(n/t.aspectRatio*80)}vh)`}return(0,n.jsxs)("div",Object.assign({id:p,className:"grid",style:{"--columns":o,"--cell-size":a,"--cell-gap":i,"--interlaced":t.interlaced?1:0,"--aspect-ratio":t.aspectRatio,"--horizontal-bevel":t.horizontalBevel,"--vertical-bevel":t.verticalBevel}},{children:[(0,n.jsx)("div",Object.assign({className:u.className("grid-body",d),style:m},{children:s.map(((e,t)=>e.map(((e,a)=>{const r={cells:s,cell:e,row:t,col:a};return(0,n.jsx)("div",Object.assign({id:`${p}-cell-${t}-${a}`,className:u.className("grid-cell",h&&h(r)),style:g&&g(r),onClick:c&&(e=>c(e,r)),onDoubleClick:c&&(e=>c(e,r)),onContextMenu:c&&(e=>c(e,r))},{children:l&&l(r)}),`cell:${t}:${a}`)}))))})),f]}))}const qe={Square:{aspectRatio:1,horizontalBevel:.5,verticalBevel:0,interlaced:!1},Diamond:{aspectRatio:1,horizontalBevel:.5,verticalBevel:.5,interlaced:!0},Zigzag:{aspectRatio:1,horizontalBevel:.5,verticalBevel:0,interlaced:!0},Drape:{aspectRatio:1,horizontalBevel:0,verticalBevel:.5,interlaced:!0},Checkerboard:{aspectRatio:1,horizontalBevel:0,verticalBevel:0,interlaced:!0},Hexagon:{aspectRatio:1/Math.cos(Math.PI/6),horizontalBevel:.5,verticalBevel:Math.sin(Math.PI/6)/2,interlaced:!0},Honeycomb:{aspectRatio:Math.cos(Math.PI/6),horizontalBevel:Math.sin(Math.PI/6)/2,verticalBevel:.5,interlaced:!0},Octagon:{aspectRatio:1,horizontalBevel:1/(2+Math.sqrt(2)),verticalBevel:1/(2+Math.sqrt(2)),interlaced:!0}};function Te({cell:e,row:t,col:s}){const a=`${t+1}:${s+1}`;return e?(0,n.jsx)(D,{icon:e}):(0,n.jsx)("div",{children:a})}const Pe=[Array.from(Array(4)).map((e=>Array.from(Array(4)).map((e=>"")))),Array.from(Array(10)).map((e=>Array.from(Array(10)).map((e=>"")))),[["gi:breaking-chain","gi:circular-saw","gi:scales"],["ti:chart-bar-off","ti:brand-nextjs","ti:chess-knight"],["5em #0b7 gi:barn-owl; top-right 1em #b70 ti:chess-knight; top-left 1.5em #70b gi:scales","ti:square","gi:goblin"]]],Re=["Square","Diamond","Zigzag","Drape","Checkerboard","Hexagon","Honeycomb","Octagon"];function Ue({value:e=NaN,minValue:t=0,maxValue:s=1,orientation:a="horizontal",width:r=("horizontal"===a?"100%":"1ex"),height:i=("vertical"===a?"100%":"1ex"),showPercent:o,enabled:l=isFinite(e),className:d,style:m,children:h}){const g=c((e-t)/(s-t)),f="horizontal"===a?g:1,v="vertical"===a?g:1;return(0,n.jsxs)("div",Object.assign({className:u.className("progress-bar",d),style:Object.assign({minWidth:r,minHeight:i},m)},{children:[(0,n.jsxs)("div",Object.assign({className:"children"},{children:[l&&o&&(0,n.jsxs)("span",{children:[Math.floor(100*g),"%"]}),h]})),l&&g>.001&&(0,n.jsx)("div",{className:"primary",style:{width:100*f+"%",height:100*v+"%"}}),(0,n.jsx)("div",{className:l?"secondary":"disabled"})]}))}function Be({value:e,startValue:t,minValue:s=0,maxValue:a=1,width:r="100px",height:i=r,showPercent:o,className:l,style:d,children:m}){const h=c((e-s)/(a-s)),g=(c(((null!=t?t:0)-s)/(a-s))-.25)*(2*Math.PI),f=g+2*h*Math.PI;return(0,n.jsxs)("div",Object.assign({className:u.className("progress-circle",l),style:Object.assign({minWidth:r,minHeight:i},d)},{children:[(0,n.jsxs)("div",Object.assign({className:"children"},{children:[o&&(0,n.jsxs)("span",{children:[Math.floor(100*h),"%"]}),m]})),(0,n.jsxs)("svg",Object.assign({viewBox:"-55 -55 110 110",width:r,height:i},{children:[(0,n.jsx)("path",{className:"secondary",d:"M50,0 A50,50 0 1,1 -50,0 A50,50 0 1,1 50,0"}),(0,n.jsx)("path",{className:"primary",d:`\n            M ${50*Math.cos(g)} ${50*Math.sin(g)}\n            A 50 50 0 ${h<=.5?0:1} 1\n            ${50*Math.cos(f)} ${50*Math.sin(f)}\n          `})]}))]}))}function Fe({id:e,cells:t,cellAutoSize:s=!0,cellWidth:a,cellHeight:i,minCellWidth:o,maxCellWidth:l,minCellHeight:c,maxCellHeight:d,onClick:m,onRender:h,className:g,style:f,tableClass:v,tableStyle:p,rowClass:b,rowStyle:x,cellClass:j,cellStyle:N,children:y}){const[O,k]=(0,r.useState)((()=>e||"grid-"+Math.random().toString(36).substring(2,10)));if(s){const e=1/Math.max(1,t.length,...t.map((e=>e.length))),s=`max(min(${Math.floor(95*e)}vw, ${Math.floor(80*e)}vh))`;a||(a=s),i||(i=s)}return(0,n.jsxs)("div",Object.assign({id:O,className:u.className("table-grid",g),style:f},{children:[(0,n.jsx)("table",Object.assign({id:`${O}-table`,className:u.className(v),style:p},{children:(0,n.jsx)("tbody",{children:t.map(((e,t)=>(0,n.jsx)("tr",Object.assign({id:`${O}-row-${t}`,className:u.className(b&&b(t)),style:x&&x(t)},{children:e.map(((e,s)=>(0,n.jsx)("td",Object.assign({id:`${O}-cell-${t}-${s}`,className:u.className(j&&j(e,t,s)),style:N&&N(e,t,s),onClick:m&&(n=>m(n,e,t,s)),onDoubleClick:m&&(n=>m(n,e,t,s)),onContextMenu:m&&(n=>m(n,e,t,s))},{children:(0,n.jsx)("div",Object.assign({style:{width:a,height:i,minWidth:o,maxWidth:l,minHeight:c,maxHeight:d}},{children:h&&h(e,t,s)}))}),`cell:${t}:${s}`)))}),`row:${t}:*`)))})})),y]}))}function Ee({enabled:e=!0,checked:t=!1,onChange:s,checkedContents:a,unCheckedContents:i,className:o,style:l,children:c}){const[d,m]=(0,r.useState)(!1);return(0,r.useEffect)((()=>m(t)),[t]),(0,n.jsxs)("div",Object.assign({onClick:function(t){t.preventDefault(),e&&(m(!d),s&&s(!d))},className:u.className([o,"toggle-button",(e?"en":"dis")+"abled",(t?"":"un")+"checked"]),style:l},{children:[(0,n.jsx)("div",Object.assign({className:"check"},{children:(0,n.jsx)("div",{children:a})})),(0,n.jsx)("div",Object.assign({className:"contents"},{children:c})),(0,n.jsx)("div",Object.assign({className:"uncheck"},{children:(0,n.jsx)("div",{children:i})})),(0,n.jsx)("div",{className:"circle"})]}))}const De={};function Ie(e,t){var s,n;const a=De[e];return a&&0!==a.length?"string"==typeof a?a:(null!=t||(t=Math.floor(Math.random()*a.length)),null!==(n=null!==(s=a[t])&&void 0!==s?s:a[0])&&void 0!==n?n:e):e}function ze(){const{context:e,resources:{minesweeper:t}}=R(),s=t.extra.board;return(0,n.jsxs)("div",Object.assign({className:"panel"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Minesweeper"})),(0,n.jsx)("div",Object.assign({className:"full center"},{children:(0,n.jsx)(Fe,Object.assign({className:"mine-sweeper",cells:s.cells,cellClass:e=>`cell-${e.state}`,onRender:e=>(0,n.jsx)(We,{cell:e}),onClick:(t,s)=>function(e,t,s){var n;e.preventDefault();const a=s.resourceManager.resources;let r=a.minesweeper.extra.board;const i=a.clicks;if(i.count=i.count.add(1),t.locked)return void i.extra.useless++;const o=t.state;2===e.button&&"contextmenu"===e.type||0===e.button&&"click"===e.type&&("flag"===a.minesweeper.extra.tapMode||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)?(i.extra.right++,et(t,"flag")):0===e.button&&"click"===e.type&&"reveal"===a.minesweeper.extra.tapMode?(i.extra.left++,et(t,"reveal")):0===e.button&&"dblclick"===e.type&&(i.extra.double++,i.extra.useless--,i.extra.left--,null===(n=a.revealNeighbors.unlocked)||void 0===n||n?it(s,r,t,a.revealNeighbors.count.toNumber(),!1):i.extra.useless++),o===t.state&&"dblclick"!==e.type?i.extra.useless++:(o!==t.state&&(rt(s,"cell",t.state,!1),"hidden"===t.state&&rt(s,"cell","un"+o,!1)),r.hadUserAction=!0,"active"===r.state&&(a.minesweeper.extra.board=r=Object.assign({},tt(r,a.minesweeper.extra.maxErrors)),"active"!==r.state&&rt(s,"board",r.state,!1)))}(t,s,e)},{children:(0,n.jsx)(Ve,{})}))}))]}))}function Le(){var e,t;const{context:s,resources:{wins:a,cells:r,automation:i,minesweeper:o}}=R(),c=o.extra.board;return(0,n.jsxs)("div",Object.assign({className:`panel board-${c.state}`,id:"resource-bar"},{children:[(0,n.jsx)(fe,{resource:a,precision:0,showRate:!0,showZeroRates:!0,showRatePercentages:!1,showChrome:!0}),i.extra.total>=5&&(0,n.jsx)(fe,{resource:i,precision:0,showRate:!0,showZeroRates:!0,showRatePercentages:!1,showChrome:!0}),(0,n.jsx)(fe,{resource:r,precision:0,showRate:!0,showZeroRates:!0,showRatePercentages:!1,showChrome:!0}),(0,n.jsx)("hr",{className:"separator"}),(0,n.jsx)(fe,{override:{name:"Board"},suffix:`${c.rows}x${c.cols}`,showChrome:!0}),(0,n.jsx)(fe,{override:{name:"progress",count:l.Z.fromValue(lt(s)),display:"percentage"},showChrome:!0}),(0,n.jsx)(fe,{override:{name:"Mines",count:l.Z.fromValue(null===(e=c.cellStates)||void 0===e?void 0:e.flagged),maxCount:l.Z.fromValue(null===(t=c.cellContents)||void 0===t?void 0:t.mine)},showMaxValue:!0,showChrome:!0})]}))}function Ge(){const{context:e,resources:{rows:t,cols:s,hints:a,resets:i,minesweeper:o}}=R(),[c,u]=(0,r.useState)(o.extra.tapMode),d="reveal"===c;let m=o.extra.board;const h=t.value().neq(m.rows)||s.value().neq(m.cols);return(0,n.jsxs)("div",Object.assign({className:"panel",id:"mode-controls"},{children:[(0,n.jsxs)("div",Object.assign({className:"half left"},{children:[(0,n.jsx)("span",{children:"Tap mode:"}),(0,n.jsxs)("button",Object.assign({type:"button",value:c,onClick:function(e){e.preventDefault(),o.extra.tapMode=d?"flag":"reveal",u(o.extra.tapMode)},id:"button-tapmode"},{children:[(0,n.jsx)(D,{icon:d?He.revealed[9]:He.flagged,className:"icon-"+(d?"revealed":"flagged")}),d?"Revealing":"Flagging"]}))]})),(0,n.jsx)("div",{className:"spacer"}),(0,n.jsxs)("div",Object.assign({className:"right"},{children:[(0,n.jsx)("span",{children:"Buy amount:"}),(0,n.jsx)(we.BuyAmountButtons,{})]})),(0,n.jsx)("div",Object.assign({className:"half"},{children:(0,n.jsx)("button",Object.assign({className:"buy-button",onClick:function(){o.extra.board=m=Object.assign({},tt(m,0)),rt(e,"board",m.state,!1)},id:"button-reset"},{children:(0,n.jsx)(fe,{resource:i,override:{count:l.Z.dOne},showValue:!1,showChrome:!1,infix:"",suffix:"the Game"})}))})),(0,n.jsx)("div",Object.assign({className:"half"},{children:(0,n.jsx)(we,{resource:a,overrideCount:0,onPurchase:(t,s)=>function(t){(t=st(m,t,0,8,ct(e)))>0&&(nt(a,!1,t),o.extra.board=m=Object.assign({},m))}(l.Z.fromValue(s).toNumber())})})),h&&(0,n.jsxs)("div",Object.assign({className:"left full",id:"reset-info"},{children:["On reset, game board will change to size to",` ${t.value()}x${s.value()}`]}))]}))}const He={hidden:"ti:question-mark",hinted:"ti:eye",flagged:"ti:flag-2",blown:"ti:alert-triangle",revealed:["ti:square-dot","ti:square-number-1","ti:square-number-2","ti:square-number-3","ti:square-number-4","ti:square-number-5","ti:square-number-6","ti:square-number-7","ti:square-number-8","ti:square"]};function We({cell:e}){var t,s;let a=He[e.state];return a instanceof Array&&(a=a[null!==(s=null===(t=e.neighborContents)||void 0===t?void 0:t.mine)&&void 0!==s?s:9]),(0,n.jsx)(D,{icon:a,className:`icon-${e.state}`})}function Ve(){const{context:e,resources:{resetSpeed:t,minesweeper:s}}=R();let a=s.extra.board;const[i,o]=(0,r.useState)(a.state),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(""),[m,h]=(0,r.useState)(0);if(a.state||(s.extra.board=a=tt(a)),(0,r.useEffect)((()=>{o(Ie(a.state))}),[a,a.state]),0===a.rows||0===a.cols||"inactive"===a.state)return ot(e,!0),null;if("active"===a.state)return null;const g=ut(e),f=t.extra.remainingTime;return!l&&f>0?(c(!0),h(0)):l&&f<.001&&(c(!1),ot(e,!1)),l&&(!u||g-f>=m)&&(d(Ie("resetting")),h(m+2)),(0,n.jsx)("div",Object.assign({id:"reset-box"},{children:(0,n.jsxs)("div",Object.assign({className:`panel shadow board-${a.state}`},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:i})),(0,n.jsx)("div",Object.assign({className:"full center"},{children:"Game over!"})),(0,n.jsx)("div",Object.assign({className:"full center"},{children:"You may reset the board to receive a brand new game to play:"})),(0,n.jsxs)(Be,Object.assign({value:l?(g-f)/g:0,showPercent:l,width:"100%",height:"50%"},{children:[!l&&(0,n.jsx)("input",{type:"button",value:"Reset!",disabled:l,onClick:function(s){null==s||s.preventDefault(),l||(g<.001?ot(e,!1):t.extra.remainingTime<.001&&(t.extra.remainingTime=g))},id:"button-reset"}),l&&(0,n.jsxs)("span",{children:[u,"..."]})]}))]}))}))}function Qe(){var e,t,s;const{context:a,resources:{rows:r,cols:i,difficulty:o,hintQuality:c,hintsCount:u,resetSpeed:d,revealNeighbors:m}}=R();return(0,n.jsxs)("div",Object.assign({id:"upgrades"},{children:[(0,n.jsxs)("div",Object.assign({className:"game-controls panel",id:"game-upgrades"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Game Upgrades"})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:"Game Width:"})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)(fe,{resource:i,showChrome:!0,infix:"",className:"value-first"})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(we,{resource:i,prefix:"Expand"})})),(0,n.jsx)("div",{className:"half"}),(0,n.jsx)("div",Object.assign({className:"right half"},{children:i.count.gt(3)&&(0,n.jsx)(we,{resource:i,prefix:"Shrink",mode:"sell",costFactor:-1})})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:"Game Height:"})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)(fe,{resource:r,showChrome:!0,infix:"",className:"value-first"})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(we,{resource:r,prefix:"Expand"})})),(0,n.jsx)("div",{className:"half"}),(0,n.jsx)("div",Object.assign({className:"right half"},{children:r.count.gt(3)&&(0,n.jsx)(we,{resource:r,prefix:"Shrink",mode:"sell",costFactor:-1})})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:"Game Difficulty:"})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)(fe,{resource:o,showChrome:!0,showName:!1,infix:"",className:"value-first"})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(we,{resource:o,prefix:"Increase"})})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)("span",Object.assign({className:"computed"},{children:"Score Multiplier:"}))})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)(fe,{override:{count:l.Z.fromValue(dt(a)),display:"percentage"},showChrome:!0,className:"computed"})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:o.count.gt(1)&&(0,n.jsx)(we,{resource:o,prefix:"Decrease",mode:"sell",costFactor:-1})}))]})),(0,n.jsxs)("div",Object.assign({className:"game-controls panel"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Quality Upgrades"})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:"Reset Speed:"})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)(fe,{resource:d,showChrome:!0,showName:!1,infix:"",className:"value-first"})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(we,{resource:d,prefix:d.count<(null!==(e=d.maxCount)&&void 0!==e?e:1/0)?"Speed up":"Max Speed!"})})),(0,n.jsx)("hr",{className:"separator"}),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:"Hint Quality:"})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)(fe,{resource:c,showChrome:!0,showName:!1,infix:"",className:"value-first"})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(we,{resource:c,prefix:"Improve"})})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:"Number of hints on purchase:"})),(0,n.jsx)("div",Object.assign({className:"quarter"},{children:(0,n.jsx)(fe,{resource:u,showChrome:!0,infix:"",className:"value-first"})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(we,{resource:u,prefix:u.count<(null!==(t=u.maxCount)&&void 0!==t?t:1/0)?"Improve":"Max Quality!"})})),(0,n.jsx)("hr",{className:"separator"}),(0,n.jsx)("div",Object.assign({className:"half"},{children:(0,n.jsx)(fe,{resource:m,showChrome:!0,infix:"",placeholder:"Nothing happens",suffix:"on double-tap",className:"value-first"})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(we,{resource:m,allowUnlocking:!0,prefix:m.unlocked?m.count.lt(null!==(s=m.maxCount)&&void 0!==s?s:1/0)?"Additional":"Maxed out!":"Unlock"})})),(0,n.jsxs)("div",Object.assign({className:"full computed"},{children:["Reveals random (hidden) neighbors of the square being tapped on.",(0,n.jsx)("br",{}),"CAUTION: it might trigger a mine if they have not been properly flagged!"]}))]}))]}))}function Ke(){const{resources:{revealNeighbors:e,autoRevealNeighbors:t,autoFlagMines:s,autoRevealHints:a,autoPurchaseHints:r,autoResetGame:i,autoClickBoard:o,autoBoardUpgrade:l}}=R(),c=te.time(6e4,{ago:""});function u(e){return!e.disabled&&e.value().gte(60)?1:mt(e)}return(0,n.jsxs)("div",Object.assign({id:"automation",className:"automation"},{children:[(0,n.jsxs)("div",Object.assign({className:"game-controls panel"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Cell Automation"})),(0,n.jsx)("div",Object.assign({className:"half"},{children:(0,n.jsx)(fe,{resource:t,showChrome:!0,showLocked:!0,infix:"",suffix:`time${t.count.eq(1)?"":"s"} every ${c}`})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(we,{resource:t,allowUnlocking:!0,enabled:e.unlocked&&e.count.gt(0),prefix:t.unlocked?"Additional":"Unlock"})})),(0,n.jsxs)("div",Object.assign({className:"full right"},{children:["Enabled:",(0,n.jsx)(Ee,{checked:t.unlocked&&!t.disabled,onChange:e=>t.disabled=!e,checkedContents:(0,n.jsx)(D,{icon:"robot"}),unCheckedContents:(0,n.jsx)(D,{icon:"robot-off"}),enabled:t.unlocked&&t.count.gt(0)})]})),(0,n.jsx)(Ue,Object.assign({value:u(t),className:"full computed"},{children:"Automatically reveals the neighboring hidden squares if all the mines around it have been flagged."})),(0,n.jsx)("hr",{className:"separator"}),(0,n.jsx)("div",Object.assign({className:"half"},{children:(0,n.jsx)(fe,{resource:s,showChrome:!0,showLocked:!0,infix:"",suffix:`time${s.count.eq(1)?"":"s"} every ${c}`})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(we,{resource:s,allowUnlocking:!0,enabled:t.unlocked&&t.count.gt(0),prefix:s.unlocked?"Additional":"Unlock"})})),(0,n.jsxs)("div",Object.assign({className:"full right"},{children:["Enabled:",(0,n.jsx)(Ee,{checked:s.unlocked&&!s.disabled,onChange:e=>s.disabled=!e,checkedContents:(0,n.jsx)(D,{icon:"robot"}),unCheckedContents:(0,n.jsx)(D,{icon:"robot-off"}),enabled:s.unlocked&&s.count.gt(0)})]})),(0,n.jsx)(Ue,Object.assign({value:u(s),className:"full computed"},{children:"Automatically flags the hidden mines around a square if there are no more hidden clear squares left around it."})),(0,n.jsx)("hr",{className:"separator"}),(0,n.jsx)("div",Object.assign({className:"half"},{children:(0,n.jsx)(fe,{resource:a,showChrome:!0,showLocked:!0,infix:"",suffix:`time${a.count.eq(1)?"":"s"} every ${c}`})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(we,{resource:a,allowUnlocking:!0,prefix:a.unlocked?"Additional":"Unlock"})})),(0,n.jsxs)("div",Object.assign({className:"full right"},{children:["Enabled:",(0,n.jsx)(Ee,{checked:a.unlocked&&!a.disabled,onChange:e=>a.disabled=!e,checkedContents:(0,n.jsx)(D,{icon:"robot"}),unCheckedContents:(0,n.jsx)(D,{icon:"robot-off"}),enabled:a.unlocked&&a.count.gt(0)})]})),(0,n.jsx)(Ue,Object.assign({value:u(a),className:"full computed"},{children:"Automatically reveals any purchased hints."})),(0,n.jsx)("hr",{className:"separator"}),(0,n.jsx)("div",Object.assign({className:"half"},{children:(0,n.jsx)(fe,{resource:r,showChrome:!0,showLocked:!0,infix:"",suffix:`time${r.count.eq(1)?"":"s"} every ${c}`})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(we,{resource:r,allowUnlocking:!0,prefix:r.unlocked?"Additional":"Unlock"})})),(0,n.jsxs)("div",Object.assign({className:"full right"},{children:["Enabled:",(0,n.jsx)(Ee,{checked:r.unlocked&&!r.disabled,onChange:e=>r.disabled=!e,checkedContents:(0,n.jsx)(D,{icon:"robot"}),unCheckedContents:(0,n.jsx)(D,{icon:"robot-off"}),enabled:r.unlocked&&r.count.gt(0)})]})),(0,n.jsx)(Ue,Object.assign({value:u(r),className:"full computed"},{children:"Automatically makes a hint purchase when there are no other actions available."}))]})),(0,n.jsxs)("div",Object.assign({className:"game-controls panel"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Game Automation"})),(0,n.jsx)("div",Object.assign({className:"half"},{children:(0,n.jsx)(fe,{resource:i,showChrome:!0,showLocked:!0,infix:"",suffix:`time${i.count.eq(1)?"":"s"} every ${c}`})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(we,{resource:i,allowUnlocking:!0,prefix:i.unlocked?"Additional":"Unlock"})})),(0,n.jsxs)("div",Object.assign({className:"full right"},{children:["Enabled:",(0,n.jsx)(Ee,{checked:i.unlocked&&!i.disabled,onChange:e=>i.disabled=!e,checkedContents:(0,n.jsx)(D,{icon:"robot"}),unCheckedContents:(0,n.jsx)(D,{icon:"robot-off"}),enabled:i.unlocked&&i.count.gt(0)})]})),(0,n.jsx)(Ue,Object.assign({value:u(i),className:"full computed"},{children:"Automatically initiates game reset when the game is either won or lost."})),(0,n.jsx)("hr",{className:"separator"}),(0,n.jsx)("div",Object.assign({className:"half"},{children:(0,n.jsx)(fe,{resource:o,showChrome:!0,showLocked:!0,infix:"",suffix:`time${o.count.eq(1)?"":"s"} after reset`})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(we,{resource:o,allowUnlocking:!0,prefix:o.unlocked?"Additional":"Unlock"})})),(0,n.jsxs)("div",Object.assign({className:"full right"},{children:["Enabled:",(0,n.jsx)(Ee,{checked:o.unlocked&&!o.disabled,onChange:e=>o.disabled=!e,checkedContents:(0,n.jsx)(D,{icon:"robot"}),unCheckedContents:(0,n.jsx)(D,{icon:"robot-off"}),enabled:o.unlocked&&o.count.gt(0)})]})),(0,n.jsx)("div",Object.assign({className:"full computed"},{children:"Automatically reveals cells on new games. Does not differentiate between mines and clear cells."}))]})),(0,n.jsxs)("div",Object.assign({className:"game-controls panel"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Board Automation"})),(0,n.jsx)("div",Object.assign({className:"half"},{children:(0,n.jsx)(fe,{resource:l,showChrome:!0,showLocked:!0,infix:"",suffix:`time${l.count.eq(1)?"":"s"} every ${c}`})})),(0,n.jsx)("div",Object.assign({className:"right half"},{children:(0,n.jsx)(we,{resource:l,allowUnlocking:!0,prefix:l.unlocked?"Additional":"Unlock"})})),(0,n.jsxs)("div",Object.assign({className:"full right"},{children:["Enabled:",(0,n.jsx)(Ee,{checked:l.unlocked&&!l.disabled,onChange:e=>l.disabled=!e,checkedContents:(0,n.jsx)(D,{icon:"robot"}),unCheckedContents:(0,n.jsx)(D,{icon:"robot-off"}),enabled:l.unlocked&&l.count.gt(0)})]})),(0,n.jsx)(Ue,Object.assign({value:u(l),className:"full computed"},{children:"Automatically purchases game width and game height expansions if affordable."}))]}))]}))}function Je(){const e=R(),t=(0,B.TH)().search.toLowerCase().includes("debug");function s(s){const a=e.resourceManager.get(s);return(0,n.jsx)(fe,{resource:a,length:"percentage"===a.display?"tiny":"short",precision:"percentage"===a.display?1:void 0,showMaxValue:!0,showRate:!0,showExtras:t,showZeroRates:!0,showRateColors:!0,placeholder:""})}return(0,n.jsxs)("div",Object.assign({id:"stats"},{children:[(0,n.jsxs)("div",Object.assign({className:"panel stats",id:"stats-time"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Time Info"})),s("totalTime"),s("activeTime"),s("offlineTime")]})),(0,n.jsxs)("div",Object.assign({className:"panel stats",id:"stats-board"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Board Info"})),s("rows"),s("cols"),s("difficulty"),s("resetSpeed"),s("hintQuality")]})),(0,n.jsxs)("div",Object.assign({className:"panel stats",id:"stats-game"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Game Info"})),s("wins"),s("losses"),s("resets"),s("automation")]})),(0,n.jsxs)("div",Object.assign({className:"panel stats",id:"stats-cell"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:"Cell Info"})),s("cells"),s("flags"),s("hints"),s("explosions"),s("clicks"),s("revealNeighbors")]}))]}))}const Ye={rows:0,cols:0,cells:[],state:"inactive",cellStates:{hidden:0,hinted:0,flagged:0,revealed:0,blown:0},cellContents:{clear:0,mine:0},hadUserAction:!1},Xe={row:0,col:0,contents:"clear",state:"hidden",neighborStates:Object.assign({},Ye.cellStates),neighborContents:Object.assign({},Ye.cellContents)};function et(e,t){switch(t){case"flag":"hidden"===e.state||"hinted"===e.state?e.state="flagged":"flagged"===e.state&&(e.state="hidden");break;case"reveal":"hidden"!==e.state&&"hinted"!==e.state||("clear"===e.contents?e.state="revealed":"mine"===e.contents&&(e.state="blown"));break;case"hint":"hidden"===e.state&&(e.state="hinted");break;case"hide":"flagged"!==e.state&&"revealed"!==e.state||(e.state="hidden")}return e}function tt(e,t=1){var s;e.cellStates=Object.assign({},Ye.cellStates),e.cellContents=Object.assign({},Ye.cellContents),e.cells.forEach((e=>e.forEach((e=>{e.neighborStates=Object.assign({},Xe.neighborStates),e.neighborContents=Object.assign({},Xe.neighborContents)}))));for(let t=0;t<e.rows;t++)for(let n=0;n<e.cols;n++){const a=e.cells[t][n];e.cellStates[a.state]++,e.cellContents[a.contents]++,a.row=t,a.col=n,a.locked=!!a.locked||void 0,f(a,["contents","state","locked"]);for(let r=t-1;r<=t+1;r++)for(let i=n-1;i<=n+1;i++){const o=(null!==(s=e.cells[r])&&void 0!==s?s:[])[i];!o||r===t&&i===n||(a.neighborContents[o.contents]++,a.neighborStates[o.state]++)}}return"lost"===e.state||e.cellStates.blown>=t?(e.state="lost",e.cells.forEach((t=>t.forEach((t=>{e.cellStates[t.state]--,et(t,"reveal"),e.cellStates[t.state]++}))))):e.cols*e.rows==0?e.state="inactive":e.cellStates.blown+e.cellStates.flagged>=e.cellContents.mine&&0===e.cellStates.hidden&&e.cellStates.revealed>=e.cols*e.rows-e.cellContents.mine?e.state="won":e.state="active",f(e,["rows","cols","cells","hadUserAction"])}function st(e,t,s=0,n=8,a=0){s=Math.floor(c(s,0,8)),n=Math.floor(c(n,0,8));const r=u.pickWeightedSamples(e.cells.flat(),t,a,((e,t)=>e.neighborContents.mine-t.neighborContents.mine),(e=>"hidden"===e.state&&"clear"===e.contents&&e.neighborContents.mine>=s&&e.neighborContents.mine<=n));return r.forEach((t=>{e.cellStates[t.state]--,et(t,"hint"),e.cellStates[t.state]++})),r.length}function nt(e,t,s=1){if(t){const t=e.manager.resources.automation;t.add(s),t.extra.total+=s,null!=e.extra.auto&&(e.extra.auto+=s)}else null!=e.extra.manual&&(e.extra.manual+=s);null!=e.extra.total&&(e.extra.total+=s),null!=e.extra.streak&&(e.extra.streak+=s,null!=e.extra.longestStreak&&e.extra.streak>e.extra.longestStreak&&(e.extra.longestStreak=e.extra.streak))}const at={"board:active":"resets","board:lost":"losses","board:won":"wins","cell:blown":"explosions","cell:hinted":"hints","cell:flagged":"flags","cell:revealed":"cells"};function rt(e,t,s,n,a=1){var r;const i=e.resourceManager.resources,o=i[null!==(r=at[t+":"+s])&&void 0!==r?r:""];switch(o&&(o.add(a),nt(o,n,a)),t+":"+s){case"cell:unflagged":i.flags.add(-a),i.flags.extra.unflags+=a;break;case"cell:unrevealed":i.cells.add(-a),i.cells.extra.hidden+=a;break;case"board:won":i.losses.extra.streak=0;break;case"board:lost":i.wins.extra.streak=0}}function it(e,t,s,n,a){var r,i;const o=e.resourceManager.resources.revealNeighbors,l=[];for(let e=s.row-1;e<=s.row+1;e++)for(let n=s.col-1;n<=s.col+1;n++)"hidden"===(null===(i=(null!==(r=t.cells[e])&&void 0!==r?r:[])[n])||void 0===i?void 0:i.state)&&l.push(t.cells[e][n]);u.shuffle(l).splice(n);for(const t of l)et(t,"reveal"),rt(e,"cell",t.state,!0),"revealed"===t.state&&"clear"===t.contents?o.extra.reveals++:"blown"===t.state||"mine"===t.contents?o.extra.explosions++:o.extra.useless++;return nt(o,a),0===l.length&&o.extra.useless++,l.length}function ot(e,t=!1){var s;const n=e.resourceManager.resources;let a=n.minesweeper.extra.board;const r=t&&"inactive"===a.state&&n.resets.count.eq(0)&&0===n.resets.extra.total,i=r?1:function({resourceManager:{resources:e}}){return e.rows.value().toNumber()*e.cols.value().toNumber()*(e.difficulty.value().toNumber()/100)}(e);if(n.minesweeper.extra.tapMode="reveal",n.minesweeper.extra.board=a=function(e,t,s,n){let a=function(e,t){const s=[];for(let n=0;n<e;n++){s[n]=[];for(let e=0;e<t;e++)s[n][e]=Object.assign(Object.assign({},Xe),{row:n,col:e})}return{rows:e,cols:t,cells:s,state:"active",cellStates:Object.assign(Object.assign({},Ye.cellStates),{hidden:e*t}),cellContents:Object.assign(Object.assign({},Ye.cellContents),{clear:e*t}),hadUserAction:!1}}(e,t);return a=function(e,t,s){var n,a;t=null!==(n=null!=t?t:s)&&void 0!==n?n:0,s=null!==(a=null!=s?s:t)&&void 0!==a?a:0;let r=c(Math.floor(t+Math.random()*(1+s-t)),0,e.cellStates.hidden-e.cellContents.mine-1);for(;r>0;){const t=Math.floor(Math.random()*e.rows),s=Math.floor(Math.random()*e.cols);"clear"===e.cells[t][s].contents&&"hidden"===e.cells[t][s].state&&(e.cells[t][s].contents="mine",e.cellContents.mine++,r--)}return tt(e)}(a,s,n),a}(n.rows.value().toNumber(),n.cols.value().toNumber(),Math.floor(i),Math.ceil(i)),rt(e,"board",a.state,t),r&&(0===st(a,1,0,0,1)&&st(a,1,0,1,1),rt(e,"cell","hinted",!0)),n.autoClickBoard.count.gt(0)&&(null===(s=n.autoClickBoard.unlocked)||void 0===s||s)&&!n.autoClickBoard.disabled)for(let t=n.autoClickBoard.value().toNumber();t>0;t--){const t=Math.floor(Math.random()*n.rows.value().toNumber()),s=Math.floor(Math.random()*n.cols.value().toNumber()),r=a.cells[t][s];"hidden"===r.state&&"active"===a.state&&(et(r,"reveal"),rt(e,"cell",r.state,!0))}return gt(e)}function lt({resourceManager:{resources:e}}){var t,s;const n=e.minesweeper.extra.board;return 100*((null===(t=n.cellStates)||void 0===t?void 0:t.revealed)+(null===(s=n.cellStates)||void 0===s?void 0:s.flagged))/(n.rows*n.cols)}function ct({resourceManager:{resources:e}}){return e.hintQuality.value().toNumber()/100}function ut({resourceManager:{resources:e}}){return(1-e.resetSpeed.value().toNumber()/100)*Math.sqrt(e.rows.value().toNumber()*e.cols.value().toNumber()*(e.difficulty.value().toNumber()/100)*10)}function dt({resourceManager:{resources:e}}){return(e.difficulty.value().toNumber()+10)/25}function mt(e,t){var s,n;if(!e||e.count.lte(0)||null!==(s=e.unlocked)&&void 0!==s&&!s||e.disabled)return NaN;const a=e.manager.context;return null!=t||(t=(Date.now()-(null!==(n=e.execution.lastTick)&&void 0!==n?n:Date.now()))/1e3/a.settings.timeDilation),t*e.count.toNumber()/60}function ht(e,t){return"tick"===t&&mt(this,e)>=1}function gt(e,t=!0){if(t){const t=e.resourceManager.resources;t.minesweeper.extra.board=Object.assign({},tt(t.minesweeper.extra.board,t.minesweeper.extra.maxErrors))}return t}function ft(e){return"revealed"===e.state&&"clear"===e.contents&&e.neighborContents.mine===e.neighborStates.flagged+e.neighborStates.blown&&e.neighborStates.hidden>0}function vt(e){return"revealed"===e.state&&"clear"===e.contents&&e.neighborContents.mine===e.neighborStates.flagged+e.neighborStates.blown+e.neighborStates.hidden&&e.neighborContents.clear===e.neighborStates.revealed&&e.neighborStates.hidden>0}function pt(e){return"hinted"===e.state&&"clear"===e.contents}const bt=[{name:"Tutorial",step:0,title:"Starting Tutorial",body:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",Object.assign({className:"full"},{children:"Hi! Welcome to exp2."})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"This is where I test the different features I make for my game engine."})),(0,n.jsx)("div",Object.assign({className:"full"},{children:"These dialogs are tests of the tutorial system."}))]}),greyOut:!0},{name:"Tutorial",step:5,title:"Tabs",body:(0,n.jsx)("div",Object.assign({className:"full"},{children:"Go to the minesweeper tab for enabling the next step."})),greyOut:!1},{name:"Tutorial",step:10,enabled:()=>window.location.toString().includes("minesweep"),title:"Changed tab",body:(0,n.jsx)("div",Object.assign({className:"full"},{children:"Yay."}))}];window.addEventListener("load",(()=>(0,a.s)(F("app")).render((0,n.jsx)(P,{children:(0,n.jsx)(ke,{})}))),!1),M.push((function(e){!function(e){e.popupManager.register(...bt),e.popupManager.setPopupState("Tutorial",{})}(e),function(e){const[t,...s]=function(e,t="x",s=0){const n=["⁰","¹","²","³","⁴","⁵","⁶","⁷","⁸","⁹"],a=[];for(let r=0;r<=s;r++){const s=Array.from(r<=1?"":r.toFixed()).reduce(((e,t)=>e+n[parseInt(t)]),"");a.push(e.resourceManager.upsert({name:`${t}_${r}`,singularName:r?`d${s}/dt${s} . ${t}`:t,priority:r,count:l.Z.dZero,extra:{base:0},value(){return this.count},unlocked:0===r,autoUnlock:!0,unlockCost:()=>[{resource:`${t}_0`,count:l.Z.pow10(r-.3)},{resource:`${t}_${r-1}`,count:1}],cost:e=>r?[{resource:`${t}_0`,count:l.Z.sub(e,1).div(10).add(1).floor().mul(Math.floor(Math.pow(r,1.5))+1).sub(1).floor().pow10()}]:[],onPurchase(e){var t;"free"!==e.style&&(this.extra.base=(null!==(t=this.extra.base)&&void 0!==t?t:0)+l.Z.fromValue(e.count).toNumber(),r>0&&(this.extra.factor=l.Z.div(this.extra.base,10).floor().pow_base(l.Z.dTwo).round().toNumber()))},tick(e){var s;r>0&&this.manager.get(`${t}_${r-1}`).add(this.count.multiply(null!==(s=this.extra.factor)&&void 0!==s?s:0).multiply(.1*e))}}))}return a}(e,"x",10);pe.registerTab({path:"/derivatives",placement:"left",order:1,heading:"Derivatives",body:()=>(0,n.jsx)("div",Object.assign({id:"x"},{children:(0,n.jsx)(Se,{main:t,rest:s})}))}),pe.registerShortcut("x",(()=>(function(e,t){const s=Object.fromEntries(t.map((e=>[e.name,"base"])));e.resourceManager.purchaseAll(s,{minAmount:1,maxAmount:1e3,increments:10}),e.resourceManager.purchaseAll(s,10)}(e,s),!0)))}(e),function(e){!function(e){const t=[{name:"minesweeper",extra:{board:Object.assign({},Ye),tapMode:"reveal",maxErrors:1}},{name:"wins",singularName:"win",icon:"icon-won ti:square-check",count:l.Z.dZero,extra:{auto:0,manual:0,total:0,streak:0,longestStreak:0}},{name:"losses",singularName:"lose",icon:"icon-lost ti:square-x",count:l.Z.dZero,extra:{auto:0,manual:0,total:0,streak:0,longestStreak:0}},{name:"resets",singularName:"reset",icon:"ti:refresh",count:l.Z.dZero,extra:{auto:0,manual:0,total:0}},{name:"automation",icon:"ti:robot",count:l.Z.dZero,extra:{total:0}},{name:"rows",singularName:"row",icon:"ti:arrows-vertical",count:l.Z.fromNumber(3),minCount:l.Z.fromNumber(3),cost:e=>[{resource:"cells",count:l.Z.sqr(e)}],value(){return this.count.floor()}},{name:"cols",singularName:"col",icon:"ti:arrows-horizontal",count:l.Z.fromNumber(3),minCount:l.Z.fromNumber(3),cost:e=>[{resource:"cells",count:l.Z.sqr(e)}],value(){return this.count.floor()}},{name:"difficulty",icon:"ti:adjustments-horizontal",display:"percentage",count:l.Z.fromNumber(15),minCount:l.Z.fromNumber(1),maxCount:l.Z.fromNumber(100),cost:e=>[{resource:"flags",count:l.Z.div(e,2).floor()}]},{name:"hintQuality",icon:"icon-hinted ti:bulb",display:"percentage",count:l.Z.dZero,maxCount:l.Z.fromNumber(100),cost:e=>[{resource:"cells",count:l.Z.mul(e,2)},{resource:"wins",count:l.Z.div(e,10).floor()}]},{name:"hintsCount",singularName:"hint",pluralName:"hints",count:l.Z.dOne,cost:e=>[{resource:"cells",count:l.Z.pow(2,l.Z.add(e,1))},{resource:"wins",count:l.Z.add(e,1).sqr()}],value(){return this.count.floor()}},{name:"resetSpeed",icon:"ti:refresh-alert",display:"percentage",count:l.Z.dZero,maxCount:l.Z.fromNumber(100),extra:{remainingTime:0},cost:e=>[{resource:"resets",count:1},{resource:"cells",count:e}],tick:p({kind:"remainingTime",direction:-1})},{name:"revealNeighbors",icon:"icon-revealed ti:arrows-maximize",unlocked:!1,count:l.Z.dZero,maxCount:l.Z.fromNumber(8),extra:{reveals:0,explosions:0,auto:0,manual:0,useless:0},cost:e=>[{resource:"cells",count:l.Z.pow(2,l.Z.add(e,1))}],unlockCost:()=>[],value(){return this.count.floor()}},{name:"clicks",singularName:"click",icon:"ti:hand-click",count:l.Z.dZero,extra:{left:0,right:0,double:0,useless:0}},{name:"cells",singularName:"cell",icon:"icon-revealed ti:square",count:l.Z.dZero,extra:{auto:0,manual:0,total:0,hidden:0}},{name:"hints",singularName:"hint",icon:"icon-hinted ti:eye",count:l.Z.dZero,extra:{auto:0,manual:0,total:0},cost:()=>[{resource:"wins",count:1}],gainFactor:t=>e.resourceManager.get("hintsCount").count.mul(t)},{name:"flags",singularName:"flag",icon:"icon-flagged ti:flag-2",count:l.Z.dZero,extra:{auto:0,manual:0,total:0,unflags:0}},{name:"explosions",singularName:"explosion",icon:"icon-blown ti:alert-triangle",count:l.Z.dZero,extra:{auto:0,manual:0,total:0}},{name:"autoRevealNeighbors",unlocked:!1,count:l.Z.dZero,cost:e=>[{resource:"automation",count:l.Z.pow(l.Z.add(e,1),1.5).floor()}],unlockCost:()=>[],shouldTick:ht,tick:()=>function(e){var t;const s=e.resourceManager.resources,n=s.minesweeper.extra.board,a=s.autoRevealNeighbors;if(a.count.lte(0)||null!==(t=a.unlocked)&&void 0!==t&&!t||a.disabled||"active"!==n.state)return null;const r=n.cells.flat().filter(ft);return 0!==r.length&&gt(e,it(e,n,u.shuffle(r)[0],s.revealNeighbors.count.toNumber(),!0)>0)}(e)},{name:"autoFlagMines",unlocked:!1,count:l.Z.dZero,cost:e=>[{resource:"automation",count:l.Z.pow(l.Z.add(e,1),1.5).floor()}],unlockCost:()=>[],shouldTick:ht,tick:()=>function(e){var t,s,n;const a=e.resourceManager.resources.minesweeper.extra.board,r=e.resourceManager.resources.autoFlagMines;if(r.count.lte(0)||null!==(t=r.unlocked)&&void 0!==t&&!t||r.disabled||"active"!==a.state)return null;const i=a.cells.flat().filter(vt);if(0===i.length)return!1;const o=u.shuffle(i)[0],l=[];for(let e=o.row-1;e<=o.row+1;e++)for(let t=o.col-1;t<=o.col+1;t++)"hidden"===(null===(n=(null!==(s=a.cells[e])&&void 0!==s?s:[])[t])||void 0===n?void 0:n.state)&&l.push(a.cells[e][t]);if(0===l.length)return!1;const c=u.shuffle(l)[0];return et(c,"flag"),rt(e,"cell",c.state,!0),gt(e)}(e)},{name:"autoRevealHints",unlocked:!1,count:l.Z.dZero,cost:e=>[{resource:"automation",count:l.Z.pow(l.Z.add(e,1),1.5).floor()}],unlockCost:()=>[],shouldTick:ht,tick:()=>function(e){var t;const s=e.resourceManager.resources.minesweeper.extra.board,n=e.resourceManager.resources.autoRevealHints;if(n.count.lte(0)||null!==(t=n.unlocked)&&void 0!==t&&!t||n.disabled||"active"!==s.state)return null;const a=s.cells.flat().filter(pt);if(0===a.length)return!1;const r=u.shuffle(a)[0];return et(r,"reveal"),rt(e,"cell",r.state,!0),gt(e)}(e)},{name:"autoPurchaseHints",unlocked:!1,count:l.Z.dZero,cost:e=>[{resource:"automation",count:l.Z.pow(l.Z.add(e,1),2).floor()}],unlockCost:()=>[],shouldTick:ht,tick:()=>function(e){var t;const s=e.resourceManager.resources.minesweeper.extra.board,n=e.resourceManager.resources.autoPurchaseHints;if(n.count.lte(0)||null!==(t=n.unlocked)&&void 0!==t&&!t||n.disabled||"active"!==s.state||0===function({resourceManager:{resources:e}}){var t,s;const n=e.minesweeper.extra.board;return n.rows*n.cols-(null===(t=n.cellContents)||void 0===t?void 0:t.mine)-(null===(s=n.cellStates)||void 0===s?void 0:s.revealed)}(e))return null;const a=e.resourceManager.resources.hints;if(s.cells.flat().filter((e=>pt(e)||ft(e)||vt(e))).length>0)return!1;const r=a.buy();if(l.Z.eq(r.count,0))return!1;const i=st(s,l.Z.fromValue(r.gain[0].count).toNumber(),0,8,ct(e));return i>0&&(nt(a,!0,i),gt(e))}(e)},{name:"autoResetGame",unlocked:!1,count:l.Z.dZero,cost:e=>[{resource:"automation",count:l.Z.pow(l.Z.add(e,1),1.5).floor()}],unlockCost:()=>[],shouldTick:ht,tick:()=>function(e){var t;const s=e.resourceManager.resources,n=s.minesweeper.extra.board;if(s.autoResetGame.count.lte(0)||null!==(t=s.autoResetGame.unlocked)&&void 0!==t&&!t||s.autoResetGame.disabled||"active"===n.state||"inactive"===n.state||s.resetSpeed.extra.remainingTime>0)return null;const a=ut(e);return a<.001?(ot(e,!0),!0):(s.resetSpeed.extra.remainingTime=a,!1)}(e)},{name:"autoClickBoard",unlocked:!1,count:l.Z.dZero,cost:e=>[{resource:"automation",count:l.Z.pow(l.Z.add(e,1),2).floor()}],unlockCost:()=>[]},{name:"autoBoardUpgrade",singularName:"Auto Expand Board",pluralName:"Auto Expand Board",unlocked:!1,count:l.Z.dZero,cost:e=>[{resource:"automation",count:l.Z.pow(l.Z.add(e,1),2).floor()}],unlockCost:()=>[],shouldTick:ht,tick:()=>function(e){var t;const s=e.resourceManager.resources;if(s.autoBoardUpgrade.count.lte(0)||null!==(t=s.autoBoardUpgrade.unlocked)&&void 0!==t&&!t||s.autoBoardUpgrade.disabled)return null;const n=s.rows.count<s.cols.count?s.rows:s.cols,a=n.buy();return!l.Z.eq(a.count,0)&&(nt(n,!0),gt(e))}(e)}];t.map(e.resourceManager.upsert)}(e),pe.registerTab({path:"/minesweeper",placement:"left",order:2,heading:"Minesweeper",body:()=>(0,n.jsxs)("div",Object.assign({id:"minesweeper"},{children:[(0,n.jsx)(Le,{}),(0,n.jsx)(ze,{}),(0,n.jsx)(Ge,{}),(0,n.jsx)(Qe,{}),(0,n.jsx)(Ke,{}),(0,n.jsx)(Je,{})]}))})}(e),pe.registerTab({path:"/grid_test",placement:"left",order:3,heading:"Grids Test",body:()=>(0,n.jsx)("div",{children:Re.map((e=>(0,n.jsxs)("div",Object.assign({className:"panel"},{children:[(0,n.jsx)("div",Object.assign({className:"title-bar"},{children:e})),Pe.map(((t,s)=>(0,n.jsx)("div",Object.assign({className:"full center"},{children:(0,n.jsx)($e,{cells:t,render:Te,shape:e,cellGap:"1px",cellStyle:()=>({background:"linear-gradient(#aaa, #eee)"})})}),e+"-"+s)))]}),e)))})})}))},877:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function Fn(){return Fn}__webpack_require__.d(__webpack_exports__,{Z:()=>Fn}),Fn.apply=function(e,...t){return(...s)=>e(...t,...s)},Fn.compose=function(...e){return t=>e.reduceRight(((e,t)=>t(e)),t)},Fn.chain=function(...e){return t=>e.reduce(((e,t)=>t(e)),t)},Fn.map=function(...e){return(...t)=>e.map((e=>e(...t)))},Fn.mapReduce=function(e,...t){const s=Fn.map(...t);return(...t)=>e(s(...t))},Fn.compile=function(body,thisBind,args=[],globals={},reserved=[],forceArgs=!1,forceGlobals=!1){let fnBody=body.replace(/\b\w+\b/gim,(function(e){return!e||"this"===e||reserved.includes(e)?e:args.includes(e)?(forceArgs=!0,"___param_"+e):globals[e]?(forceGlobals=!0,"___globals."+e):e})),fn;forceArgs&&(fnBody=`(function (${args.map((e=>"___param_"+e)).join(",")}) { return ${fnBody}; })`),forceGlobals&&(fnBody=`(function (___globals) { return (${fnBody}); })`);try{fn=eval(fnBody)}catch(e){fn=null}return thisBind&&"function"==typeof fn&&(fn=fn.bind(thisBind)),forceGlobals&&"function"==typeof fn&&(fn=fn(globals),thisBind&&"function"==typeof fn&&(fn=fn.bind(thisBind))),"function"!=typeof fn?forceArgs?()=>fn:Fn.compile(body,thisBind,args,globals,reserved,!0,forceGlobals):fn}}},__webpack_module_cache__={},deferred,leafPrototypes,getProto;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var s=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](s,s.exports,__webpack_require__),s.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(e,t,s,n)=>{if(!t){var a=1/0;for(l=0;l<deferred.length;l++){for(var[t,s,n]=deferred[l],r=!0,i=0;i<t.length;i++)(!1&n||a>=n)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[i])))?t.splice(i--,1):(r=!1,n<a&&(a=n));if(r){deferred.splice(l--,1);var o=s();void 0!==o&&(e=o)}}return e}n=n||0;for(var l=deferred.length;l>0&&deferred[l-1][2]>n;l--)deferred[l]=deferred[l-1];deferred[l]=[t,s,n]},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var s=Object.create(null);__webpack_require__.r(s);var n={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var a=2&t&&e;"object"==typeof a&&!~leafPrototypes.indexOf(a);a=getProto(a))Object.getOwnPropertyNames(a).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,__webpack_require__.d(s,n),s},__webpack_require__.d=(e,t)=>{for(var s in t)__webpack_require__.o(t,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={873:0};__webpack_require__.O.j=t=>0===e[t];var t=(t,s)=>{var n,a,[r,i,o]=s,l=0;if(r.some((t=>0!==e[t]))){for(n in i)__webpack_require__.o(i,n)&&(__webpack_require__.m[n]=i[n]);if(o)var c=o(__webpack_require__)}for(t&&t(s);l<r.length;l++)a=r[l],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return __webpack_require__.O(c)},s=self.webpackChunkexp2=self.webpackChunkexp2||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var __webpack_exports__=__webpack_require__.O(void 0,[216],(()=>__webpack_require__(181)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();