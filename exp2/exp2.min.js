"use strict";(self.webpackChunkexp2=self.webpackChunkexp2||[]).push([[873],{54:(e,t,n)=>{n.r(t);var s=n(893),a=n(745),i=n(294);function r(e,t,n){e[t]&&n&&"object"==typeof n?e[t]=Object.assign(Object.assign({},e[t]),n):null!=n&&null!=n&&(e[t]=n)}function o(){const e=window.localStorage,t="__storage_test__";if(!e)return!1;try{return e.setItem(t,t),e.removeItem(t),!0}catch(t){return t instanceof DOMException&&0!==e.length&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)}}var l=n(243);function c(e){return e.filter(((e,t,n)=>n.indexOf(e)===t))}function u(e){const t=e.startsWith(".."),n=(t?e:Math.random().toString(36)).substring(2,10);return(t?"":".."+n)+(t?e.slice(10):e).split("").map((e=>e.charCodeAt(0))).map(((e,t)=>String.fromCharCode(e^n.charCodeAt(t%8)))).join("")}function d(e){const t=[],n=e._save_properties;return null!=n&&"object"==typeof n&&Array.isArray(n)&&t.push(...n),t}function m(e){if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map((e=>m(e)));if(e instanceof l.Z)return e.toJSON();if(0===Object.keys(e).length)return null;const t={},n=d(e);let s;for(s in e)if(!s.startsWith("_")&&null!=e[s]&&(0===n.length||n.includes(s))){const n=e[s];if("object"==typeof n){const e=m(n);null!=e&&(t[s.toString()]=e)}else"function"!=typeof n&&(t[s.toString()]=n)}return t}function p(e,t){const n=d(e);return n.push(...t),Object.assign(e,{_save_properties:c(n)}),e}function g(e,...t){return(...n)=>e(...t,...n)}function f(e=0,t=0,n=1){return isNaN(e)||e<t?t:e>n?n:e}var h=n(730);function v(e,{kind:t="",tickSource:n="",minValue:s=0,maxValue:a=1/0,direction:i=1,streakKind:r="current",maxStreakKind:o="max",minStreakKind:c="min",resetStreakSource:u=""}={}){return(d,m)=>{var p,g;if(n&&m!==n)u&&m!==u||r&&e.extra&&(e.extra[r]=i>0?s:i<0?a:0);else{let n=null!==(g=t&&e.extra?e.extra[t]:null===(p=e.count)||void 0===p?void 0:p.toNumber())&&void 0!==g?g:0;(n>s||i>0)&&(n<a||i<0)&&(n=f(n+i*d,s,a),t&&e.extra?e.extra[t]=n:e.count=l.Z.fromNumber(n),r&&e.extra&&null!=e.extra[r]&&(e.extra[r]=f(e.extra[r]+i*d,s,a),o&&null!=e.extra[o]&&e.extra[o]<e.extra[r]&&(e.extra[o]=e.extra[r]),c&&null!=e.extra[c]&&e.extra[c]>e.extra[r]&&(e.extra[c]=e.extra[r])))}return null}}function x(e,t){var n;return null!==(n=e.resources["string"==typeof t?t:t.name])&&void 0!==n?n:b(e,t)}function b(e,t){var n,s;const a="string"==typeof t?t:null!==(n=t.name)&&void 0!==n?n:"",i=null!==(s=e.resources[a])&&void 0!==s?s:function(e,t){const n={manager:e,name:t,count:l.Z.dZero,extra:{},value:()=>{var e,t;return null!=n.minCount||null!=n.maxCount?n.count.clamp(null!==(e=n.minCount)&&void 0!==e?e:l.Z.dZero,null!==(t=n.maxCount)&&void 0!==t?t:l.Z.dInf):n.count},cost:()=>[],buy:(t=l.Z.dOne,s="partial",a=l.Z.dOne,i=l.Z.dOne)=>j(e,[{resource:n,count:t}],s,a,i),sell:(e,t)=>n.buy(l.Z.fromValue(null!=e?e:1).negate(),void 0,void 0,t),add:(e,t)=>n.buy(e,"free",t),canBuy:(e,t)=>n.buy(e,"dry-partial",void 0,t),execution:{},rate:{count:l.Z.dZero,ticks:0,pastCounts:[],pastTicks:[]}};return p(n,["name","unlocked","disabled","count","extra"])}(e,a);if("string"!=typeof t){let e;for(e in t)"extra"===e?r(i,e,t[e]):"count"===e||"maxCount"===e||"minCount"===e?null!=t[e]&&(i[e]=l.Z.fromValue(t[e])):"manager"!==e&&"name"!==e&&null!=t[e]&&(i[e]=t[e])}return i.name&&(e.resources[i.name]=i),i}function j(e,t,n,s,a){const i=e.gainMultiplier?e.gainMultiplier(s):s,r=e.costMultiplier?e.costMultiplier(a):a,o=y(e,t).map((t=>{const s=t.resource,a=s.gainMultiplier?s.gainMultiplier(i):i,o=s.costMultiplier?s.costMultiplier(r):r,c=function(e,t,n,s,a,i){var r,o,c,u;if(!t||l.Z.fromValue(n).equals(l.Z.dZero)||null!==(r=t.unlocked)&&void 0!==r&&!r&&!s.includes("dry"))return{count:l.Z.dZero,style:s,gain:[],cost:[]};let d=t.count,m=d.plus(n).clamp(null!==(o=t.minCount)&&void 0!==o?o:l.Z.dZero,null!==(c=t.maxCount)&&void 0!==c?c:l.Z.dInf);if("free"===s){const e=m.minus(d);return{count:e,style:s,gain:[{resource:t,count:e.multiply(a)}],cost:[]}}[a,i]=[l.Z.fromValue(a),l.Z.fromValue(i)],d.greaterThan(m)&&([d,m]=[m,d],[a,i]=[a.negate(),i.negate().multiply(null!==(u=e.settings.sellRatio)&&void 0!==u?u:1)]);let p=[],g=p,f=l.Z.dZero;for(let n=d;n.lessThan(m);n=n.add(1)){const a=Z(y(e,t.cost(n.add(1))),i);if(s.includes("partial")&&(g=N(g,a),!O(e,g)))break;f=f.add(1),p=N(p,a)}return"dry-full"!==s&&!O(e,p)||"full"===s&&d.plus(f).notEquals(m)?{count:l.Z.dZero,style:s,gain:[],cost:[]}:{count:f.multiply(a.sign),style:s,gain:[{resource:t,count:f.multiply(a)}],cost:p}}(e,s,t.count,n,a,o);if("dry-partial"===n||"dry-full"===n)return c;{const t=w(s,c.gain),a=c.cost.map((({resource:t,count:n})=>w(x(e,t),[{resource:t,count:l.Z.fromValue(n).negate()}]))).flat(),i={count:c.count,style:n,gain:t,cost:a};return s.onPurchase&&s.onPurchase(i),i}}));return{count:o.reduce(((e,t)=>e.plus(t.count)),l.Z.dZero),style:n,gain:N(o.map((e=>e.gain)).flat()),cost:N(o.map((e=>e.cost)).flat())}}function y(e,t){return t.map((({resource:t,count:n})=>({resource:x(e,t),count:n}))).filter((({resource:e,count:t})=>e&&t))}function O(e,t,n=!0){return y(e,N(t)).every((e=>function(e,t,n=!1){var s;return(null===(s=e.unlocked)||void 0===s||s)&&N(t).every((({resource:t,count:s})=>{var a;return e.name!==("string"==typeof t?t:t.name)||e.count.minus(s).greaterThanOrEqualTo(n&&"string"!=typeof t&&null!==(a=t.minCount)&&void 0!==a?a:l.Z.dZero)}))}(e.resource,[e],n)))}function N(e,...t){return[e,...t].flat().reduce(((e,t)=>{const n=e.find((e=>e.resource===t.resource||("string"==typeof e.resource?e.resource:e.resource.name)===("string"==typeof t.resource?t.resource:t.resource.name)));return n?(n.count=l.Z.fromValue(n.count).plus(t.count),e):[...e,Object.assign({},t)]}),[]).filter((({count:e})=>l.Z.fromValue(e).notEquals(l.Z.dZero)))}function Z(e,t){return e.map((({resource:e,count:n})=>({resource:e,count:l.Z.fromValue(n).multiply(t)})))}function w(e,t){return N(t.filter((({resource:t})=>{var n;return(null===(n=e.unlocked)||void 0===n||n)&&e.name===("string"==typeof t?t:t.name)})).map((({count:t})=>{var n,s;const a=e.count;return e.count=e.count.plus(t),null==e.minCount&&null==e.maxCount||(e.count=e.count.clamp(null!==(n=e.minCount)&&void 0!==n?n:l.Z.dZero,null!==(s=e.maxCount)&&void 0!==s?s:l.Z.dInf)),[{resource:e,count:e.count.minus(a)}]})).flat())}const k={ticksPerSecond:50,framesPerSecond:10,saveFrequencySecs:60,rateUpdateSecs:1,rateHistoryWindow:3,minResourceUpdateSecs:.001,maxResourceUpdateSecs:57600,maxResourceTickSecs:1,lastReset:Date.now(),lastUpdate:Date.now(),lastSaved:0,lastLoaded:Date.now(),sellRatio:.8,timeDilation:1,buyAmount:"",numberFormat:"",theme:""};function S(e){var t;const n=e||{};return null!==(t=n.init)&&void 0!==t||(n.init=()=>{}),n.settings=Object.assign(Object.assign({},k),{lastReset:Date.now(),lastUpdate:Date.now(),lastLoaded:Date.now()}),n.resourceManager=function(e,t){const n={context:e,settings:t,resources:{},upsert:e=>b(n,e),get:e=>x(n,e),purchase:(e,t="partial",s=l.Z.dOne,a=l.Z.dOne)=>j(n,e,t,s,a),canAfford:e=>O(n,e),update:(e,t)=>function(e,t,n){var s;const{rateUpdateSecs:a=1,rateHistoryWindow:i=3,minResourceUpdateSecs:r=.001,maxResourceUpdateSecs:o=86400,maxResourceTickSecs:u=1,timeDilation:d=1}=e.settings;let m=f((t-(null!==(s=e.settings.lastUpdate)&&void 0!==s?s:t))/1e3,0,o);if(m<r&&null!=e.settings.lastUpdate)return[];e.settings.lastUpdate=t;const p=t-1e3*m,g={};Object.values(e.resources).forEach((t=>{var n;!t.autoUnlock||t.disabled||null===(n=t.unlocked)||void 0===n||n||O(e,t.cost(1),!1)&&(t.unlocked=!0)}));const h=Object.values(e.resources).filter((e=>{var t;return null===(t=e.unlocked)||void 0===t||t}));h.forEach((e=>{var n,s,a,i,r;e.onChange&&(g[e.name]=e.count),null!==(n=(i=e.rate).lastCountUpdate)&&void 0!==n||(i.lastCountUpdate=p),null!==(s=(r=e.rate).lastCount)&&void 0!==s||(r.lastCount=e.count),e.execution.lastTick=f(null!==(a=e.execution.lastTick)&&void 0!==a?a:p,t-1e3*o,t),e.execution.lastAttempt=t}));const v={},x=h.filter((e=>e.tick&&!e.disabled)),b=.001/d;for(;m>0;){m-=f(m,r,u);const e=t-1e3*m;x.forEach((t=>{var s,a,i;const r=(e-t.execution.lastTick)*b;r>0&&(!t.shouldTick||t.shouldTick(r,n))&&(t.execution.lastResult=t.tick(r,n),t.execution.lastTick=e,t.rate.deltaTicks=(null!==(s=t.rate.deltaTicks)&&void 0!==s?s:0)+1,null!==(a=(i=t.rate).lastTickUpdate)&&void 0!==a||(i.lastTickUpdate=e),t.execution.lastResult&&(v[t.name]||(v[t.name]=[]),v[t.name].includes(t.execution.lastResult)||v[t.name].push(t.execution.lastResult)))}))}return h.forEach((e=>{var s,r,o,l;const c=(t-(null!==(s=e.rate.lastCountUpdate)&&void 0!==s?s:0))/1e3;(null==e.rate.lastCountUpdate||null==e.rate.lastCount||c>=a)&&(e.rate.count=e.count.minus(null!==(r=e.rate.lastCount)&&void 0!==r?r:0).divide(c),e.rate.lastCount=e.count,e.rate.lastCountUpdate=t,e.rate.pastCounts.unshift(e.rate.count),e.rate.pastCounts.splice(i));const u=(t-(null!==(o=e.rate.lastTickUpdate)&&void 0!==o?o:0))/1e3;if((null==e.rate.lastTickUpdate||null==e.rate.deltaTicks||u>=a)&&(e.rate.ticks=(null!==(l=e.rate.deltaTicks)&&void 0!==l?l:0)/u,e.rate.deltaTicks=0,e.rate.lastTickUpdate=t,e.rate.pastTicks.unshift(e.rate.ticks),e.rate.pastTicks.splice(i)),e.onChange&&e.count.notEquals(g[e.name])){const t=e.onChange(e.count,n);t&&!v[e.name].includes(t)&&v[e.name].push(t)}})),h.forEach((t=>{var s;if(t.autoAward&&!t.disabled&&t.count.lessThan(null!==(s=t.maxCount)&&void 0!==s?s:l.Z.dZero)){const s=t.cost(t.count.add(1));if(O(e,s,!1)&&(t.count=t.count.add(1),t.onPurchase&&t.onPurchase({count:l.Z.dOne,style:"free",gain:[{resource:t,count:l.Z.dOne}],cost:[]}),t.onChange)){const e=t.onChange(t.count,n);e&&!v[t.name].includes(e)&&v[t.name].push(e)}}})),c(Object.values(v).flat())}(n,null!=e?e:Date.now(),null!=t?t:"unknown")};return p(n,["resources"])}(n,n.settings),n.init(),p(n,["settings","resourceManager"])}const C=globalThis.gamePackage.name;function _(e,t){const n=Object.assign({},e),s=!!t&&function(e,t){let n=null;if(!n)try{n=JSON.parse(u(window.atob(t)))}catch(e){n=null}if(!n)try{n=JSON.parse(window.atob(t))}catch(e){n=null}if(!n)try{n=JSON.parse(t)}catch(e){n=null}return!!n&&function(e,t){if(!t||"object"!=typeof t||"object"!=typeof e)return!1;let n;for(n in e)typeof t[n]==typeof e[n]&&(e[n]=t[n]);return!0}(e,n)}(n,t);if(s){let t;for(t in e.init(),n.settings)r(e.settings,t,n.settings[t]);Object.values(n.resourceManager.resources||{}).forEach((t=>e.resourceManager.upsert(t))),e.settings.lastLoaded=Date.now(),e.resourceManager.update(void 0,"load")}return s}function M(e,t){return e.settings.lastSaved=Date.now(),function(e,t=!1){return t?JSON.stringify(m(e),null,2):window.btoa(u(JSON.stringify(m(e))))}(e,t)}const T=["⁰","¹","²","³","⁴","⁵","⁶","⁷","⁸","⁹"];function $(e){return Array.from(e.toFixed()).map((e=>T[parseInt(e)])).join("")}const A=l.Z.dTen.reciprocal();function U(e,t="x",n=0){return e.resourceManager.upsert({name:`${t}_${n}`,singularName:n?`d${$(n)} / d.${t}${$(n)}`:t,unlocked:0===n,autoUnlock:!0,count:l.Z.dZero,value(){return this.count},cost(e){if(!n)return[];const s=A.multiply(e).subtract(A).floor();return[{resource:`${t}_0`,count:s.plus(l.Z.dOne).multiply(n).plus(s).pow10()}]},extra:{},onPurchase(e){var t;"free"!==e.style&&(this.extra.manual=(null!==(t=this.extra.manual)&&void 0!==t?t:0)+l.Z.fromValue(e.count).toNumber(),n>0&&(this.extra.speedMultiplier=A.multiply(this.extra.manual).floor().pow_base(l.Z.dTwo).round().toNumber()))},tick(e){var s;n>0&&this.manager.get(`${t}_${n-1}`).add(this.count.multiply(null!==(s=this.extra.speedMultiplier)&&void 0!==s?s:0).multiply(.1*e))}})}const E=S(),I=(0,i.createContext)(E);function R(e){return(0,s.jsx)(I.Provider,Object.assign({value:E},{children:e.children}))}function P(){return function(e){return Object.assign(Object.assign(Object.assign({},e.resourceManager),e),{context:e,resource:t=>e.resourceManager.get(t),load:()=>{return _(e,(t=C,o()?window.localStorage.getItem(t):null));var t},loadAs:t=>_(e,t),save:t=>{return n=C,s=M(e,t),void(o()&&s&&window.localStorage.setItem(n,s));var n,s},saveAs:t=>M(e,t),reset:()=>function(e){var t;t=C,o()&&window.localStorage.removeItem(t),S(e)}(e)})}((0,i.useContext)(I))}const F=[];function q(){const e=P(),t=(0,i.useMemo)((()=>e.saveAs(!0)),[]);return(0,s.jsxs)("div",Object.assign({id:"reset"},{children:[(0,s.jsxs)("div",Object.assign({className:"panel options"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:"Load Failure!"})),(0,s.jsx)("div",Object.assign({className:"full"},{children:"Looks like something went very wrong in loading the game. It's possible that the game version is out of date, or that the save data is corrupt."})),(0,s.jsx)("hr",{className:"separator"}),(0,s.jsx)("div",Object.assign({className:"full"},{children:"For your records, here is the current contents of the save state. Keep this somewhere before resetting the game:"})),(0,s.jsx)("div",Object.assign({className:"full center"},{children:(0,s.jsx)("textarea",{value:t,readOnly:!0})}))]})),(0,s.jsxs)("div",Object.assign({className:"panel options reset"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar warning"},{children:"Game Reset"})),(0,s.jsx)("div",Object.assign({className:"full"},{children:"WARNING: this will completely reset your game and delete all saved progress and settings. This will hard reset the game from beginning."})),(0,s.jsx)("div",Object.assign({className:"full right"},{children:(0,s.jsx)("input",{type:"button",value:"Hard Reset Everything",onClick:function(){confirm("Are you sure you want to reset? This cannot be undone.")&&(e.reset(),window.location.reload())}})}))]}))]}))}Object.assign(E,{init:function(){var e;!function(e,t="x",n=0){const s=[];for(let a=0;a<=n;a++)s.push(U(e,t,a))}(this,"x",100),F.flat().forEach((e=>this.resourceManager.upsert(e))),e=this.resourceManager,Object.values(e.resources).forEach((e=>{const t=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e.manager.context),e.manager),e.manager.resources),l.Z),{timer:g(v,e)});if("string"==typeof e.value&&(e.value=(0,h.K)(e.value,e,[],t)),"string"==typeof e.cost){const n="["+e.cost.replace(/\s/gim,"").split(/[;]/gim).map((e=>{const t=e.split(/:/gim);return"{"+[`resource: ${t[0]}`,`count: ${t[t.length-1]}`].join(", ")+"}"})).join(", ")+"]";e.cost=(0,h.K)(n,e,["n"],t)}"string"==typeof e.shouldTick&&(e.shouldTick=(0,h.K)(e.shouldTick,e,["dt","source"],t)),"string"==typeof e.tick&&(e.tick=(0,h.K)(e.tick,e,["dt","source"],t)),"string"==typeof e.gainMultiplier&&(e.gainMultiplier=(0,h.K)(e.gainMultiplier,e,["m"],t)),"string"==typeof e.costMultiplier&&(e.costMultiplier=(0,h.K)(e.costMultiplier,e,["m"],t)),"string"==typeof e.onPurchase&&(e.onPurchase=(0,h.K)(e.onPurchase,e,["purchase"],t)),"string"==typeof e.onChange&&(e.onChange=(0,h.K)(e.onChange,e,["value","source"],t))}))}});var D=n(711),V=n(974),L=n(415);function B(e){var t,n;const s="string"==typeof e?{id:e}:e;let a,i=document.getElementById(null!==(t=s.id)&&void 0!==t?t:"");for(a in i||(i=document.createElement(null!==(n=s.tagName)&&void 0!==n?n:"div"),document.body.appendChild(i)),s)r(i,a,s[a]);return i}function G(e){e?document.documentElement.setAttribute("theme",e):document.documentElement.removeAttribute("theme")}function W(e){var t,n;const a=e.icon.split(/\s+/).filter((e=>e.trim().length>0)),i=null!==(t=a.pop())&&void 0!==t?t:e.icon;let r=null!==(n=a.pop())&&void 0!==n?n:e.color;const o=["icon"];return i&&o.push("icon-"+i),r&&!r.startsWith("#")&&(o.push(r),r=void 0),e.className&&o.push(e.className),(0,s.jsx)("svg",Object.assign({className:o.join(" "),width:e.size,height:e.size,color:r},{children:(0,s.jsx)("use",{xlinkHref:`#tabler-${i}`})}))}function H(e,t,n=0,s=n,a=0){var i;const r=l.Z.fromValue_noAlloc(e);return t=null!==(i="string"==typeof t?K[t]:t)&&void 0!==i?i:J,r.isFinite()?r.exponent<-300?r.sign<0?t.negativeVerySmall(r.abs(),a):t.verySmall(r,a):r.exponent<3?r.sign<0?t.negativeSmall(r.abs().toNumber(),a):t.small(r.toNumber(),a):r.sign<0?t.negativeDecimal(r.abs(),n,s):t.decimal(r,n,s):r.sign<0?t.negativeInfinite():t.infinite()}window.addEventListener("load",(()=>B("icon").innerHTML=L),!1);const K={},z={prec:3,commas:{show:!0,min:1e6,max:1e9}};H.all=K,H.exponentSettings=z,H.register=e=>{var t;return K[null!==(t=e.name)&&void 0!==t?t:""]=Object.assign(Object.assign({},J),e)};const J={name:"System",infinite:()=>(1/0).toString(),negativeInfinite(){return`-${this.infinite()}`},decimal(e,t,n){var s;return e.toStringWithDecimalPlaces(null!==(s=null!=t?t:n)&&void 0!==s?s:0)},negativeDecimal(e,t,n){return`-${this.decimal(e,t,n)}`},verySmall(e,t){return this.small(e.toNumber(),t)},negativeVerySmall(e,t){return`-${this.verySmall(e,t)}`},small:(e,t)=>e.toFixed(t),negativeSmall(e,t){return`-${this.small(e,t)}`}};H.register(J);const Q=H.register({name:"Standard",decimal(e,t,n){var s;return null!==(s=this.exponent)&&void 0!==s||(this.exponent=ne(ee,1,1e3)),this.exponent(e,t,n)}}),X=(e,t=Q)=>H.register({name:`Mixed ${e.name}`,decimal:(n,s,a)=>(n.exponent<33?t:e).decimal(n,s,a)});X(H.register({name:"Scientific",decimal(e,t,n){var s;return null!==(s=this.exponent)&&void 0!==s||(this.exponent=ne(te(this),1)),this.exponent(e,t,n)}})),X(H.register({name:"Engineering",decimal(e,t,n){var s;return null!==(s=this.exponent)&&void 0!==s||(this.exponent=ne(te(this),3)),this.exponent(e,t,n)}})),X(H.register({name:"Logarithmic",decimal(e,t,n){var s;return null!==(s=this.exponent)&&void 0!==s||(this.exponent=te(this,((e,t)=>e.toFixed(t)))),`e${this.exponent(e.log10(),t,n)}`}}));const Y={abbreviations:["K","M","B","T","Qa","Qt","Sx","Sp","Oc","No"],prefixes:[["","U","D","T","Qa","Qt","Sx","Sp","O","N"],["","Dc","Vg","Tg","Qd","Qi","Se","St","Og","Nn"],["","Ce","Dn","Tc","Qe","Qu","Sc","Si","Oe","Ne"]],prefixes_2:["","MI-","MC-","NA-","PC-","FM-","AT-","ZP-"]};function ee(e){const t=e.toNumber()-1;if(-1===t)return"";if(t>z.commas.min)return(1/0).toString();if(t<Y.abbreviations.length)return Y.abbreviations[t];const n=[];for(let e=t;e>0;e=Math.floor(e/10))n.push(Y.prefixes[n.length%3][e%10]);for(;n.length%3!=0;)n.push("");let s="";for(let e=n.length/3-1;e>=0;e--)s+=n.slice(3*e,3*e+3).join("")+Y.prefixes_2[e];return s.replace(/-[A-Z]{2}-/g,"-").replace(/U([A-Z]{2}-)/g,"$1").replace(/-$/,"")}function te(e,t=(e=>e.toString())){return function(n,s=z.prec,a=Math.max(2,s)){if(n.lt(z.commas.min))return t(n.toNumber(),Math.max(s,1));if(z.commas.show&&n.lt(z.commas.max)){const e=t(n.toNumber(),0).split(".");return e[0]=e[0].replace(/\w+$/g,(e=>Array.from(Array(Math.ceil(e.length/3))).map(((t,n)=>n?e.slice(-3*(n+1),-3*n):e.slice(-3))).reverse().join(","))),e.join(".")}return e.decimal(n,a,a)}}function ne(e,t,n=10){return function(s,a=0,i=0){const r=Math.pow(n,t);let o=s.log(r).floor().mul(t);n>=100&&(o=o.max(l.Z.dZero));let c=s.div(o.pow_base(n)).toFixed(a);return c===r.toFixed(a)&&(c=1..toFixed(a),o=o.add(t)),o.eq(l.Z.dZero)?c:`${c}${10===n?"e":" "}${e(o,i)}`}}function se(e,t){var n;const s=null!==(n=null==t?void 0:t.prec)&&void 0!==n?n:0,a=Math.max(s,"tiny"===(null==t?void 0:t.len)?0:"short"===(null==t?void 0:t.len)?2:3);return H(e,null==t?void 0:t.notation,s,a,s)}function ae(e,t,n){var s,a,i,r,o,l;const c=null!==(s=null==t?void 0:t.len)&&void 0!==s?s:"long",u=(null!==(a=null==n?void 0:n.sep)&&void 0!==a?a:"long"===c)?", ":":",d=((null==t?void 0:t.oxfordComma)?u:"")+((null!==(i=null==n?void 0:n.lastSep)&&void 0!==i?i:"long"===c)?" and ":u),m=(null!==(r=null==n?void 0:n.now)&&void 0!==r?r:"long"===c)?"now":"",p=(null!==(o=null==n?void 0:n.never)&&void 0!==o?o:"long"===c)?"never":"",g=(null!==(l=null==n?void 0:n.ago)&&void 0!==l?l:"long"===c)?"ago":"";if(null!=p&&(e<0||null!=(null==t?void 0:t.epoch)&&(t.epoch<=0||e-t.epoch<0)))return p;if(null!=m&&(0===e||null!=(null==t?void 0:t.epoch)&&e===t.epoch))return m;null!=(null==t?void 0:t.epoch)&&(e-=t.epoch);let f=Math.floor(e/1e3),h=Math.floor(e-1e3*f),v=Math.floor(f/60);f-=60*v;let x=Math.floor(v/60);v-=60*x;let b=Math.floor(x/24);x-=24*b;let j=Math.floor(b/365);if(b-=365*j,(null==t?void 0:t.millis)||(h=0),null!=m&&b+x+v+f+h===0)return m;let y=[];if(y="long"!==c?[j>0?j.toFixed(0):"",b>0?b.toFixed(0):"",x>0||"short"===c?x.toFixed(0):"",v>0||"short"===c?v.toFixed(0):"",(f+h/1e3).toFixed(!(null==t?void 0:t.millis)||"tiny"===c&&0===h?0:3)].map((e=>"short"!==c||1!==e.length&&1!==e.indexOf(".")?e:"0"+e)):[[j,"year"],[b,"day"],[x,"hour"],[v,"minute"],[f,"second",j+b+x+v===0,h]].map((([e,t,n=!1,s=0])=>e>0||s>0||n&&0===e?e.toString()+(s>0?"."+s.toString():"")+" "+t+(1===e?"":"s"):"")),y=y.filter((e=>!!e)),y.length>2){const e=y.pop();y=[y.join(u),e]}return y.join(d)+(null!=g?" "+g:"")}function ie(e,t,n){var s,a,i,r,o,l;return e||(e=null!==(i=Math.abs(Math.abs(null!==(s=null==t?void 0:t.count)&&void 0!==s?s:0)-1)<=(null!==(a=null==n?void 0:n.tolerance)&&void 0!==a?a:.001)?null==t?void 0:t.singularName:null==t?void 0:t.pluralName)&&void 0!==i?i:null==t?void 0:t.name),(null===(r=null==n?void 0:n.condition)||void 0===r||r)&&(e||null!==(o=null==n?void 0:n.allowEmpties)&&void 0!==o&&o)?null===(l=null==n?void 0:n.capitalize)||void 0===l||l?(null!=e?e:"").replace(/([a-z])([A-Z]|_\S)/g,((e,t,n)=>`${t} ${n.slice(-1)}`)).replace(/(?<=^|\s)\w(?=\w)/g,(e=>e.toUpperCase())):e:void 0}const re={none:0,number:1,percentage:1,time:1e3};function oe(e){var t,n,a,i,r,o,c,{value:u,epoch:d,name:m,resource:p={name:m,count:u?l.Z.fromValue(u):void 0},display:g=(null!==(t=p.display)&&void 0!==t?t:"number"),length:f="long",round:h=("number"===g?l.Z.floor:l.Z.round),showLocked:v=!1,showIcon:x=!0,showName:b=!0,showValue:j="none"!==g,showMaxValue:y=!1,showRawValue:O=!1,showRate:N=!1,showExtras:Z=!1,showColors:w=!1,showRateColors:k=!0,showNegatives:S=!0,showZeros:C=!0,showPlusSign:_=!1,showZeroRates:M=!1,showRatePercentages:T="number"===g,showRateHistory:$=!1,showCapitalized:A=!0,showChrome:U=!1,precision:E=("time"===g?3:"number"===g?2:0),valuePrecision:I=E,rawValuePrecision:R=I,ratePrecision:F=("time"===g?0:E),extrasPrecision:q=E,reversedDirection:D=!1,prefix:V="",suffix:L="",infix:B=((x||b)&&(j||y||O||N||Z)?":":""),placeholder:G="-",timeSeparator:H=("long"===f?", ":":"),ago:K="ago",now:z="now",never:J="never",className:Q="",style:X}=e;const{settings:{numberFormat:Y}}=P(),ee=Y||"Standard",te=[];function ne(e=l.Z.dNaN,t="",{prec:n=E,rnd:a=h,cls:i="",disp:r=g,len:o=f,neg:c=S,zero:u=C,plus:m=_,color:p=w,paren:v=!1,sep:x=H,pre:b="",post:j="",ref:y=!1,dry:O=!1}){const N=l.Z.pow10(n),Z=a(e.minus(y&&d?d:l.Z.dZero).multiply(re[r]).multiply(N)).divide(N);if(Z.isNan()||!c&&Z.lessThan(l.Z.dZero)||!u&&Z.equals(l.Z.dZero))return"";const k=[r.toString()];if(i&&k.push(i),p){const e=D?Z.negate():Z;k.push(e.greaterThan(l.Z.dZero)?"positive":e.lessThan(l.Z.dZero)?"negative":"zero")}let M=G;return"number"===r?M=se(Z,{notation:ee,len:o,prec:n}):"percentage"===r?M=se(Z,{notation:ee,len:o,prec:n})+"%":"time"===r?M=y&&J.length>0&&(e.lessThanOrEqualTo(l.Z.dZero)||(null!=d?d:-1/0)<=0)?J:y&&null!=d?ae(Z.toNumber(),{len:o,millis:n>0},{sep:x,now:z,never:J,ago:K}):ae(Z.toNumber(),{len:o,millis:n>0}):"none"===r&&(M=""),!m||!Z.greaterThanOrEqualTo(l.Z.dZero)||"long"===o&&"time"===r||M.startsWith("+")||(M="+"+M),M=b+M+j,v&&(M="("+M+")"),O||te.push((0,s.jsx)("div",Object.assign({className:k.join(" ")},{children:M}),t)),M}const oe=["resource"],le=u?l.Z.fromValue(u):null!==(a=null!==(n=p.value?p.value():void 0)&&void 0!==n?n:p.count)&&void 0!==a?a:l.Z.dNaN;if((x&&p.icon||b&&p.name)&&te.push((0,s.jsxs)("div",Object.assign({className:"name"},{children:[x&&p.icon&&p.icon.length>0?(0,s.jsx)(W,{icon:p.icon,size:"1em"}):null,ie(m,{count:le.toNumber(),name:p.name,singularName:null!==(i=p.singularName)&&void 0!==i?i:p.pluralName,pluralName:null!==(r=p.pluralName)&&void 0!==r?r:p.singularName},{condition:b,allowEmpties:!1,capitalize:A}),B]}),"name")),j){const e=y?ne(p.maxCount,"denominator",{prec:I,pre:" / ",dry:!0}):"";ne(le,"value",{prec:I,ref:null!=d&&!l.Z.isNaN(d),post:e,cls:"value"})}if(O&&ne(u?l.Z.fromValue(u):p.count,"raw-value",{disp:"number",prec:R,paren:j,cls:"raw-value"}),N&&null!=p.rate&&(null!==(o=p.rate.lastCountUpdate)&&void 0!==o?o:0)>0&&(M||p.rate.count.notEquals(l.Z.dZero))){let e=l.Z.dZero;if($&&p.rate.pastCounts.length>0){let t=l.Z.dZero,n=p.rate.pastCounts.length;p.rate.pastCounts.forEach(((s,a)=>{const i=n-a;e=s.multiply(i).plus(e),t=t.plus(i)})),e=e.divide(t)}else e=p.rate.count;let t=T,n=T?le.multiply(.01):l.Z.dOne;((null==n?void 0:n.equals(l.Z.dZero))||t&&(e.e+F<n.e||n.e<3))&&(t=!1,n=l.Z.dOne),ne(e.divide(n),"rate",{disp:t?"percentage":g,prec:F,paren:j||O,color:k,len:t||"long"!==f?"tiny":"short",cls:"rate",rnd:l.Z.round,neg:!0,zero:!0,plus:!0,post:"/s"})}if(Z&&p.extra&&Object.keys(p.extra).length>0)for(let e in p.extra)e.length>0&&(te.length>0&&te.push((0,s.jsx)("div",{className:"break"},`break-${e}`)),te.push((0,s.jsxs)("div",Object.assign({className:"extra-name"},{children:[ie(e,void 0,{capitalize:A}),B]}),`extra-name-${e}`))),Z&&ne(l.Z.fromNumber(p.extra[e]),`extra-value-${e}`,{disp:e.toLowerCase().includes("time")?"time":g,prec:q,cls:"extra-value"});v||null===(c=p.unlocked)||void 0===c||c||(oe.push("locked"),te.splice(0,te.length,(0,s.jsx)("div",Object.assign({className:"placeholder"},{children:G}),"lock")));const ce=U?void 0:X;Q&&!U&&oe.push(Q);const ue=(0,s.jsxs)("div",Object.assign({className:oe.join(" "),style:ce,id:`resource-${null!=m?m:p.name}`},{children:[V&&(0,s.jsx)("div",Object.assign({className:"prefix"},{children:V})),te,L&&(0,s.jsx)("div",Object.assign({className:"suffix"},{children:L}))]}));return U?(0,s.jsx)("div",Object.assign({className:Q||void 0,style:X,id:`resource-chrome-${null!=m?m:p.name}`},{children:ue})):ue}function le({resource:e,enabled:t=!0,allowUnlocking:n=!1,maxNum:a,minNum:i,increment:r,precision:o=0,gainMultiplier:c=l.Z.dOne,costMultiplier:u=l.Z.dOne,mode:d="buy",overrideCount:m,overrideMaxCount:p,overrideMinCount:h,overrideBuyAmount:v,prefix:x="Buy",suffix:b="",infix:j="for",and:y="&",className:O,style:N,onPurchase:Z}){var w,k,S;const{resourceManager:C,settings:{buyAmount:_}}=P(),M=C.get(e),T=M.count,$=null!==(k=ue[null!==(w=null!=v?v:_)&&void 0!==w?w:"+1"])&&void 0!==k?k:ue["+1"];function A(e,t){return e.map(((e,a)=>{var i;return(0,s.jsx)(oe,{resource:"string"==typeof e.resource?{name:e.resource}:e.resource,value:t.multiply(e.count),display:"string"!=typeof e.resource?e.resource.display:"number",precision:o,infix:"",placeholder:"",prefix:a>0?y:"",showLocked:n,showValue:"string"==typeof e.resource||null===(i=e.resource.unlocked)||void 0===i||i,showColors:!0,showChrome:!0,showPlusSign:!0,className:"value-first"},"string"==typeof e.resource?e.resource:e.resource.name)}))}function U(e=l.Z.dZero){var t,n;const s=M.value();return s.plus(e).divide(null!=r?r:l.Z.dOne).floor().multiply(null!=r?r:l.Z.dOne).clamp(l.Z.max(null!=h?h:l.Z.dNegInf,null!==(t=M.minCount)&&void 0!==t?t:l.Z.dZero),l.Z.min(null!=p?p:l.Z.dInf,null!==(n=M.maxCount)&&void 0!==n?n:l.Z.dInf)).minus(s)}null!=i||(i=$.min),null!=a||(a=$.max),null!=r||(r=$.inc),null===(S=M.unlocked)||void 0===S||S||(n?i=a=r=1:(i=a=r=0,t=!1)),"sell"===d&&([i,a,r]=[-i,-a,-r]),null!=m&&(M.count=l.Z.fromValue(m));let E=!0,I=M.buy(U(a),"dry-partial",c,u),R=l.Z.fromValue(I.count).toNumber();if(R%r!=0&&(I=M.buy(U(I.count),"dry-partial",c,u),R=l.Z.fromValue(I.count).toNumber()),i>=0&&R<i||i<0&&R>i||0===R){const e=U(f(r,Math.min(i,a),Math.max(i,a)));I=M.buy(e.abs().lessThan(l.Z.dOne)?Math.sign(r):e,"dry-full",c,u),R=l.Z.fromValue(I.count).toNumber(),E=!1}t||(I.cost=[]);const F=I.cost.reduce(((e,t)=>e.plus(t.count)),l.Z.dZero);null!=m&&(M.count=T);const q=["buy-button",`buy-button-${E?"":"un"}affordable`,O].filter((e=>!!e));return(0,s.jsxs)("button",Object.assign({onClick:g((function(e,s){var a;if(s.preventDefault(),!t||l.Z.fromValue(e).equals(l.Z.dZero))return;null!==(a=M.unlocked)&&void 0!==a&&!a&&n&&(M.unlocked=!0),null!=m&&(M.count=l.Z.fromValue(m));const i=M.buy(e,"partial",c,u);null!=m&&(M.count=T.plus(M.count).minus(m)),Z&&i.gain.length>0&&Z(M,i.gain[0].count)}),E&&t?I.count:l.Z.dZero),disabled:!E||!t,className:q.join(" "),style:N,id:`button-buy-${M.name}`},{children:[x&&(0,s.jsx)("div",Object.assign({className:"prefix"},{children:x})),A(I.gain,l.Z.dOne),F.notEquals(l.Z.dZero)&&j&&(0,s.jsx)("div",Object.assign({className:"infix"},{children:j})),F.notEquals(l.Z.dZero)&&A(I.cost,l.Z.dNegOne),b&&(0,s.jsx)("div",Object.assign({className:"suffix"},{children:b}))]}))}function ce(){const{settings:e}=P(),[t,n]=(0,i.useState)(e.buyAmount);function a(t){t.preventDefault(),e.buyAmount=t.target.value,n(e.buyAmount)}const r=Object.keys(ue).sort(((e,t)=>e.substring(1).localeCompare(t.substring(1))));return(0,s.jsx)(s.Fragment,{children:r.map((e=>{return(0,s.jsxs)("button",Object.assign({value:e,className:"buy-amount-button "+(n=e,n===t?"selected":"unselected"),onClick:a,id:`button-${e.replace(/\W/g,"")}`},{children:[de[e[0]]&&(0,s.jsx)(W,{icon:de[e[0]]}),e.replace(/^[+x]/,"").toUpperCase()]}),e);var n}))})}const ue={"+1":{min:1,max:1,inc:1},x10:{min:1,max:10,inc:10},x100:{min:1,max:100,inc:100},"+10":{min:10,max:10,inc:1},"+100":{min:100,max:100,inc:1},max:{min:1,max:100,inc:1}},de={x:"arrow-bar-to-right","+":"x"};function me(){const{resources:e}=P(),t=Object.values(e).filter((e=>e.name.startsWith("x_"))).sort(((e,t)=>parseInt(e.name.substring(2))-parseInt(t.name.substring(2))));return(0,s.jsx)("div",Object.assign({id:"main"},{children:(0,s.jsxs)("div",Object.assign({className:"panel"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:"X"})),t.map((e=>(0,s.jsx)(pe,{resource:e},e.name))),(0,s.jsx)("hr",{className:"separator"}),(0,s.jsxs)("div",Object.assign({className:"full right"},{children:["Buy multiples:  ",(0,s.jsx)(ce,{})]}))]}))}))}function pe(e){var t;return null===(t=e.resource.unlocked)||void 0===t||t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",Object.assign({className:"half"},{children:(0,s.jsx)(oe,{resource:e.resource,precision:0,ratePrecision:1,showExtras:!0,showRate:!0})})),(0,s.jsx)("div",{className:"quarter"}),(0,s.jsx)("div",Object.assign({className:"quarter"},{children:(0,s.jsx)(le,{resource:e.resource,overrideCount:e.resource.extra.manual,overrideBuyAmount:"x_0"===e.resource.name?"+1":void 0,prefix:"x_0"===e.resource.name?"":"Buy"})}))]}):null}function ge(e){return ye("string"==typeof e?{message:e}:null!=e?e:{})}ge.info=(e,t)=>ye(Object.assign(Object.assign({},t),{message:e,type:"info"})),ge.success=(e,t)=>ye(Object.assign(Object.assign({},t),{message:e,type:"success"})),ge.fail=(e,t)=>ye(Object.assign(Object.assign({},t),{message:e,type:"fail"}));const fe={top:"top",bottom:"bottom"},he={left:"left",center:"center",right:"right"},ve={info:"info-circle",success:"circle-check",fail:"alert-circle"};let xe,be,je=0;function ye(e){var t,n,s;(e=null!=e?e:{}).id=null!==(t=e.id)&&void 0!==t?t:je++;const a=null!==(n=e.position)&&void 0!==n?n:"top-right";xe=null!=xe?xe:{},xe[a]=null!==(s=xe[a])&&void 0!==s?s:[],a.includes("bottom")?xe[a].unshift(e):xe[a].push(e);const i=e.onHide;return e.onHide=e=>{var t;const n=null!==(t=e.position)&&void 0!==t?t:"top-right";xe[n]=xe[n].filter((t=>t.id!==e.id)),Oe(),i&&i(e)},Oe(),Object.assign(Object.assign({},new Promise((t=>{var n;return setTimeout(t,1e3*(null!==(n=e.duration)&&void 0!==n?n:3))}))),{hide:()=>e.onHide(e)})}function Oe(){be.render(Object.keys(fe).map((e=>(0,s.jsx)("div",Object.assign({className:`row ${e}`},{children:Object.keys(he).map((t=>{var n;const a=`${e}-${t}`;return(0,s.jsx)("div",Object.assign({className:`group ${t}`},{children:(null!==(n=xe[a])&&void 0!==n?n:[]).map((e=>(0,s.jsx)(Ne,Object.assign({},e),`toast_${a}_${e.id}`)))}),a)}))}),e))))}function Ne(e){var t;const[n,a]=(0,i.useState)("hidden");function r(){a("hidden"),setTimeout((()=>{e.onHide&&e.onHide(e)}),300)}(0,i.useEffect)((()=>{var t;const n=setTimeout((()=>a("shown")),50),s=setTimeout((()=>{0!==e.duration&&r()}),1e3*(null!==(t=e.duration)&&void 0!==t?t:3));return()=>{clearTimeout(n),clearTimeout(s)}}),[]);const o="object"==typeof e.icon?e.icon:e.icon?{icon:e.icon}:e.type?{icon:ve[e.type]}:void 0,l=["toast",n,e.type,e.className].filter((e=>!!e)).join(" ");return(0,s.jsxs)("div",Object.assign({className:l,onClick:null!==(t=e.onClick)&&void 0!==t?t:r},{children:[o&&(0,s.jsx)(W,Object.assign({},o)),(0,s.jsxs)("div",{children:[e.heading&&(0,s.jsx)("h4",{children:e.heading}),e.message&&(0,s.jsx)("div",Object.assign({className:"message"},{children:e.message}))]})]}))}window.addEventListener("load",(()=>be=(0,a.s)(B("toasts-root"))),!1);const Ze=JSON.parse('{"light":"Light Mode","dark":"Dark Mode","jumbo-light":"Jumbo Light","jumbo-dark":"Jumbo Dark"}');function we(){var e,t,n,a,r;const o=P(),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)(!1),m=(0,V.s0)(),p=(0,V.TH)(),g=o.settings,f=Ze,h=p.search.toLowerCase().includes("debug");function v(e,t){let n=parseInt(t);if(n>=1&&n<=1e3)switch(e){case"tick":g.ticksPerSecond=n;break;case"render":g.framesPerSecond=n;break;case"save":g.saveFrequencySecs=600/n}}function x(e){var t;g.theme=null!==(t=e.target.getAttribute("theme"))&&void 0!==t?t:void 0,G(g.theme)}function b(e){g.numberFormat=e.target.name}return(0,s.jsxs)("div",Object.assign({id:"options"},{children:[(0,s.jsxs)("div",Object.assign({className:"panel options",id:"options-theme"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:"Theme Options"})),(0,s.jsxs)("div",Object.assign({className:"full"},{children:["Current theme is:  ",null!==(t=f[null!==(e=g.theme)&&void 0!==e?e:""])&&void 0!==t?t:"default"]})),Object.keys(f).map((e=>(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("div",Object.assign({className:"themed",id:`theme-${e}`,theme:e},{children:(0,s.jsx)("button",Object.assign({id:`button-theme-${e}`,theme:e,onClick:x},{children:f[e]}))}))}),`theme-${e}`))),(0,s.jsx)("hr",{className:"separator"}),(0,s.jsxs)("div",Object.assign({className:"full"},{children:["Current number format is:  ",null!==(r=null===(a=H.all[null!==(n=g.numberFormat)&&void 0!==n?n:""])||void 0===a?void 0:a.name)&&void 0!==r?r:"default"]})),Object.values(H.all).map((e=>(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("div",Object.assign({className:"themed"},{children:(0,s.jsxs)("button",Object.assign({id:`button-notation-${e.name}`,name:e.name,onClick:b},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:e.name})),["123456.789","123.456e789.012"].map(((t,n)=>(0,s.jsx)("div",Object.assign({className:"full center"},{children:H(t,e,3)}),`sample-${e.name}-${n}`)))]}))}))}),`notation-${e.name}`)))]})),(0,s.jsxs)("div",Object.assign({className:"panel options",id:"options-data"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:"Game Data"})),(0,s.jsxs)("div",Object.assign({className:"full"},{children:["You started this game"," ",ae(g.lastUpdate,{epoch:g.lastReset})]})),(0,s.jsxs)("div",Object.assign({className:"full"},{children:["This session started"," ",ae(g.lastUpdate,{epoch:g.lastLoaded})]})),(0,s.jsxs)("div",Object.assign({className:"full"},{children:["Game was last saved"," ",ae(g.lastUpdate,{epoch:g.lastSaved})]})),(0,s.jsx)("hr",{className:"separator"}),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"button",value:"Load",onClick:function(){o.load()?(m({pathname:"/",search:p.search}),ge.success("Game loaded!")):ge.fail("Load failed!")},id:"button-load"})})),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"button",value:"Save",onClick:function(){o.save(h),ge.success("Game saved!")},id:"button-save"})})),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"button",value:"Load from File",onClick:function(){!function(e,t){const n=document.createElement("input");n.type="file",n.addEventListener("change",(function(t){const n=t.target.files;if(!n||0===n.length||!n[0])return;const s=new FileReader;s.onload=function(t){var n;const s=null===(n=t.target)||void 0===n?void 0:n.result;s&&"string"==typeof s&&e&&e(s)},s.readAsText(n[0])}),!1),n.click()}((e=>{o.loadAs(e)?(m({pathname:"/",search:p.search}),ge.success("Game imported!")):ge.fail("Import failed!")}))},id:"button-file-load"})})),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"button",value:"Save to File",onClick:function(){const e=function(e,t,n){const s={};for(const n in e){const a=n,i=e[n],r=t?t(i):i;s[a]=r}return s}(globalThis.gamePackage,(e=>null==e?void 0:e.replace(/\W/g,"_"))),t=(new Date).toISOString().replace(/\D/g," ").trim().replace(/\D/g,"-");!function(e,t){t instanceof Blob||(t=new Blob([t],{type:"text/plain"}));const n=URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download=e,s.click(),URL.revokeObjectURL(n)}(`${e.name}-v${e.version}-${t}`,o.saveAs(h)),ge.success("Game exported!")},id:"button-file-save"})})),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"button",value:"Import",onClick:function(){o.loadAs(l)?(m({pathname:"/",search:p.search}),ge.success("Game imported!")):ge.fail("Import failed!")},id:"button-import"})})),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"button",value:"Export",onClick:function(){c(o.saveAs(h)),ge.success("Game exported!")},id:"button-export"})})),(0,s.jsx)("div",Object.assign({className:"full center",id:"export-text"},{children:(0,s.jsx)("textarea",{value:l,onChange:e=>c(e.target.value)})}))]})),(0,s.jsxs)("div",Object.assign({className:"panel options",id:"options-advanced"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:"Advanced Settings"})),(0,s.jsx)("div",Object.assign({className:"full"},{children:"If you are having performance issues, increase the time between updates. Faster updating frequncies lead to better game experience but might use a lot of CPU."})),(0,s.jsx)("div",Object.assign({className:"half"},{children:"Updating frequency:"})),(0,s.jsxs)("div",Object.assign({className:"half center"},{children:[Math.floor(1e3/g.ticksPerSecond),"ms"]})),(0,s.jsx)("div",{className:"half"}),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"range",min:1,max:1e3,value:g.ticksPerSecond,onInput:e=>v("tick",e.target.value),id:"input-freq-tick"})})),(0,s.jsx)("div",{className:"full"}),(0,s.jsx)("div",Object.assign({className:"half"},{children:"Rendering frequency:"})),(0,s.jsxs)("div",Object.assign({className:"half center"},{children:[Math.floor(1e3/g.framesPerSecond),"ms"]})),(0,s.jsx)("div",{className:"half"}),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"range",min:1,max:60,value:g.framesPerSecond,onInput:e=>v("render",e.target.value),id:"input-freq-render"})})),(0,s.jsx)("div",Object.assign({className:"full"},{children:"Change how often the game is saved in the background. More frequent saving leads to faster backups, but increases CPU and I/O usage"})),(0,s.jsx)("div",Object.assign({className:"half"},{children:"Saving frequency:"})),(0,s.jsx)("div",Object.assign({className:"half center"},{children:ae(1e3*g.saveFrequencySecs,{},{ago:""})})),(0,s.jsx)("div",{className:"half"}),(0,s.jsx)("div",Object.assign({className:"half center"},{children:(0,s.jsx)("input",{type:"range",min:1,max:60,value:600/g.saveFrequencySecs,onInput:e=>v("save",e.target.value),id:"input-freq-save"})}))]})),(0,s.jsxs)("div",Object.assign({className:"panel options reset",id:"options-reset"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar warning"},{children:"Game Reset"})),(0,s.jsx)("div",Object.assign({className:"full"},{children:"WARNING: this will completely reset your game and delete all saved progress and setting. Only use this if you want to restart the game from beginning, or if something in the settings is so messed up that the game is now unplayable."})),(0,s.jsx)("div",Object.assign({className:"full"},{children:(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:u,onChange:()=>d(!u),id:"acknowledge-box"}),"I understand what this means and still want to reset the game"]})})),(0,s.jsx)("div",Object.assign({className:"full right"},{children:(0,s.jsx)("input",{type:"button",value:"Reset everything",disabled:!u,onClick:function(){u&&(confirm("Are you sure you want to reset? This cannot be undone.")?(o.reset(),m({pathname:"/",search:p.search})):d(!1))},id:"button-wipeall"})}))]})),h&&(0,s.jsxs)("div",Object.assign({className:"panel options debug",id:"options-debug"},{children:[(0,s.jsx)("div",Object.assign({className:"title-bar"},{children:"Debug Context"})),(0,s.jsx)("div",Object.assign({className:"full"},{children:JSON.stringify(o,((e,t)=>"string"==typeof e&&e.startsWith("_")||ke.includes(e)?void 0:t),2)}))]}))]}))}const ke=["context","manager","resourceManager"];function Se(e){if(null!=e.condition&&!e.condition)return null;const t=(0,V.TH)();let n=e.to.replace(/\W/g,"");return""===n&&(n="main"),(0,s.jsx)("div",Object.assign({id:`tab-${n}`},{children:(0,s.jsx)(D.OL,Object.assign({className:({isActive:e})=>e?"active":"",to:{pathname:e.to,search:t.search}},{children:e.children}))}))}function Ce(){const{settings:e,resourceManager:t,save:n}=P(),[a,r]=(0,i.useState)(),[o,l]=(0,i.useState)(0);function c(){t.update(void 0,"tick").includes(!0),e.lastUpdate-e.lastSaved>=1e3*e.saveFrequencySecs&&e.lastUpdate-e.lastLoaded>=1e3*e.saveFrequencySecs&&(n(),ge.info("Game saved!")),l((t=>e.lastUpdate-t>=1e3/e.framesPerSecond?e.lastUpdate:t))}return(0,i.useEffect)((function(){return a&&clearInterval(a),r(setInterval(c,1e3/e.ticksPerSecond)),G(e.theme),()=>{a&&(clearInterval(a),r(void 0))}}),[e,e.ticksPerSecond,e.theme]),(0,s.jsxs)(D.UT,{children:[(0,s.jsxs)("nav",Object.assign({className:"navbar"},{children:[(0,s.jsx)("div",Object.assign({className:"left"},{children:(0,s.jsx)(Se,Object.assign({to:"/"},{children:"Main"}))})),(0,s.jsx)("div",{className:"spacer"}),(0,s.jsx)("div",Object.assign({className:"right"},{children:(0,s.jsx)(Se,Object.assign({to:"/options"},{children:"Settings"}))}))]})),(0,s.jsxs)(V.Z5,{children:[(0,s.jsx)(V.AW,{path:"/",element:(0,s.jsx)(me,{})}),(0,s.jsx)(V.AW,{path:"/options",element:(0,s.jsx)(we,{})})]})]})}function _e({frames:e=12,duration:t=1}){return(0,s.jsx)("svg",Object.assign({className:"spinner",width:"128px",height:"128px",viewBox:"0 0 100 100"},{children:Array.from(Array(e).keys()).map((n=>(0,s.jsx)("g",Object.assign({transform:`rotate(${360*n/e} 50 50)`},{children:(0,s.jsx)("rect",Object.assign({x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#32a0da"},{children:(0,s.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:`${t}s`,begin:t/e*(n-e)+"s",repeatCount:"indefinite"})}))}),`g-${n}`)))}))}function Me(){const{context:e,load:t}=P(),[n,a]=(0,i.useState)(!1),[r,o]=(0,i.useState)(!1);function l(){try{e.init(),t(),a(!0)}catch(e){throw o(!0),e}}return(0,i.useEffect)((()=>{n||r||setTimeout(l,1)}),[n,r]),n?(0,s.jsx)(Ce,{}):r?(0,s.jsx)(q,{}):(0,s.jsx)(_e,{})}window.addEventListener("load",(()=>(0,a.s)(B("app")).render((0,s.jsx)(R,{children:(0,s.jsx)(Me,{})}))),!1)},730:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function compileInlineFunction(body,thisBind,args=[],globals={},reserved=[],forceArgs=!1,forceGlobals=!1){let fnBody=body.replace(/\b\w+\b/gim,(function(e){return!e||"this"===e||reserved.includes(e)?e:args.includes(e)?(forceArgs=!0,"___param_"+e):globals[e]?(forceGlobals=!0,"___globals."+e):e})),fn;forceArgs&&(fnBody=`(function (${args.map((e=>"___param_"+e)).join(",")}) { return ${fnBody}; })`),forceGlobals&&(fnBody=`(function (___globals) { return (${fnBody}); })`);try{fn=eval(fnBody)}catch(e){fn=null}return thisBind&&"function"==typeof fn&&(fn=fn.bind(thisBind)),forceGlobals&&"function"==typeof fn&&(fn=fn(globals),thisBind&&"function"==typeof fn&&(fn=fn.bind(thisBind))),"function"!=typeof fn?forceArgs?()=>fn:compileInlineFunction(body,thisBind,args,globals,reserved,!0,forceGlobals):fn}__webpack_require__.d(__webpack_exports__,{K:()=>compileInlineFunction})}},e=>{e.O(0,[216,840],(()=>(54,e(e.s=54)))),e.O()}]);